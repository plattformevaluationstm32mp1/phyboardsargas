<!DOCTYPE html><html lang="de"><head><meta charset="utf-8"><!-- Bootstrap Template by WapplerSystems. https://t3bootstrap.de This website is powered by TYPO3 - inspiring people to share! TYPO3 is a free open source Content Management Framework initially created by Kasper Skaarhoj and licensed under GNU/GPL. TYPO3 is copyright 1998-2023 of Kasper Skaarhoj. Extensions are copyright of their respective owners. Information and contribution at https://typo3.org/ --><link rel="shortcut icon" href="/typo3conf/ext/phytec_base_template/Resources/Public/Images/favicon.ico" type="image/png"><title>Confluence Documents | PHYTEC</title><meta http-equiv="x-ua-compatible" content="IE=11; IE=edge"/><meta name="generator" content="TYPO3 CMS"/><meta property="og:type" content="website"/><meta property="og:site_name" content="PHYTEC Messtechnik GmbH"/><meta name="twitter:card" content="summary"/><link rel="stylesheet" type="text/css" href="/typo3temp/assets/compressed/merged-4290897b56bd366c2fa4ffc753219a8e-min.css.gzip?1679670089" media="all"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="format-detection" content="telephone=no"><meta name="navtitle" content="Document"><link href="/typo3conf/ext/phytec_base_template/Resources/Public/Images/apple-touch-icon-57x57.png" rel="apple-touch-icon apple-touch-icon-precomposed"/><link href="/typo3conf/ext/phytec_base_template/Resources/Public/Images/apple-touch-icon-72x72.png" rel="apple-touch-icon apple-touch-icon-precomposed" sizes="72x72"/><link href="/typo3conf/ext/phytec_base_template/Resources/Public/Images/apple-touch-icon-114x114.png" rel="apple-touch-icon apple-touch-icon-precomposed" sizes="114x114"/><link href="/typo3conf/ext/phytec_base_template/Resources/Public/Images/apple-touch-icon-144x144.png" rel="apple-touch-icon apple-touch-icon-precomposed" sizes="144x144"/><script> window.addEventListener('cookieConsent', function (event) { if (event.detail.hasOption('heatclix')) { if (typeof heatclix == 'undefined') { var heatclix_script = document.createElement('script'); var heatclix_purl = encodeURIComponent(location.href).replace('.', '~'); var heatclixjs = "phytec.de"; var uid = "02b2073ad35378c78198a408a24cfd7f11c827d8"; heatclix_script.type = "text/javascript"; heatclix_script.src = "https://app.heatclix.net/?heatclixjs="+heatclixjs+"&uid="+uid+"&purl="+heatclix_purl; document.getElementsByTagName('head')[0].appendChild(heatclix_script); } } }); </script><script> window.addEventListener('cookieConsent', function (event) { if (event.detail.hasOption('google_analytics')) { (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= 'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-5ZNC29V'); } }); </script><link rel="alternate" hreflang="en" href="https://www.phytec.eu/en/cdocuments/"/><link rel="alternate" hreflang="ru" href="https://www.phytec.ru/ru/cdocuments/"/><link rel="alternate" hreflang="pl" href="https://www.phytec.pl/pl/cdocuments/"/><link rel="alternate" hreflang="de" href="https://www.phytec.de/cdocuments/"/><link rel="alternate" hreflang="x-default" href="https://www.phytec.eu/en/cdocuments/"/><link rel="canonical" href="https://www.phytec.de/cdocuments/"/><script data-ignore="1">const cookieConsentConfiguration = JSON.parse('{"cookieName":"cookie_consent","expiryDays":365,"hideOnInit":false,"pushConsentToTagManager":false,"containerId":"cookie-consent"}');</script></head><body class="page-default top-4" id="page_1025"><div id="page" class="fullwidth-layout"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5ZNC29V" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="background" class="transition"></div><a class="sr-only sr-only-focusable" href="#content"> Zum Inhalt springen </a><div class="frame frame-type-phytecbasetemplate_socialbar frame-layout-0 frame-space-before-medium" id="c4521"><div class="socialbar d-none d-lg-block"><div class="socialtab frame-space-before-small" style="z-index:2;"><p><a href="/unternehmen/kontakt/kontakt-formular/" title="Kontaktformular" target="_self">Kontakt-Formular</a></p><img src="/fileadmin/phytec_base/images/icons/Icons/icon-E-Mail.svg" alt="Kontakt" title="Kontakt" class=""/></div><div class="socialtab frame-space-before-small" style="z-index:3;"><p><a href="tel:+496131922132" title="+49 (0) 6131 9221- 32">+49 (0) 6131 9221- 32</a></p><img src="/fileadmin/phytec_base/images/icons/Icons/icon-Call.svg" alt="Phone" title="Phone" class=""/></div></div><div class="socialbar-mobile fixed-bottom d-block bg-white d-lg-none fix d-print-none"><div class="container-fluid"><div class="row"><div class="col text-center"><a href="/unternehmen/kontakt/kontakt-formular/" title="Kontakt" target="_self"><img src="/fileadmin/phytec_base/images/icons/Icons/icon-E-Mail.svg" alt="Kontakt" title="Kontakt" class=""/></a></div><div class="col text-center"><a href="https://wa.me/4915117662686" title="WhatsApp" target="_blank" rel="noopener"><img src="/fileadmin/phytec_base/images/icons/Icons/icon-whatsapp.svg" alt="WhatsApp" title="WhatsApp" class=""/></a></div><div class="col text-center"><a href="/suche/" title="Suche" target="_self"><img src="/fileadmin/phytec_base/images/icons/Icons/icon-Suche.svg" alt="Suche" title="Suche" class=""/></a></div></div></div></div><div class="special-bar"></div></div><header id="header"><div class="progress top-menu-progress"></div><div class="fixed-top fix"><div class="container-fluid top-bg-gradient"><div class="row "><div class="container top-menu-gradient"><div class="row top-menu"><div class="col-6 col-md-3 col-lg-3 col-xl-4"><div itemscope itemtype="http://schema.org/Organization" class="navbar-brand"><a itemprop="url" title="PHYTEC Messtechnik GmbH" tabindex="1" href="/startseite/"><img src="/fileadmin/phytec_base/images/icons/Logos/logo-PHYTEC.svg" alt="PHYTEC Messtechnik GmbH" title="PHYTEC Messtechnik GmbH" class="img-fluid"/></a></div><span class="claim d-print-none d-none d-xl-inline-block">We embed your ideas.</span></div><div class="col-6 col-md-9 col-lg-9 col-xl-8"><div class="d-print-none d-lg-none navbar-light float-right pt-2"><a class="navbar-toggler" href="#sidemenu"><i class="fa fa-bars" aria-hidden="true"></i></a></div><div class="d-print-none d-none d-lg-block float-right mt-1 navbar-language"><ul class="nav nav-inline"><li class="dropdown dropleft nav-item"><a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown" role="button" aria-expanded="false"><img src="/fileadmin/phytec_base/images/icons/Icons/de.svg" alt="Flagge" data-gt-src-en="/fileadmin/phytec_base/images/icons/Icons/en-us-gb.svg" data-gt-src-es="/fileadmin/phytec_base/images/icons/Icons/es.svg" data-gt-src-it="/fileadmin/phytec_base/images/icons/Icons/it.svg" data-gt-src-pl="/fileadmin/phytec_base/images/icons/Icons/pl.svg" data-gt-src-sv="/fileadmin/phytec_base/images/icons/Icons/swe.svg" data-gt-src-no="/fileadmin/phytec_base/images/icons/Icons/nor.svg" data-gt-src-ru="/fileadmin/phytec_base/images/icons/Icons/ru.svg"/></a><ul class="dropdown-menu" id="language-dropdown notranslate"><li><a href="#" onclick="doGTranslate('de|de','www.phytec.de');return false;" title="german" class="nturl dropdown-item"><img src="/fileadmin/phytec_base/images/icons/Icons/de.svg" alt="de.svg " title="" class=""/><b>PHYTEC Germany</b></a></li><li><a href="#" onclick="doGTranslate('de|en','www.phytec.eu');return false;" title="english" class="nturl dropdown-item"><img src="/fileadmin/phytec_base/images/icons/Icons/en-us-gb.svg" alt="en-us-gb.svg " title="" class=""/> english (auto trans.)</a></li><li><a href="#" onclick="doGTranslate('de|es','www.phytec.de');return false;" title="español" class="nturl dropdown-item"><img src="/fileadmin/phytec_base/images/icons/Icons/es.svg" alt="es.svg " title="" class=""/> español (auto trans.)</a></li><li><a href="#" onclick="doGTranslate('de|it','www.phytec.de');return false;" title="italiano" class="nturl dropdown-item"><img src="/fileadmin/phytec_base/images/icons/Icons/it.svg" alt="it.svg " title="" class=""/> italiano (auto trans.)</a></li><li><a href="#" onclick="doGTranslate('de|pl','www.phytec.pl');return false;" title="polskie" class="nturl dropdown-item"><img src="/fileadmin/phytec_base/images/icons/Icons/pl.svg" alt="pl.svg " title="" class=""/> polskie (auto trans.)</a></li><li><a href="#" onclick="doGTranslate('de|sv','www.phytec.de');return false;" title="svenska" class="nturl dropdown-item"><img src="/fileadmin/phytec_base/images/icons/Icons/swe.svg" alt="swe.svg " title="" class=""/> svenska (auto trans.)</a></li><li><a href="#" onclick="doGTranslate('de|no','www.phytec.de');return false;" title="norsk" class="nturl dropdown-item"><img src="/fileadmin/phytec_base/images/icons/Icons/nor.svg" alt="nor.svg " title="" class=""/> norsk (auto trans.)</a></li><li><a href="#" onclick="doGTranslate('de|ru','www.phytec.ru');return false;" title="русский" class="nturl dropdown-item"><img src="/fileadmin/phytec_base/images/icons/Icons/ru.svg" alt="ru.svg " title="" class=""/> русский (auto trans.)</a></li><li><a class="nturl dropdown-item" href="https://www.phytec.fr" title="PHYTEC France"><img src="/fileadmin/phytec_base/images/icons/Icons/fr.svg" alt="fr.svg " title="" class=""/> PHYTEC France</a></li><li><a class="nturl dropdown-item" href="https://www.phytec.com" title="PHYTEC USA"><img src="/fileadmin/phytec_base/images/icons/Icons/us.svg" alt="us.svg " title="" class=""/> PHYTEC USA</a></li><li><a class="nturl dropdown-item" href="https://www.phytec.in" title="PHYTEC India"><img src="/fileadmin/phytec_base/images/icons/Icons/in.svg" alt="in.svg " title="" class=""/> PHYTEC India</a></li><li><a class="nturl dropdown-item" href="http://www.phytec.cn" title="PHYTEC China"><img src="/fileadmin/phytec_base/images/icons/Icons/cn.svg" alt="cn.svg " title="" class=""/> PHYTEC China</a></li></ul></li></ul></div><div class="d-print-none d-none d-lg-block navbar-light float-right pt-2 top-searchbox-margin"><div class="searchClick"><img src="/fileadmin/phytec_base/images/icons/Icons/icon-suche-w.svg" alt="Search"></div></div><div class="custom-model-main"><script type="application/ld+json"> { "@context": "https://schema.org", "@type": "WebSite", "url": "https://www.phytec.de/", "potentialAction": { "@type": "SearchAction", "target": { "@type": "EntryPoint", "urlTemplate": "https://www.phytec.de/suche/?q={search_term_string}" }, "query-input": "required name=search_term_string" } } </script><div itemscope itemtype="http://schema.org/WebSite"><meta itemprop="url" content="https://www.phytec.de/"/><form action="/suche/" method="get" name="searchform-default" role="search" class="form-search"><div class="searchboxFix"><input value="1" name="start" type="hidden"><input id="q" class="searchboxInput" name="q" type="text" placeholder="Suchbegriff"><span class="searchboxSpan"><button class="btn btn-search searchboxButton" type="submit"><img src="/fileadmin/phytec_base/images/icons/Icons/Icon_feather-search.svg" class="searchboxIcon" alt="Search"></button></span></div></form></div><div class="bg-overlay"></div></div><script> document.addEventListener('DOMContentLoaded', function() { $(".searchClick").on('click', function() { $(".custom-model-main").addClass('model-open'); }); $(".bg-overlay").click(function(){ $(".custom-model-main").removeClass('model-open'); }); }); </script><div class="frame frame-type-phytecbasetemplate_accordionmenu frame-layout-0" id="c4365"><div class="float-right"><nav id="mainmenu" class="d-none d-lg-block my-2 navbar-expand-lg clearfix navbar-accordionmenu"><div class="container"><div class="collapse navbar-collapse"><div class="d-flex justify-content-between navbar-nav w-100 d-print-none"><div class="nav-item top-text-margin"><a class="white nav-link collapse-menu " href="/produkte/#produkte" aria-expanded="false" aria-controls="top-1" title="Produkte" name="top-1"> Produkte </a></div><div class="nav-item top-text-margin"><a class="white nav-link collapse-menu " href="/leistungen/#leistungen" aria-expanded="false" aria-controls="top-2" title="Leistungen" name="top-2"> Leistungen </a></div><div class="nav-item top-text-margin"><a class="white nav-link collapse-menu " href="/unternehmen/#unternehmen" aria-expanded="false" aria-controls="top-3" title="Unternehmen" name="top-3"> Unternehmen </a></div><div class="nav-item top-text-margin"><a class="white nav-link collapse-menu active" href="/support/#support" aria-expanded="false" aria-controls="top-4" title="Support" name="top-4"> Support </a></div><div class="nav-item top-text-margin"><a class="white nav-link" title="Karriere" href="/unternehmen/karriere-1/">Karriere</a></div></div></div></div></nav></div><div class="collapse-parent fixed-top fix fullwidth-layout"><div class="collapse fade-transition mega-menu-gradient" id="produkte"><div class="container" style="padding-left:0;"><a id="c-produkte"></a><div class="frame frame-type-wst3bootstrap_fluidrow frame-layout-0" id="c4346"><div class="row"><div class=" d-block col-12 d-sm-block col-sm-12 d-md-block col-md-12 d-lg-block col-lg-3 d-xl-block col-xl-3 colindex-0" id="div"><div class="frame frame-type-text frame-layout-0 frame-padding-top-large frame-padding-bottom-medium" id="c4511"><p class="mb-0"><span class="white"><strong>Embedded Hardware</strong></span></p></div><div class="frame frame-type-wst3bootstrap_fluidrow frame-layout-0" id="c47682"><div class="row"><div class=" d-block col-12 d-sm-block col-sm-12 d-md-block col-md-12 d-lg-block col-lg-12 d-xl-block col-xl-12 mmBorder colindex-0" id="div"><div class="frame frame-type-menu_pages frame-layout-0" id="c4677"><ul class="nav flex-column"><li class="nav-item"><a class="nav-link" href="/produkte/system-on-modules/" target="_self" title="System on Modules"><span>System on Modules</span></a></li><li class="nav-item"><a class="nav-link" href="/produkte/single-board-computer/" target="_self" title="Single Board Computer"><span>Single Board Computer</span></a></li><li class="nav-item"><a class="nav-link" href="/produkte/development-kits/" target="_self" title="Development Kits"><span>Development Kits</span></a></li><li class="nav-item"><a class="nav-link" href="/produkte/fertige-geraete-oem/" target="_self" title="OEM-Lösungen"><span>OEM-Lösungen</span></a></li><li class="nav-item"><a class="nav-link" href="/produkte/embedded-vision/" target="_self" title="Embedded Vision Lösungen"><span>Embedded Vision Lösungen</span></a></li><li class="nav-item"><a class="nav-link" href="/produkte/low-power-solutions/" target="_self" title="Low Power Solutions"><span>Low Power Solutions</span></a></li><li class="nav-item"><a class="nav-link" href="/produkte/zubehoer/" target="_self" title="Zubehör"><span>Zubehör</span></a></li></ul></div></div></div></div></div><div class=" d-block col-12 d-sm-block col-sm-12 d-md-block col-md-12 d-lg-block col-lg-3 d-xl-block col-xl-3 colindex-1" id="div"><div class="frame frame-type-text frame-layout-0 frame-padding-top-large frame-padding-bottom-medium" id="c4512"><p class="mb-0"><span class="white"><strong>Prozessor-Plattformen</strong></span></p></div><div class="frame frame-type-wst3bootstrap_fluidrow frame-layout-0" id="c47683"><div class="row"><div class=" d-block col-12 d-sm-block col-sm-12 d-md-block col-md-12 d-lg-block col-lg-12 d-xl-block col-xl-12 mmBorder colindex-0" id="div"><div class="frame d-inline-block frame-type-phytecbasetemplate_clickbox frame-layout-0" id="c47705"><a class="tab-open" title="NXP" href="/produkte/alle-hersteller/nxp/"><div class="frame frame-type-image frame-layout-0" id="c47706"><div class="ce-image ce-left ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="row"><div class=" d-block col-12 d-sm-block col-sm-12 d-md-block col-md-12 d-lg-block col-lg-12 d-xl-block col-xl-12 "><figure class="image "><div><img src="/fileadmin/phytec_base/images/icons/Logos/nav-logo-NXP.svg" alt="nav-logo-NXP.svg " title="" class="img-fluid "/></div></figure></div></div></div></div></div></a></div><div class="frame d-inline-block frame-type-phytecbasetemplate_clickbox frame-layout-0" id="c47708"><a class="tab-open" title="ST" href="/produkte/alle-hersteller/st/"><div class="frame frame-type-image frame-layout-0" id="c47709"><div class="ce-image ce-left ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="row"><div class=" d-block col-12 d-sm-block col-sm-12 d-md-block col-md-12 d-lg-block col-lg-12 d-xl-block col-xl-12 "><figure class="image "><div><img src="/fileadmin/phytec_base/images/icons/Logos/nav-logo-ST.svg" alt="nav-logo-ST.svg " title="" class="img-fluid "/></div></figure></div></div></div></div></div></a></div><div class="frame d-inline-block frame-type-phytecbasetemplate_clickbox frame-layout-0" id="c47710"><a href="/produkte/alle-hersteller/ti/" target="_self" class="tab-open"><div class="frame frame-type-image frame-layout-0" id="c47711"><div class="ce-image ce-left ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="row"><div class=" d-block col-12 d-sm-block col-sm-12 d-md-block col-md-12 d-lg-block col-lg-12 d-xl-block col-xl-12 "><figure class="image "><div><img src="/fileadmin/phytec_base/images/icons/Logos/nav-logo-TI.svg" alt="nav-logo-TI.svg " title="" class="img-fluid "/></div></figure></div></div></div></div></div></a></div><div class="frame frame-type-menu_pages frame-layout-0" id="c4360"><ul class="nav flex-column"><li class="nav-item"><a class="nav-link" href="/produkte/system-on-modules/phycore-imx-93/" target="_self" title="phyCORE-i.MX 93"><span>phyCORE-i.MX 93</span></a></li><li class="nav-item"><a class="nav-link" href="/produkte/system-on-modules/phycore-stm32mp13x/" target="_self" title="phyCORE-STM32MP13x"><span>phyCORE-STM32MP13x</span></a></li><li class="nav-item"><a class="nav-link" href="/produkte/system-on-modules/phycore-am64x-fpga/" target="_self" title="phyCORE-AM64x-FPGA"><span>phyCORE-AM64x-FPGA</span></a></li><li class="nav-item"><a class="nav-link" href="/produkte/system-on-modules/phycore-am68x-tda4x/" target="_self" title="phyCORE-AM68x/TDA4x"><span>phyCORE-AM68x/TDA4x</span></a></li><li class="nav-item"><a class="nav-link" href="/produkte/nxp-imx-8-alle-varianten/" target="_self" title="NXP i.MX 8 - Alle Varianten"><span>NXP i.MX 8 - Alle Varianten</span></a></li><li class="nav-item"><a class="nav-link" href="/produkte/nxp-imx-6ul-6ull/" target="_self" title="NXP i.MX 6UL/ULL"><span>NXP i.MX 6UL/ULL</span></a></li><li class="nav-item"><a class="nav-link" href="/produkte/nxp-imx-6/" target="_self" title="NXP i.MX 6"><span>NXP i.MX 6</span></a></li><li class="nav-item"><a class="nav-link" href="/produkte/stm32mp1/" target="_self" title="STM32MP1"><span>STM32MP1</span></a></li><li class="nav-item"><a class="nav-link" href="/produkte/ti-am62x/" target="_self" title="TI AM62x"><span>TI AM62x</span></a></li><li class="nav-item"><a class="nav-link" href="/produkte/ti-am64x/" target="_self" title="TI AM64x"><span>TI AM64x</span></a></li></ul></div></div></div></div></div><div class=" d-block col-12 d-sm-block col-sm-12 d-md-block col-md-12 d-lg-block col-lg-3 d-xl-block col-xl-3 colindex-2" id="div"><div class="frame frame-type-text frame-layout-0 frame-padding-top-large frame-padding-bottom-medium" id="c44838"><p class="mb-0"><span class="white"><strong>Embedded Software</strong></span></p></div><div class="frame frame-type-wst3bootstrap_fluidrow frame-layout-0" id="c47684"><div class="row"><div class=" d-block col-12 d-sm-block col-sm-12 d-md-block col-md-12 d-lg-block col-lg-12 d-xl-block col-xl-12 mmBorder colindex-0" id="div"><div class="frame frame-type-menu_pages frame-layout-0" id="c44840"><ul class="nav flex-column"><li class="nav-item"><a class="nav-link" href="/leistungen/phybsp/" target="_self" title="Betriebssysteme"><span>Betriebssysteme</span></a></li><li class="nav-item"><a class="nav-link" href="/produkte/software-releases/" target="_self" title="Software Releases"><span>Software Releases</span></a></li><li class="nav-item"><a class="nav-link" href="/leistungen/embedded-imaging/#c12878" target="_self" title="Vision Middleware"><span>Vision Middleware</span></a></li><li class="nav-item"><a class="nav-link" href="/leistungen/kuenstliche-intelligenz/" target="_self" title="Künstliche Intelligenz"><span>Künstliche Intelligenz</span></a></li><li class="nav-item"><a class="nav-link" href="/leistungen/sprachsteuerung/" target="_self" title="Sprachsteuerung"><span>Sprachsteuerung</span></a></li></ul></div></div></div></div></div><div class=" d-none d-sm-none d-md-none d-lg-block col-lg-3 d-xl-block col-xl-3 colindex-3" id="div"><div class="frame frame-type-text frame-layout-0 frame-padding-top-large frame-padding-bottom-medium" id="c4514"><p class="mb-0"><span class="white"><strong>Ihr Einstieg</strong></span></p></div><div class="frame frame-type-wst3bootstrap_fluidrow frame-layout-0" id="c47685"><div class="row"><div class=" d-block col-12 d-sm-block col-sm-12 d-md-block col-md-12 d-lg-block col-lg-12 d-xl-block col-xl-12 mmBorder colindex-0" id="div"><div class="frame frame-type-menu_pages frame-layout-0" id="c4348"><ul class="nav flex-column"><li class="nav-item"><a class="nav-link" href="/online-showroom/" target="_self" title="Online-Showroom"><span>Online-Showroom</span></a></li><li class="nav-item"><a class="nav-link" href="/expertengespraech/" target="_self" title="Expertengespräch"><span>Expertengespräch</span></a></li><li class="nav-item"><a class="nav-link" href="/unternehmen/schulungen-trainings/" target="_self" title="Schulungen + Trainings"><span>Schulungen + Trainings</span></a></li><li class="nav-item"><a class="nav-link" href="/leistungen/online-seminare/" target="_self" title="Webinare"><span>Webinare</span></a></li></ul></div><div class="frame frame-type-menu_pages frame-layout-0 frame-space-before-medium" id="c4526"><ul class="nav flex-column"><li class="nav-item"><a class="nav-link" href="/produkte/online-shop/" target="_self" title="Online Shop"><span>Online Shop</span></a></li></ul></div></div></div></div></div></div></div></div></div><div class="collapse fade-transition mega-menu-gradient" id="leistungen"><div class="container" style="padding-left:;"><a id="c-leistungen"></a><div class="frame frame-type-wst3bootstrap_fluidrow frame-layout-0" id="c4399"><div class="row"><div class=" d-block col-12 d-sm-block col-sm-12 d-md-block col-md-12 d-lg-block col-lg-3 d-xl-block col-xl-3 colindex-0" id="div"><div class="frame frame-type-text frame-layout-0 frame-padding-top-large frame-padding-bottom-medium" id="c5616"><p class="mb-0"><span class="white"><strong>Embedded Design Services</strong></span></p></div><div class="frame frame-type-wst3bootstrap_fluidrow frame-layout-0" id="c47686"><div class="row"><div class=" d-block col-12 d-sm-block col-sm-12 d-md-block col-md-12 d-lg-block col-lg-12 d-xl-block col-xl-12 mmBorder colindex-0" id="div"><div class="frame frame-type-menu_pages frame-layout-0" id="c5614"><ul class="nav flex-column"><li class="nav-item"><a class="nav-link" href="/leistungen/ihr-prototyp/" target="_self" title="Prototypentwicklung"><span>Prototypentwicklung</span></a></li><li class="nav-item"><a class="nav-link" href="/leistungen/custom-som/" target="_self" title="Custom SOM"><span>Custom SOM</span></a></li><li class="nav-item"><a class="nav-link" href="/leistungen/custom-sbc/" target="_self" title="Custom SBC"><span>Custom SBC</span></a></li><li class="nav-item"><a class="nav-link" href="/leistungen/custom-oem/" target="_self" title="Custom OEM"><span>Custom OEM</span></a></li><li class="nav-item"><a class="nav-link" href="/leistungen/teil-und-komplettentwicklungen/" target="_self" title="Teil- und Komplettentwicklungen"><span>Teil- und Komplettentwicklungen</span></a></li><li class="nav-item"><a class="nav-link" href="/leistungen/embedded-vision/" target="_self" title="Embedded Vision"><span>Embedded Vision</span></a></li><li class="nav-item"><a class="nav-link" href="/leistungen/low-power-solutions/" target="_self" title="Low Power Solutions"><span>Low Power Solutions</span></a></li><li class="nav-item"><a class="nav-link" href="/leistungen/raspberry-pi-designcenter/" target="_self" title="Raspberry Pi Designcenter"><span>Raspberry Pi Designcenter</span></a></li><li class="nav-item"><a class="nav-link" href="/leistungen/fae-service/" target="_self" title="FAE-Service"><span>FAE-Service</span></a></li></ul></div></div></div></div></div><div class=" d-block col-12 d-sm-block col-sm-12 d-md-block col-md-12 d-lg-block col-lg-3 d-xl-block col-xl-3 colindex-1" id="div"><div class="frame frame-type-text frame-layout-0 frame-padding-top-large frame-padding-bottom-medium" id="c6356"><p class="mb-0"><span class="white"><strong>Software-Services</strong></span></p></div><div class="frame frame-type-wst3bootstrap_fluidrow frame-layout-0" id="c47687"><div class="row"><div class=" d-block col-12 d-sm-block col-sm-12 d-md-block col-md-12 d-lg-block col-lg-12 d-xl-block col-xl-12 mmBorder colindex-0" id="div"><div class="frame frame-type-menu_pages frame-layout-0" id="c6358"><ul class="nav flex-column"><li class="nav-item"><a class="nav-link" href="/leistungen/iot/" target="_self" title="IoT / Cloud Integration"><span>IoT / Cloud Integration</span></a></li><li class="nav-item"><a class="nav-link" href="/leistungen/update-und-devicemanagement/" target="_self" title="Update- und Device-Management"><span>Update- und Device-Management</span></a></li><li class="nav-item"><a class="nav-link" href="/leistungen/embedded-security/" target="_self" title="Embedded Security"><span>Embedded Security</span></a></li><li class="nav-item"><a class="nav-link" href="/leistungen/kuenstliche-intelligenz/" target="_self" title="Künstliche Intelligenz"><span>Künstliche Intelligenz</span></a></li><li class="nav-item"><a class="nav-link" href="/leistungen/sprachsteuerung/" target="_self" title="Sprachsteuerung"><span>Sprachsteuerung</span></a></li><li class="nav-item"><a class="nav-link" href="/leistungen/software-lifecycle-management/" target="_self" title="Software-Lifecycle-Management"><span>Software-Lifecycle-Management</span></a></li></ul></div></div></div></div></div><div class=" d-block col-12 d-sm-block col-sm-12 d-md-block col-md-12 d-lg-block col-lg-3 d-xl-block col-xl-3 colindex-2" id="div"><div class="frame frame-type-text frame-layout-0 frame-padding-top-large frame-padding-bottom-medium" id="c5618"><p class="mb-0"><span class="white"><strong>Produktions-Services</strong></span></p></div><div class="frame frame-type-wst3bootstrap_fluidrow frame-layout-0" id="c47688"><div class="row"><div class=" d-block col-12 d-sm-block col-sm-12 d-md-block col-md-12 d-lg-block col-lg-12 d-xl-block col-xl-12 mmBorder colindex-0" id="div"><div class="frame frame-type-menu_pages frame-layout-0" id="c4398"><ul class="nav flex-column"><li class="nav-item"><a class="nav-link" href="/leistungen/produktions-services/#c17860" target="_self" title="3D-Gehäusedruck"><span>3D-Gehäusedruck</span></a></li><li class="nav-item"><a class="nav-link" href="/leistungen/produktions-services/#c17873" target="_self" title="Produktmontage"><span>Produktmontage</span></a></li><li class="nav-item"><a class="nav-link" href="/leistungen/produktions-services/#c17900" target="_self" title="Optikmontage"><span>Optikmontage</span></a></li></ul></div></div></div></div></div><div class=" d-block col-12 d-sm-block col-sm-12 d-md-block col-md-12 d-lg-block col-lg-3 d-xl-block col-xl-3 colindex-3" id="div"><div class="frame frame-type-text frame-layout-0 frame-padding-top-large frame-padding-bottom-medium" id="c5620"><p class="mb-0"><span class="white"><strong>Ihr Einstieg</strong></span></p></div><div class="frame frame-type-wst3bootstrap_fluidrow frame-layout-0" id="c47689"><div class="row"><div class=" d-block col-12 d-sm-block col-sm-12 d-md-block col-md-12 d-lg-block col-lg-12 d-xl-block col-xl-12 mmBorder colindex-0" id="div"><div class="frame frame-type-menu_pages frame-layout-0" id="c5615"><ul class="nav flex-column"><li class="nav-item"><a class="nav-link" href="/expertengespraech/" target="_self" title="Expertengespräch"><span>Expertengespräch</span></a></li><li class="nav-item"><a class="nav-link" href="/online-showroom/" target="_self" title="Online-Showroom"><span>Online-Showroom</span></a></li><li class="nav-item"><a class="nav-link" href="/leistungen/entwicklungsphasen/" target="_self" title="Entwicklungsphasen"><span>Entwicklungsphasen</span></a></li><li class="nav-item"><a class="nav-link" href="/unternehmen/schulungen-trainings/" target="_self" title="Schulungen + Trainings"><span>Schulungen + Trainings</span></a></li><li class="nav-item"><a class="nav-link" href="/leistungen/online-seminare/" target="_self" title="Webinare"><span>Webinare</span></a></li></ul></div></div></div></div></div></div></div></div></div><div class="collapse fade-transition mega-menu-gradient" id="unternehmen"><div class="container" style="padding-left:;"><a id="c-unternehmen"></a><div class="frame frame-type-wst3bootstrap_fluidrow frame-layout-0" id="c5622"><div class="row"><div class=" d-block col-12 d-sm-block col-sm-12 d-md-block col-md-12 d-lg-block col-lg-3 d-xl-block col-xl-3 colindex-0" id="div"><div class="frame frame-type-text frame-layout-0 frame-padding-top-large frame-padding-bottom-medium" id="c5628"><p class="mb-0"><span class="white"><strong>Firmenprofil</strong></span></p></div><div class="frame frame-type-wst3bootstrap_fluidrow frame-layout-0" id="c47690"><div class="row"><div class=" d-block col-12 d-sm-block col-sm-12 d-md-block col-md-12 d-lg-block col-lg-12 d-xl-block col-xl-12 mmBorder colindex-0" id="div"><div class="frame frame-type-menu_pages frame-layout-0" id="c5626"><ul class="nav flex-column"><li class="nav-item"><a class="nav-link" href="/unternehmen/ueber-uns/" target="_self" title="Über uns"><span>Über uns</span></a></li><li class="nav-item"><a class="nav-link" href="/unternehmen/partnernetzwerke/" target="_self" title="Partnernetzwerke"><span>Partnernetzwerke</span></a></li><li class="nav-item"><a class="nav-link" href="/unternehmen/referenzen/" target="_self" title="Referenzen"><span>Referenzen</span></a></li><li class="nav-item"><a class="nav-link" href="/unternehmen/made-in-germany/" target="_self" title="Made in Germany"><span>Made in Germany</span></a></li><li class="nav-item"><a class="nav-link" href="/unternehmen/management/" target="_self" title="Management"><span>Management</span></a></li><li class="nav-item"><a class="nav-link" href="/unternehmen/publikationen/" target="_self" title="Publikationen"><span>Publikationen</span></a></li><li class="nav-item"><a class="nav-link" href="/unternehmen/mediathek/" target="_self" title="Mediathek"><span>Mediathek</span></a></li></ul></div></div></div></div></div><div class=" d-block col-12 d-sm-block col-sm-12 d-md-block col-md-12 d-lg-block col-lg-3 d-xl-block col-xl-3 colindex-1" id="div"><div class="frame frame-type-text frame-layout-0 frame-padding-top-large frame-padding-bottom-medium" id="c5630"><p class="mb-0"><span class="white"><strong>News &amp; Events</strong></span></p></div><div class="frame frame-type-wst3bootstrap_fluidrow frame-layout-0" id="c47691"><div class="row"><div class=" d-block col-12 d-sm-block col-sm-12 d-md-block col-md-12 d-lg-block col-lg-12 d-xl-block col-xl-12 mmBorder colindex-0" id="div"><div class="frame frame-type-menu_pages frame-layout-0" id="c5634"><ul class="nav flex-column"><li class="nav-item"><a class="nav-link" href="/unternehmen/kalender/" target="_self" title="Kalender"><span>Kalender</span></a></li><li class="nav-item"><a class="nav-link" href="/unternehmen/messen/" target="_self" title="Messen 2023"><span>Messen 2023</span></a></li><li class="nav-item"><a class="nav-link" href="/online-showroom/" target="_self" title="Online-Showroom"><span>Online-Showroom</span></a></li><li class="nav-item"><a class="nav-link" href="/unternehmen/schulungen-trainings/" target="_self" title="Schulungen + Trainings"><span>Schulungen + Trainings</span></a></li><li class="nav-item"><a class="nav-link" href="/leistungen/online-seminare/" target="_self" title="Webinare"><span>Webinare</span></a></li><li class="nav-item"><a class="nav-link" href="/unternehmen/newsletter/" target="_self" title="Newsletter"><span>Newsletter</span></a></li><li class="nav-item"><a class="nav-link" href="https://blog.phytec.de" target="_blank" title="Blog"><span>Blog</span></a></li></ul></div></div></div></div></div><div class=" d-block col-12 d-sm-block col-sm-12 d-md-block col-md-12 d-lg-block col-lg-3 d-xl-block col-xl-3 colindex-2" id="div"><div class="frame frame-type-text frame-layout-0 frame-padding-top-large frame-padding-bottom-medium" id="c5632"><p class="mb-0"><span class="white"><strong>PHYTEC als Partner</strong></span></p></div><div class="frame frame-type-wst3bootstrap_fluidrow frame-layout-0" id="c47692"><div class="row"><div class=" d-block col-12 d-sm-block col-sm-12 d-md-block col-md-12 d-lg-block col-lg-12 d-xl-block col-xl-12 mmBorder colindex-0" id="div"><div class="frame frame-type-menu_pages frame-layout-0" id="c17876"><ul class="nav flex-column"><li class="nav-item"><a class="nav-link" href="/support/product-lifecycle-management/" target="_self" title="Langzeitverfügbarkeit"><span>Langzeitverfügbarkeit</span></a></li><li class="nav-item"><a class="nav-link" href="/unternehmen/preismodelle/" target="_self" title="Preismodelle"><span>Preismodelle</span></a></li><li class="nav-item"><a class="nav-link" href="/leistungen/liefermodelle/" target="_self" title="Liefermodelle"><span>Liefermodelle</span></a></li></ul></div></div></div></div></div><div class=" d-block col-12 d-sm-block col-sm-12 d-md-block col-md-12 d-lg-block col-lg-3 d-xl-block col-xl-3 colindex-3" id="div"><div class="frame frame-type-text frame-layout-0 frame-padding-top-large frame-padding-bottom-medium" id="c17874"><p class="mb-0"><span class="white"><strong>Ihr Weg zu uns</strong></span></p></div><div class="frame frame-type-wst3bootstrap_fluidrow frame-layout-0" id="c47693"><div class="row"><div class=" d-block col-12 d-sm-block col-sm-12 d-md-block col-md-12 d-lg-block col-lg-12 d-xl-block col-xl-12 mmBorder colindex-0" id="div"><div class="frame frame-type-menu_pages frame-layout-0" id="c5627"><ul class="nav flex-column"><li class="nav-item"><a class="nav-link" href="/unternehmen/karriere/" target="_self" title="Offene Stellen"><span>Offene Stellen</span></a></li><li class="nav-item"><a class="nav-link" href="/unternehmen/kontakt/" target="_self" title="Kontakt"><span>Kontakt</span></a></li></ul></div></div></div></div></div></div></div></div></div><div class="collapse fade-transition mega-menu-gradient" id="support"><div class="container" style="padding-left:;"><a id="c-support"></a><div class="frame frame-type-wst3bootstrap_fluidrow frame-layout-0" id="c4406"><div class="row"><div class=" d-block col-12 d-sm-block col-sm-12 d-md-block col-md-12 d-lg-block col-lg-3 d-xl-block col-xl-3 colindex-0" id="div"><div class="frame frame-type-text frame-layout-0 frame-padding-top-large frame-padding-bottom-medium" id="c44842"><p class="mb-0"><span class="white"><strong>Produktberatung</strong></span></p></div><div class="frame frame-type-wst3bootstrap_fluidrow frame-layout-0" id="c47694"><div class="row"><div class=" d-block col-12 d-sm-block col-sm-12 d-md-block col-md-12 d-lg-block col-lg-12 d-xl-block col-xl-12 mmBorder colindex-0" id="div"><div class="frame frame-type-menu_pages frame-layout-0" id="c44854"><ul class="nav flex-column"><li class="nav-item"><a class="nav-link" href="/expertengespraech/" target="_self" title="Expertengespräch"><span>Expertengespräch</span></a></li><li class="nav-item"><a class="nav-link" href="/online-showroom/" target="_self" title="Online-Showroom"><span>Online-Showroom</span></a></li></ul></div></div></div></div></div><div class=" d-block col-12 d-sm-block col-sm-12 d-md-block col-md-12 d-lg-block col-lg-3 d-xl-block col-xl-3 colindex-1" id="div"><div class="frame frame-type-text frame-layout-0 frame-padding-top-large frame-padding-bottom-medium" id="c44844"><p class="mb-0"><span class="white"><strong>Development Support</strong></span></p></div><div class="frame frame-type-wst3bootstrap_fluidrow frame-layout-0" id="c47695"><div class="row"><div class=" d-block col-12 d-sm-block col-sm-12 d-md-block col-md-12 d-lg-block col-lg-12 d-xl-block col-xl-12 mmBorder colindex-0" id="div"><div class="frame frame-type-menu_pages frame-layout-0" id="c44852"><ul class="nav flex-column"><li class="nav-item"><a class="nav-link" href="/support/help-desk/" target="_self" title="Help Desk"><span>Help Desk</span></a></li><li class="nav-item"><a class="nav-link" href="/leistungen/fae-service/" target="_self" title="FAE-Service"><span>FAE-Service</span></a></li><li class="nav-item"><a class="nav-link" href="/support/support-pakete/" target="_self" title="Support-Pakete"><span>Support-Pakete</span></a></li><li class="nav-item"><a class="nav-link" href="/produkte/software-releases/" target="_self" title="Software Releases"><span>Software Releases</span></a></li><li class="nav-item"><a class="nav-link" href="/support/downloads/" target="_self" title="Downloads"><span>Downloads</span></a></li></ul></div></div></div></div></div><div class=" d-block col-12 d-sm-block col-sm-12 d-md-block col-md-12 d-lg-block col-lg-3 d-xl-block col-xl-3 colindex-2" id="div"><div class="frame frame-type-text frame-layout-0 frame-padding-top-large frame-padding-bottom-medium" id="c44846"><p class="mb-0"><span class="white"><strong>Kundenservice</strong></span></p></div><div class="frame frame-type-wst3bootstrap_fluidrow frame-layout-0" id="c47696"><div class="row"><div class=" d-block col-12 d-sm-block col-sm-12 d-md-block col-md-12 d-lg-block col-lg-12 d-xl-block col-xl-12 mmBorder colindex-0" id="div"><div class="frame frame-type-menu_pages frame-layout-0" id="c44850"><ul class="nav flex-column"><li class="nav-item"><a class="nav-link" href="/unternehmen/kontakt/kontakt-formular/" target="_self" title="Kontaktformular"><span>Kontaktformular</span></a></li><li class="nav-item"><a class="nav-link" href="https://www.phytec.de/fileadmin/phytec_base/pdfs/PHYTEC_ISO_9001_2015_de_en.pdf" target="_self" title="ISO Zertifikat"><span>ISO Zertifikat</span></a></li><li class="nav-item"><a class="nav-link" href="/support/vm-readme/" target="_self" title="VM Readme"><span>VM Readme</span></a></li></ul></div></div></div></div></div><div class=" d-block col-12 d-sm-block col-sm-12 d-md-block col-md-12 d-lg-block col-lg-3 d-xl-block col-xl-3 colindex-3" id="div"><div class="frame frame-type-text frame-layout-0 frame-padding-top-large frame-padding-bottom-medium" id="c44848"><p class="mb-0"><span class="white"><strong>Rücksendungen</strong></span></p></div><div class="frame frame-type-wst3bootstrap_fluidrow frame-layout-0" id="c47697"><div class="row"><div class=" d-block col-12 d-sm-block col-sm-12 d-md-block col-md-12 d-lg-block col-lg-12 d-xl-block col-xl-12 mmBorder colindex-0" id="div"><div class="frame frame-type-menu_pages frame-layout-0" id="c4408"><ul class="nav flex-column"><li class="nav-item"><a class="nav-link" href="https://www.phytec.de/rma/index.php?r=rmaschein/pdf&amp;lang=de" target="_blank" title="Retourenformular"><span>Retourenformular</span></a></li><li class="nav-item"><a class="nav-link" href="/unternehmen/kontakt/" target="_self" title="Kontakt"><span>Kontakt</span></a></li></ul></div></div></div></div></div></div></div></div></div><div class="collapse fade-transition mega-menu-gradient" id="karriere"><div class="container" style="padding-left:;"></div></div></div></div><div class="cart d-print-none navbar-light float-right top-shopbox-margin"><a href="https://phytec.foxycart.com/cart?cart=view&template_set=GERMAN" id="cart" title="Warenkorb"><img src="/fileadmin/phytec_base/images/icons/Icons/icon-shop-w.svg" alt="Shopbox"><span data-fc-id="minicart-quantity" class="cart-items">0</span></a></div></div><div id="minicart" class="minicart d-print-none" style="color: black;"><div class="align-center"><strong><span data-fc-id="minicart-quantity">0</span> Artikel im Warenkorb</strong></div><div id="products" class="frame table-responsive"></div><div class="sum"><div class="text">Gesamtbetrag: <br/><span class="count">zzgl. Mwst.</span></div><div class="number"><span id="total"></span></div></div><div class="button-wrap"><a href="https://phytec.foxycart.com/cart?cart=view&template_set=GERMAN" class="btn btn-primary" title="Zum Warenkorb">Zum Warenkorb</a></div></div></div></div></div></div></div><script> document.addEventListener('DOMContentLoaded', function() { $(document).on("scroll", function(){ var pixels = $(document).scrollTop(); var pageHeight = $(document).height() - $(window).height(); var progress = 100 * pixels / pageHeight; $("div.progress").css("width", progress + "%"); }) }); </script></header><main class="main-content container-fluid p-0" id="content"><div class="mt-4"><!--TYPO3SEARCH_begin--><section class="frame frame-type-wst3bootstrap_container frame-layout-0 content-section" id="c47541"><div class=""><div class="container"><div class=""><div class="frame frame-type-phytecbasetemplate_manuals frame-layout-0 frame-padding-top-large frame-padding-bottom-large box-white" id="c15654"><script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script><h1 id="confluence-title" class="notranslate">L-876e.A4 phyCORE-STM32MP15x BSP Manual</h1><h2 class="notranslate">Table of Contents</h2><div id="confluence-toc" class="js-toc notranslate"></div><div id="confluence-content" class="js-content notranslate"><div id="main-content" class="wiki-content"><div class="wiki-content"><div class="plugin-tabmeta-details conf-macro output-block" data-hasbody="true" data-macro-name="details"><div class="frame table-responsive table-sm table-hover mb-5" style="max-height: 100% !Important;"><table class="confluenceTable ce-table" style=""><colgroup><col style="width: 24.6127%;"/><col style="width: 75.3873%;"/></colgroup><tbody><tr><th colspan="2" class="" style="background-color: #F4F5F7 !Important;"><big><span class="inline-comment-marker" data-ref="b5349fe9-455c-473e-b4bf-0285b14fffca">L-876e.A4 phyCORE-STM32MP15x BSP Manual</span></big></th></tr><tr><th class="" style="background-color: #F4F5F7 !Important;">Document Title</th><td class="confluenceTd">L-876e.A4 phyCORE-STM32MP15x BSP Manual</td></tr><tr><th class="" style="background-color: #F4F5F7 !Important;">Document Type</th><td class="confluenceTd"><span class="inline-comment-marker" data-ref="76b3881c-6f2a-4eb5-b96b-11dd3db486c9">BSP Manual</span></td></tr><tr><th class="" style="background-color: #F4F5F7 !Important;">Article Number</th><td class="confluenceTd">L-876e.A4</td></tr><tr><th class="" style="background-color: #F4F5F7 !Important;">Release Date</th><td class="confluenceTd">20.07.2022</td></tr><tr><th class="" style="background-color: #F4F5F7 !Important;">Is Branch of</th><td class="confluenceTd">L-876e.Ax phyCORE-STM32MP15x BSP Manual Head</td></tr></tbody></table></div></div><p class="auto-cursor-target"><div class="toc-macro client-side-toc-macro conf-macro output-block" data-numberedoutline="true" data-cssliststyle="none" data-headerelements="H1,H2,H3,H4,H5,H6,H7" data-hasbody="false" data-macro-name="toc"></div></p><div class="frame table-responsive table-sm table-hover mb-5" style="max-height: 100% !Important;"><table class="confluenceTable ce-table" style=""><colgroup><col /><col /><col /><col /></colgroup><tbody><tr><th class="" style="background-color: #F4F5F7 !Important;">Compatible BSP'S</th><th class="" style="background-color: #F4F5F7 !Important;">BSP Release Type</th><th class="" style="background-color: #F4F5F7 !Important;">BSP Release Date</th><th class="" style="background-color: #F4F5F7 !Important;">BSP Status</th></tr><tr><td class="confluenceTd"><span style="color: rgb(0,0,0);"><span class="inline-comment-marker" data-ref="b8946b84-805a-4a8d-8137-192b25b3ac05">PD22.1.0</span></span></td><td class="confluenceTd"><span style="color: rgb(0,0,0);">Major Release</span></td><td class="confluenceTd"><span style="color: rgb(0,0,0);">28.06.2022</span></td><td class="confluenceTd"><span style="color: rgb(0,0,0);">Released</span></td></tr></tbody></table></div><h1 class="auto-cursor-target" id="L876e-A4phyCORESTM32MP15xBSPManual-YoctoIntroduction"><span style="color: rgb(0,51,102);">Yocto Introduction</span></h1><p><span style="color: rgb(0,0,0);">Our STM32MP15x BSP is based on <em>OpenSTLinux </em>Distribution: <a href="https://wiki.st.com/stm32mpu/wiki/OpenSTLinux_distribution" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/OpenSTLinux_distribution</a></span></p><ul><li><span style="color: rgb(0,0,0);">To adapt the&#xa0;OpenSTLinux Distribution layer (<em>"meta-st-openstlinux"</em>) to our board, we use our own Yocto layer, "<em><strong>meta-st-openstlinux-phytec</strong>".&#xa0; </em>This layer extends the functionality of the <em>meta-st-openstlinux</em> distribution layer to enable features provided by our boards. With this layer, we also provide custom distros and images based on the one from OpenSTlinux.<em><br /></em></span></li><li><span style="color: rgb(0,0,0);">To adapt the STMicroelectronics BSP layer (<em>"meta-st-stm32mp") </em>to our board, we use our own Yocto layer, <em>"<strong>meta-phytec/dynamic-layer/stm-st-stm32mp</strong>". </em>This layer adapts the bootloaders (Trusted firmware + u-boot) and the Linux kernel to our Board.<em><br /></em></span></li></ul><p><span style="color: rgb(0,0,0);">You can find those layers in our git server below: </span></p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">https://git.phytec.de/meta-st-openstlinux-phytec/
https://git.phytec.de/meta-phytec/tree/dynamic-layers/stm-st-stm32mp</pre></div></div><div class="alert alert-warning" data-hasbody="true" data-macro-name="note"><p class="title" style="margin-left: 23px;">Note</p><i class="fa fa-exclamation-triangle" style="float:left; margin-right: 10px;"></i><div class="confluence-information-macro-body">The meta-yogurt layer (PHYTEC custom distro layer) is not used with the OpenSTLinux BSP.</div></div><h1 id="L876e-A4phyCORESTM32MP15xBSPManual-PHYTECDocumentation">PHYTEC Documentation</h1><p>PHYTEC will provide a variety of hardware and software documentation for all of our products. This includes any or all of the following:</p><ul><li><strong>Quickstart Guide</strong>: A short guide on how to set up and boot a phyCORE board along with brief information on building a BSP, the device tree, and accessing peripherals.</li><li><strong>Hardware Manual</strong>:&#xa0; A detailed description of the System on Module and accompanying carrier board.&#xa0;</li><li><span style="color: rgb(0,51,102);"><strong>Yocto Guide</strong>:&#xa0; A comprehensive guide for the Yocto version the phyCORE uses. This guide contains an overview of Yocto; introducing, installing, and customizing the PHYTEC BSP; how to work with programs like Poky and Bitbake; and much more.</span></li><li><span style="color: rgb(0,51,102);"><strong>BSP Manual</strong>:&#xa0; A manual specific to the BSP version of the phyCORE. Information such as how to build the BSP, booting, updating software, device tree, and accessing peripherals can be found here.</span></li><li><span style="color: rgb(0,51,102);"><strong>Development Environment Guide</strong>:&#xa0; This guide shows how to work with the Virtual Machine (VM) Host PHYTEC has developed and prepared to run various Development Environments. There are detailed step-by-step instructions for Eclipse and Qt Creator, which are included in the VM. There are instructions for running demo projects for these programs on a phyCORE product as well. Information on how to build a Linux host PC yourself is also a part of this guide.</span></li><li><span style="color: rgb(0,51,102);"><strong>Pin Muxing Table</strong>:&#xa0; phyCORE SOMs have an accompanying pin table (in Excel format). This table will show the complete default signal path, from processor to carrier board. The default device tree muxing option will also be included. This gives a developer all the information needed in one location to make muxing changes and design options when developing a specialized carrier board or adapting a PHYTEC phyCORE SOM to an application.&#xa0;</span></li></ul><p>On top of these standard manuals and guides, PHYTEC will also provide Product Change Notifications, Application Notes, and Technical Notes. These will be done on a case-by-case basis. Most of the documentation can be found on the applicable download page of our products.</p><div class="alert alert-danger" data-hasbody="true" data-macro-name="warning"><p class="title" style="margin-left: 23px;">Warning</p><i class="fa fa-times-circle" style="float:left; margin-right: 10px;"></i><div class="confluence-information-macro-body"><p>Be aware that not all of the above documentation will be available for the phyBOARD-Sargas. To find all PHYTEC documentation, go to <a href="https://www.phytec.de/produkte/system-on-modules/phycore-stm32mp15x/" class="external-link" rel="nofollow">https://www.phytec.de/produkte/system-on-modules/phycore-stm32mp15x/</a> or <a href="https://www.phytec.eu/en/produkte/system-on-modules/phycore-stm32mp15x" class="external-link" rel="nofollow">https://www.phytec.eu/en/produkte/system-on-modules/phycore-stm32mp15x</a></p></div></div><h1 id="L876e-A4phyCORESTM32MP15xBSPManual-BSPIntroduction"><span style="color: rgb(0,51,102);">BSP Introduction</span></h1><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-SupportedHardware"><span style="color: rgb(0,51,102);">Supported Hardware</span></h2><p><span style="color: rgb(0,51,102);">This BSP supports the phyCORE-STM32MP15x SOM with phyBOARD-Sargas SBC. </span><span style="color: rgb(0,51,102);">Visit our web page at:</span><br /><span style="color: rgb(0,51,102);"><a href="https://www.phytec.de/produkte/system-on-modules/phycore-stm32mp15x/#downloads/" class="external-link" rel="nofollow">https://www.phytec.de/produkte/system-on-modules/phycore-stm32mp15x/#downloads/</a><br />or<br /><a href="https://www.phytec.eu/en/produkte/system-on-modules/phycore-stm32mp15x/?lang=en/#downloads/" class="external-link" rel="nofollow">https://www.phytec.eu/en/produkte/system-on-modules/phycore-stm32mp15x/?lang=en/#downloads/</a></span></p><p><span style="color: rgb(0,51,102);">Click the corresponding BSP release and look for the article number of your module in the column "Article Number". Finally, look for the correct machine name in the corresponding cell under "Machine Name".</span></p><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-SoftwareandSoftwareRequirements"><span style="color: rgb(0,51,102);">Software and Software Requirements</span></h2><ul><li><span style="color: rgb(0,0,0);">A modern&#xa0;<em>Linux</em>&#xa0;operating host system either natively or via a Virtual Machine.</span></li><li><span style="color: rgb(0,0,0);"><strong>Ubuntu 20.04 LTS </strong>or<strong> 18.04 LTS </strong>(64-bit).</span></li><li><span style="color: rgb(0,0,0);">VMWare Player and VirtualBox are possible solutions if you want to use a Virtual Machine. </span></li><li><span style="color: rgb(0,0,0);">Virtual Machine (VM) configured for this BSP build environment can be downloaded at </span><a href="https://www.phytec.de/produkt/system-on-modules/phycore-stm32mp15x-download" class="external-link" rel="nofollow">https://www.phytec.de/produkt/system-on-modules/phycore-stm32mp15x-download</a> under the heading "VM"</li><li><span style="color: rgb(0,0,0);">Root access to your&#xa0;<em>Linux</em>&#xa0;host PC. Some commands in this guide will not work if you do not have <em>sudo </em>access (e.g. package installation, formatting an SD card).</span></li><li><span style="color: rgb(0,0,0);">At least 8GB of RAM (16GB or more is recommended).</span></li><li><span style="color: rgb(0,0,0);">At least 100 GB of free space on the build partition of the host PC.</span></li><li><span style="color: rgb(0,0,0);">An SD card reader, operational under <em>Linux</em>.</span></li><li><span style="color: rgb(0,0,0);">An active internet connection.</span></li></ul><p>For more details concerning Linux PC configuration, please refer to <a rel="nofollow" class="external-link" href="https://wiki.st.com/stm32mpu/wiki/PC_prerequisites">https://wiki.st.com/stm32mpu/wiki/PC_prerequisites</a></p><h1 id="L876e-A4phyCORESTM32MP15xBSPManual-GettingStartedwiththeIncludedSDCard"><span style="color: rgb(0,0,0);">Getting Started with the Included SD Card</span></h1><p><span style="color: rgb(0,0,0);">This section is designed to get the board up and running with the SD card included in the kit, which has been prepared with pre-built images.</span></p><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-BootingfromtheSDCard"><span style="color: rgb(0,0,0);">Booting from the SD Card</span></h2><p><span style="color: rgb(0,0,0);">This section describes how to boot the phyBOARD-Sargas with the pre-built images on the included SD card.</span></p><ul><li><span style="color: rgb(0,0,0);">Insert the micro SD card into the SD card slot of the board.</span></li><li><span style="color: rgb(0,0,0);">Check that the <strong>S7 DIP switch</strong> is in the default position (boot from SD):</span></li></ul><p style="margin-left: 40.0px;"><span style="color: rgb(0,0,0);"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><a href= "https://wiki.phytec.com/download/thumbnails/156533019/SD%20Card.jpg?version=1&amp;modificationDate=1588743668000&amp;api=v2" class="lightbox"><img class="confluence-embedded-image" draggable="false" height="150" src="https://wiki.phytec.com/download/thumbnails/156533019/SD%20Card.jpg?version=1&amp;modificationDate=1588743668000&amp;api=v2" data-image-src="https://wiki.phytec.com/download/thumbnails/156533019/SD%20Card.jpg?version=1&amp;modificationDate=1588743668000&amp;api=v2" style="max-width: 100%;"/></a></span></span></p><ul><li><span style="color: rgb(0,0,0);">Plug the USB cable into the USB debug on the board (<strong>X13</strong>) and your host PC. You should see two new devices appear: <em>/dev/ttyUSB0</em> and <em>/devttyUSB1</em>. A Linux terminal will be accessible on&#xa0;<em>/dev/ttyUSB0</em>.&#xa0;</span></li><li><span style="color: rgb(0,0,0);">Start your favorite terminal software (e.g.&#xa0;<em>Minicom</em>&#xa0;or&#xa0;<em>Tera Term</em>) on your host PC and configure it for 115200 baud, 8 data bits, no parity, and 1 stop bit (8n1) with no handshake.</span></li><li><span style="color: rgb(0,0,0);">Example to launch <em>minicom</em> on /dev/ttyUSB0:</span></li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~$sudo minicom -D /dev/ttyUSB0 </pre></div></div><ul><li><span style="color: rgb(0,0,0);">Connect the power supply to the power connector.</span></li></ul><p><span style="color: rgb(0,0,0);">The RGB LED (D11) will begin blinking BLUE as the board begins booting into Linux. The console output can be viewed in your terminal window. If everything was done correctly, the login prompt will be shown at the end of the booting process:</span></p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">ST OpenSTLinux - Weston - (A Yocto Project Based Distro) 3.1-snapshot phycore-stm32mp1-3 ttySTM0
phycore-stm32mp1-3 login: root (automatic login)
root@phycore-stm32mp1-3:~#</pre></div></div><p class="auto-cursor-target"><span style="color: rgb(0,0,0);">Log in is done automatically as <em>root</em> (no password is required).</span></p><h1 id="L876e-A4phyCORESTM32MP15xBSPManual-BuildingtheBSPBuildingtheBSP"><span style="color: rgb(0,0,0);">Building the BSP</span><span style="color: rgb(0,0,0);"><span class="confluence-anchor-link conf-macro output-inline" id="L876e.A4phyCORESTM32MP15xBSPManual-BuildingtheBSP" data-hasbody="false" data-macro-name="anchor"></span></span></h1><p><span style="color: rgb(0,0,0);">This section will guide you through the general build process of the STM32MP15x BSP using our phyLinux script (based on <em>repo</em> tool) and the Yocto environment.</span></p><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-BasicSet-Up"><span style="color: rgb(0,0,0);">Basic Set-Up</span></h2><p><span style="color: rgb(0,0,0);">There are a few important steps that have to be done before the main build process.</span></p><ul><li><span style="color: rgb(0,0,0);">Setting up the host:&#xa0; refer to <em><strong>OpenSTLinux</strong></em> documentation: <a href="https://wiki.st.com/stm32mpu/wiki/PC_prerequisites" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/PC_prerequisites</a></span></li></ul><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-FindingtheRightSoftwarePlatform"><span style="color: rgb(0,0,0);">Finding the Right Software Platform</span></h2><p><span style="color: rgb(0,0,0);">The STM32MP15x BSP is a unified BSP, which means in the future it supports a set of different PHYTEC carrier boards (CB) with different Systems on Module (SOMs). These hardware sets are called MACHINE.</span></p><p>If you need to figure out the corresponding machine name of your board, go to <a href="https://www.phytec.de/produkte/system-on-modules/phycore-stm32mp15x/#downloads/" class="external-link" rel="nofollow">https://www.phytec.de/produkte/system-on-modules/phycore-stm32mp15x/#downloads/</a> (under the heading "Software / Yocto + Linux BSP-Releases") and click on the corresponding BSP release.</p><p><span>For our examples in this manual, we will use: &lt;MACHINE&gt;= <em>phycore-stm32mp-3</em></span></p><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-ChooseaBSPOpenSTLinuxDistributionChooseaBSPOpenSTLinuxDistribution"><span style="color: rgb(0,0,0);">Choose a BSP OpenSTLinux Distribution<span class="confluence-anchor-link conf-macro output-inline" id="L876e.A4phyCORESTM32MP15xBSPManual-ChooseaBSPOpenSTLinuxDistribution" data-hasbody="false" data-macro-name="anchor"></span></span></h2><p><span style="color: rgb(0,0,0);">The phyCORE-STM32MP15x BSP is based on OpenSTLinux which offers different distributions (DISTRO). When building the BSP, you have to choose one of them. The choice will depend on the features you want to get on your final application.</span></p><p><span style="color: rgb(0,0,0);">The available DISTROs are:</span></p><div class="frame table-responsive table-sm table-hover mb-5" style="max-height: 100% !Important;"><table class="confluenceTable ce-table" style=""><colgroup><col style="width: 17.734%;"/><col style="width: 54.3042%;"/></colgroup><tbody><tr><td class="highlight-grey confluenceTd" data-highlight-colour="grey"><strong>DISTRO</strong></td><td class="highlight-grey confluenceTd" data-highlight-colour="grey"><strong>Description </strong></td></tr><tr><td class="confluenceTd"><em>openstlinux-eglfs</em></td><td class="confluenceTd"><p>OpenSTLinux featuring EGLFS (no X11, no Wayland).</p><p>EGLFS is a platform plugin for running Qt5 applications on top of EGL and OpenGL ES 2.0, without an actual windowing system like X11 or Wayland.</p></td></tr><tr><td class="confluenceTd"><em>openstlinux-weston</em></td><td class="confluenceTd">OpenSTLinux featuring Weston/Wayland d<span style="color: rgb(0,0,0);">isplay server protocol.</span></td></tr><tr><td class="confluenceTd"><em>openstlinux-tiny</em></td><td class="confluenceTd"><p>Distribution customized by PHYTEC for SOM equipped with small Flash memory size (128MB). It is based on OpenSTLinux distro with the following differences :</p><ul><li>no X11, no Wayland, <span style="color: rgb(0,0,0);">no <em>eglfs</em></span></li><li>no <em>uninative</em> support</li><li><span style="color: rgb(34,34,34);">SysVinit</span>&#xa0;instead of systemd</li><li>following features removed: alsa, wifi, nfs, bluetooth, bluez5</li></ul><p>NOTE: currently, only BSP images proposed as an example only can be built with this DISTRO (no ST/PHYTEC support on this)</p></td></tr></tbody></table></div><p><span>For more details on the OpenSTLinux distributions, please refer to <a href="https://wiki.st.com/stm32mpu/wiki/OpenSTLinux_distribution#Distros" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/OpenSTLinux_distribution#Distros</a></span></p><p><span>For our examples in this document, we will use: &lt;DISTRO&gt;= <em>openstlinux-weston</em></span></p><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-ChooseaBSPImagetobeBuildandDeployed"><span style="color: rgb(0,0,0);">Choose a BSP Image to be Build and Deployed</span></h2><p><span style="color: rgb(0,0,0);">Once you have chosen a DISTRO, you have to choose a BSP Image to build and deploy on target. The available images depend on the DISTRO that has been chosen before.</span></p><div class="frame table-responsive table-sm table-hover mb-5" style="max-height: 100% !Important;"><table class="confluenceTable ce-table" style=""><colgroup><col style="width: 20.3848%;"/><col style="width: 52.0694%;"/><col style="width: 11.2429%;"/><col style="width: 16.3029%;"/></colgroup><tbody><tr><th style="background-color: #F4F5F7 !Important;" class="">BSP Image</th><th style="background-color: #F4F5F7 !Important;" class="">Description</th><th style="background-color: #F4F5F7 !Important;" class="">Required DISTRO&#xa0;</th><th style="background-color: #F4F5F7 !Important;" class="">MACHINE minimal FLASH memory size</th></tr><tr><td style="text-align: left;" class="confluenceTd"><p><em>st-image-weston</em></p></td><td style="text-align: left;" class="confluenceTd"><p>OpenSTLinux Weston image with basic Wayland support - OpenSTLinux official image</p><p><span style="color: rgb(0,0,0);">It comes with a graphical application demo that will show up on a Screen&#xa0; (if one display is connected to the carrier board).&#xa0;</span><strong>This is the image that is delivered by default with our standard evaluation kit.</strong></p><p>The Graphical demo is called "GTK demo launcher" and allows you to add additional custom applications that can be launched from this interface. More information on the available demo and how to add your own application can be found at this link:</p><p><strong><a href="https://wiki.st.com/stm32mpu/wiki/GTK_demo_launcher" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/GTK_demo_launcher</a></strong></p></td><td style="text-align: left;" class="confluenceTd"><em>openstlinux-weston</em></td><td style="text-align: left;" class="confluenceTd"><p>&gt;= 1GB</p></td></tr><tr><td style="text-align: left;" class="confluenceTd"><em>st-image-core</em></td><td style="text-align: left;" class="confluenceTd"><p>OpenSTLinux core image (without Weston or any GUI framework) - OpenSTLinux supported image</p></td><td style="text-align: left;" class="confluenceTd"><p>any&#xa0;<em>openstlinux </em>DISTRO</p><p><span style="color: rgb(0,0,0);">(except <em>openstlinux-tiny</em>)</span></p></td><td style="text-align: left;" class="confluenceTd"><p>&gt;= 512MB</p></td></tr><tr><td style="text-align: left;" class="confluenceTd"><em>st-example-image-qt </em>(sample image)<em><br /></em></td><td style="text-align: left;" class="confluenceTd"><p>OpenSTLinux example of image based on QT framework over EGLFS - proposed as an example only</p></td><td style="text-align: left;" class="confluenceTd"><em>openstlinux-eglfs</em></td><td style="text-align: left;" class="confluenceTd"><p>&gt;= 1GB</p></td></tr><tr><td colspan="1" class="confluenceTd"><em>st-example-image-qt</em>wayland<em> (sample image)</em></td><td colspan="1" class="confluenceTd">OpenSTLinux example of image based on QT framework over&#xa0; Weston/Wayland - proposed as an example only</td><td colspan="1" class="confluenceTd"><em>openstlinux-weston</em></td><td colspan="1" class="confluenceTd">&gt;= 1GB</td></tr><tr><td style="text-align: left;" class="confluenceTd"><em>st-image-core-minimal</em></td><td style="text-align: left;" class="confluenceTd"><p>PHYTEC OpenSTLinux core minimal image (PHYTEC custom image)&#xa0; - proposed as an example only</p><p>It is based on&#xa0;st-image-core, but without :</p><ul><li>framework for display and multimedia</li><li>framework tools base components (core, kernel, network, audio, UI, python2, python3)</li><li>package management system</li></ul></td><td style="text-align: left;" class="confluenceTd"><em>openstlinux-tiny</em></td><td style="text-align: left;" class="confluenceTd">&gt;= 128MB</td></tr><tr><td style="text-align: left;" class="confluenceTd"><em>st-example-image-qt-minimal </em> (sample image)<em><br /></em></td><td style="text-align: left;" class="confluenceTd"><p>PHYTEC OpenSTLinux example of image based on Qt minimal framework (PHYTEC custom image)&#xa0; - proposed as an example only<br />It is based on <em>st-example-image-qt</em> with fewer features and QT packages to decrease the image size.</p></td><td style="text-align: left;" class="confluenceTd"><em>openstlinux-eglfs</em></td><td style="text-align: left;" class="confluenceTd">&gt;= 512MB</td></tr></tbody></table></div><p>For more information regarding OpenSTLinux images and how to create your own image, please refer to:&#xa0;<span style="color: rgb(0,0,0);"><a href="https://wiki.st.com/stm32mpu/wiki/How_to_create_your_own_image" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/How_to_create_your_own_image</a></span></p><p><span style="color: rgb(255,0,0);"><span style="color: rgb(0,51,102);">For our examples in this document we will use: &lt;BSP_IMAGE&gt;=<span style="color: rgb(0,0,0);"><em>st-image-weston</em></span></span></span></p><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-GetandInitializetheBSPEnvironmentGetandInitializetheBSPEnvironment"><span style="color: rgb(0,0,0);">Get and Initialize the BSP Environment<span class="confluence-anchor-link conf-macro output-inline" id="L876e.A4phyCORESTM32MP15xBSPManual-GetandInitializetheBSPEnvironment" data-hasbody="false" data-macro-name="anchor"></span></span></h2><ul><li><span style="color: rgb(0,0,0);">Create a fresh project directory:</span></li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~$ mkdir ~/PHYTEC_STM32MP1_BSP</pre></div></div><ul><li>Get and Initialize the BSP Yocto environment with our phyLinux script:</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~$ cd ~/PHYTEC_STM32MP1_BSP
host:~/PHYTEC_STM32MP1_BSP$ wget https://download.phytec.de/Software/Linux/Yocto/Tools/phyLinux
host:~/PHYTEC_STM32MP1_BSP$ chmod +x phyLinux
host:~/PHYTEC_STM32MP1_BSP$ ./phyLinux init</pre></div></div><ul><li><span style="color: rgb(0,0,0);"><span style="color: rgb(37,37,37);">On the first initialization, the phyLinux script will ask you to install the<span>&#xa0;</span></span><em>Repo</em><span style="color: rgb(37,37,37);"><span>&#xa0;</span>tool in your<span>&#xa0;</span></span><em>/usr/local/bin</em><span style="color: rgb(37,37,37);"><span>&#xa0;</span>directory.</span></span></li><li><span style="color: rgb(0,0,0);"><span style="color: rgb(37,37,37);">During the execution of the<span>&#xa0;</span></span><em>init</em><span style="color: rgb(37,37,37);"><span>&#xa0;</span>command, you first need to choose the&#xa0; processor platform (SoC):</span></span></li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">***************************************************
* Please choose one of the available SoC Platforms:
*
*   1: am335x
*   2: imx6
*   3: imx6ul
*   4: imx8
*   5: imx8m
*   6: imx8mm
*   7: nightly
*   8: rk3288
*   9: stm32mp1
*   10: topic
*
$ </pre></div></div><ul><li class="auto-cursor-target">Enter the choice number corresponding to stm32mp1 (9).</li><li class="auto-cursor-target"><span style="color: rgb(0,0,0);"><span style="color: rgb(37,37,37);">Then choose the PHYTEC's BSP release number:</span></span></li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">***************************************************
* Please choose one of the available Releases:
*
*   1: PD-BSP-Yocto-OpenSTLinux-STM32MP1-ALPHA1
*   2: PD-BSP-Yocto-OpenSTLinux-STM32MP1-ALPHA2
*   3: PD-BSP-Yocto-OpenSTLinux-STM32MP1-PD20.1.0
*   4: PD-BSP-Yocto-OpenSTLinux-STM32MP1-PD21.1.0
*   5: PD-BSP-Yocto-OpenSTLinux-STM32MP1-PD21.1.1
*   6: PD-BSP-Yocto-OpenSTLinux-STM32MP1-PD21.2.0
*   7: PD-BSP-Yocto-OpenSTLinux-STM32MP1-PD21.2.1
*
$ </pre></div></div><ul><li>The <em>repo </em>initialization will start</li></ul><div class="alert alert-success" data-hasbody="true" data-macro-name="tip"><p class="title" style="margin-left: 23px;">Tip</p><i class="fa fa-check-circle" style="float:left; margin-right: 10px;"></i><div class="confluence-information-macro-body"><p>"<strong>ERROR 404</strong>" may appear during "<em>repo init</em>" command without any impact on the process.</p></div></div><ul><li><span style="color: rgb(0,0,0);">Once the repo initialization is finished, a popup will appear to will ask you to choose the DISTRO:</span></li></ul><p><span style="color: rgb(0,0,0);"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><a href= "https://wiki.phytec.com/download/attachments/519176224/image2021-2-25_9-57-32.png?version=1&amp;modificationDate=1658300847000&amp;api=v2" class="lightbox"><img class="confluence-embedded-image" draggable="false" height="250" src="https://wiki.phytec.com/download/attachments/519176224/image2021-2-25_9-57-32.png?version=1&amp;modificationDate=1658300847000&amp;api=v2" data-image-src="https://wiki.phytec.com/download/attachments/519176224/image2021-2-25_9-57-32.png?version=1&amp;modificationDate=1658300847000&amp;api=v2" data-linked-resource-id="519176231" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-2-25_9-57-32.png" data-base-url="https://wiki.phytec.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="519176224" data-linked-resource-container-version="3" alt="" style="max-width: 100%;"/></a></span></span></p><p style="margin-left: 40.0px;"><span style="color: rgb(0,0,0);">Press 'space' to select and press 'enter' to validate.</span></p><ul><li><span style="color: rgb(0,0,0);">Once the DISTRO is chosen, another popup will appear and will ask you to choose the MACHINE among all available PHYTEC platforms:<br /></span></li></ul><p><span style="color: rgb(0,0,0);"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><a href= "https://wiki.phytec.com/download/attachments/519176224/image2021-2-25_11-23-45.png?version=1&amp;modificationDate=1658300847000&amp;api=v2" class="lightbox"><img class="confluence-embedded-image" draggable="false" height="250" src="https://wiki.phytec.com/download/attachments/519176224/image2021-2-25_11-23-45.png?version=1&amp;modificationDate=1658300847000&amp;api=v2" data-image-src="https://wiki.phytec.com/download/attachments/519176224/image2021-2-25_11-23-45.png?version=1&amp;modificationDate=1658300847000&amp;api=v2" data-linked-resource-id="519176228" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-2-25_11-23-45.png" data-base-url="https://wiki.phytec.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="519176224" data-linked-resource-container-version="3" alt="" style="max-width: 100%;"/></a></span></span></p><p style="margin-left: 40.0px;"><span style="color: rgb(0,0,0);">You must select one of the supported <strong>"phycore-stm32mp1-x"</strong> machines (<strong>PHYTEC phyCORE-STM32MP15x</strong>).<br /></span></p><div class="alert alert-warning" data-hasbody="true" data-macro-name="note"><p class="title" style="margin-left: 23px;">Note</p><i class="fa fa-exclamation-triangle" style="float:left; margin-right: 10px;"></i><div class="confluence-information-macro-body"><p><span style="color: rgb(0,0,0);">A new machine "phycore-stm32mp1-mx" was introduced with PD21.2.1 release. This doesn't correspond to any PHYTEC Hardware. It is a machine configuration template for using STM32CubeMX generated device tree. It works with the ST Yocto layer "meta-st-stm32mp-addons". Refer to section <a href="#L876e.A4phyCORESTM32MP15xBSPManual-BuildyoctomachinefromgeneratedDeviceTree">Build yocto machine from generated Device Tree</a> to see how to use it.<br /></span></p></div></div><ul><li><span style="color: rgb(0,0,0);">The STM32MP15x BSP depends on packages and firmware which are covered by a software license agreement (SLA). You will be asked to read and to accept this EULA:</span></li></ul><p><span style="color: rgb(0,0,0);"><span class="confluence-embedded-file-wrapper"><a href= "https://wiki.phytec.com/download/attachments/519176224/image2020-9-9_15-38-7.png?version=1&amp;modificationDate=1658300847000&amp;api=v2" class="lightbox"><img class="confluence-embedded-image" draggable="false" src="https://wiki.phytec.com/download/attachments/519176224/image2020-9-9_15-38-7.png?version=1&amp;modificationDate=1658300847000&amp;api=v2" data-image-src="https://wiki.phytec.com/download/attachments/519176224/image2020-9-9_15-38-7.png?version=1&amp;modificationDate=1658300847000&amp;api=v2" data-linked-resource-id="519176246" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2020-9-9_15-38-7.png" data-base-url="https://wiki.phytec.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="519176224" data-linked-resource-container-version="3" alt="" style="max-width: 100%;"/></a></span></span></p><div class="alert alert-warning" data-hasbody="true" data-macro-name="note"><p class="title" style="margin-left: 23px;">Note</p><i class="fa fa-exclamation-triangle" style="float:left; margin-right: 10px;"></i><div class="confluence-information-macro-body"><p><span style="color: rgb(0,0,0);">It is mandatory to accept this EULA to be able to use the internal STM32MP15x GPU.</span></p></div></div><ul><li><span style="color: rgb(0,0,0);">After accepting the EULA, the Shell Environment will be setup. The following message should appear</span><span style="color: rgb(0,0,0);">:</span></li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">[HOST DISTRIB check]
Linux Distrib: Ubuntu
Linux Release: 18.04

Required packages for Linux Distrib:
build-essential chrpath cpio debianutils diffstat gawk gcc-multilib git iputils-ping libegl1-mesa libgmp-dev libmpc-dev libsdl1.2-dev libssl-dev pylint3 python3 python3-git python3-jinja2 python3-pexpect python3-pip socat texinfo unzip wget xterm xz-utils

Check OK: all required packages are installed on host.

[DISTRO configuration]
Selected DISTRO: openstlinux-weston

[MACHINE configuration]
Selected MACHINE: phycore-stm32mp1-3

[source layers/openembedded-core/oe-init-build-env][from nothing]

[EULA configuration]

[Configure *.conf files]
[INFO] No 'site.conf.sample' file available at ~/PHYTEC_STM32MP1_BSP/layers/meta-st/scripts. Create default one...

Shell environment terminated. To activate the build environment in the current shell use:

    $ source openstlinux-init-phytec.sh


host:~/PHYTEC_STM32MP1_BSP$
</pre></div></div><h2 class="auto-cursor-target" id="L876e-A4phyCORESTM32MP15xBSPManual-OpenSTLinuxEnvironmentSetupOpenEmbeddedEnvironmentSetup"><span style="color: rgb(0,0,0);">OpenSTLinux Environment Setup</span><span class="confluence-anchor-link conf-macro output-inline" id="L876e.A4phyCORESTM32MP15xBSPManual-OpenEmbeddedEnvironmentSetup" data-hasbody="false" data-macro-name="anchor"></span></h2><div class="alert alert-warning" data-hasbody="true" data-macro-name="note"><p class="title" style="margin-left: 23px;">Note</p><i class="fa fa-exclamation-triangle" style="float:left; margin-right: 10px;"></i><div class="confluence-information-macro-body"><p><span style="color: rgb(0,0,0);">The<em> OpenSTLinux</em> environment setup script is NOT sourced automatically when using the <strong>phyLinux</strong> tool.</span></p><p><span style="color: rgb(0,0,0);">This section describes the Build Environment Setup procedure that must be done after phyLinux execution and for each new terminal session.</span></p></div></div><ul><li><span style="color: rgb(0,0,0);">&#xa0;The build environment setup must be executed once per new terminal session, with the following command:</span></li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP$ source openstlinux-init-phytec.sh</pre></div></div><p class="auto-cursor-target"><span style="color: rgb(0,0,0);">A popup will appear to ask you to select one of the available Build directories:</span><span style="color: rgb(0,0,0);"><br /></span></p><p class="auto-cursor-target"><span style="color: rgb(0,0,0);"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><a href= "https://wiki.phytec.com/download/attachments/519176224/image2021-2-25_10-49-10.png?version=1&amp;modificationDate=1658300847000&amp;api=v2" class="lightbox"><img class="confluence-embedded-image" draggable="false" height="150" src="https://wiki.phytec.com/download/attachments/519176224/image2021-2-25_10-49-10.png?version=1&amp;modificationDate=1658300847000&amp;api=v2" data-image-src="https://wiki.phytec.com/download/attachments/519176224/image2021-2-25_10-49-10.png?version=1&amp;modificationDate=1658300847000&amp;api=v2" data-linked-resource-id="519176230" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-2-25_10-49-10.png" data-base-url="https://wiki.phytec.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="519176224" data-linked-resource-container-version="3" alt="" style="max-width: 100%;"/></a></span></span></p><p class="auto-cursor-target"><span style="color: rgb(0,0,0);">You can choose to use one of the existing build environments (previously created) or you can choose</span><span style="color: rgb(0,0,0);"> to create a new build environment by selecting "NEW" (in case you want to use a new MACHINE and/or DISTRO)</span></p><div class="alert alert-warning" data-hasbody="true" data-macro-name="note"><p class="title" style="margin-left: 23px;">Note</p><i class="fa fa-exclamation-triangle" style="float:left; margin-right: 10px;"></i><div class="confluence-information-macro-body"><p><span style="color: rgb(0,0,0);">It is also possible to specify "DISTRO=x" and "MACHINE=x" in the command. In this case, the popup for MACHINE and DISTRO selection will not appear.<br /></span></p><p><u><span style="color: rgb(0,0,0);">Example:</span></u></p><p><em><span style="color: rgb(0,0,0);">host:~/PHYTEC_STM32MP1_BSP$ DISTRO=openstlinux-weston MACHINE=phycore-stm32mp1-3 source openstlinux-init-phytec.sh</span></em></p></div></div><ul><li><span style="color: rgb(0,0,0);">After having selected the build environment, the OpenSTLinux Environment will be set up and you should now be in a sub-folder named '~/PHYTEC_STM32MP1_BSP/<strong><em>build-&lt;DISTRO&gt;-</em></strong></span><strong><em>&lt;MACHINE&gt;</em></strong>'<span style="color: rgb(0,0,0);">:</span></li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">[HOST DISTRIB check]
Linux Distrib: Ubuntu
Linux Release: 18.04

Required packages for Linux Distrib:
build-essential chrpath cpio debianutils diffstat gawk gcc-multilib git iputils-ping libegl1-mesa libgmp-dev libmpc-dev libsdl1.2-dev libssl-dev pylint3 python3 python3-git python3-jinja2 python3-pexpect python3-pip socat texinfo unzip wget xterm xz-utils

Check OK: all required packages are installed on host.

[BUILD_DIR configuration]
Selected BUILD_DIR: build-openstlinuxweston-phycore-stm32mp1-3

[source layers/openembedded-core/oe-init-build-env][with previous config]

===========================================================================
Configuration files have been created for the following configuration:

    DISTRO            :  openstlinux-weston
    DISTRO_CODENAME   :  dunfell
    MACHINE           :  phycore-stm32mp1-3
    BB_NUMBER_THREADS :  &lt;no-custom-config-set&gt;
    PARALLEL_MAKE     :  &lt;no-custom-config-set&gt;

    BUILDDIR          :  build-openstlinuxweston-phycore-stm32mp1-3
    DOWNLOAD_DIR      :  &lt;disable&gt;
    SSTATE_DIR        :  &lt;disable&gt;

    SOURCE_MIRROR_URL :  &lt;no-custom-config-set&gt;
    SSTATE_MIRRORS    :  &lt;disable&gt;

    WITH_EULA_ACCEPTED:  YES

===========================================================================

Available images for OpenSTLinux layers are:

  - Official OpenSTLinux images:
      st-image-weston       -   OpenSTLinux weston image with basic Wayland support (if enable in distro)

  - Other OpenSTLinux images:
      - Supported images:
          st-image-core         -   OpenSTLinux core image


You can now run 'bitbake &lt;image&gt;'

host:~/PHYTEC_STM32MP1_BSP/build-openstlinuxweston-phycore-stm32mp1-3$ </pre></div></div><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-BuildProcess"><span style="color: rgb(0,0,0);">Build Process</span></h2><p><span style="color: rgb(0,0,0);">Now that the build environment is ready, you can start the first build process, using the following command:</span></p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP/build-openstlinuxweston-phycore-stm32mp1-3$ bitbake &lt;BSP_IMAGE&gt;</pre></div></div><p><span style="color: rgb(0,0,0);"><em>Example to build the "st-image-weston":</em></span></p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP/build-openstlinuxweston-phycore-stm32mp1-3$ bitbake st-image-weston</pre></div></div><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-GeneratedBSPImageBinaries"><span style="color: rgb(0,0,0);">Generated BSP Image Binaries</span></h2><p><span style="color: rgb(0,0,0);">All images generated by&#xa0;<em>Bitbake</em>&#xa0;are deployed to<em>&#xa0;~/PHYTEC_STM32MP1_BSP/build-&lt;DISTRO&gt;-&lt;MACHINE&gt;/tmp-glibc/deploy/images/&lt;MACHINE&gt;</em>. </span><span style="color: rgb(0,0,0);">The following list shows the generated files used for flashing the <em>phycore-stm32mp1</em>:</span></p><div class="frame table-responsive table-sm table-hover mb-5" style="max-height: 100% !Important;"><table class="confluenceTable ce-table" style=""><colgroup><col style="width: 17.2798%;"/><col style="width: 40.202%;"/><col style="width: 42.5181%;"/></colgroup><tbody><tr><th class="" style="background-color: #F4F5F7 !Important;">Binary subfolder location</th><th class="" style="background-color: #F4F5F7 !Important;">Binary file name</th><th class="" style="background-color: #F4F5F7 !Important;">Description</th></tr><tr><td class="highlight-#f4f5f7 confluenceTd" style="text-align: center;" rowspan="6" data-highlight-colour="#f4f5f7"><span style="color: rgb(0,0,0);" title="">arm-trusted-firmware</span><br title=""/><span style="color: rgb(0,0,0);" title=""><br /></span><span style="color: rgb(0,0,0);" title=""><br /></span></td><td class="confluenceTd"><span style="color: rgb(0,0,0);">tf-a-&lt;DEVICE_TREE_NAME&gt;-usb.stm32</span></td><td class="confluenceTd"><p><span style="color: rgb(0,0,0);">TF-A binary for USB serial boot mode (STM32CubeProgrammer)</span></p></td></tr><tr><td class="confluenceTd"><span style="color: rgb(0,0,0);">tf-a-&lt;DEVICE_TREE_NAME&gt;-uart.stm32</span></td><td class="confluenceTd"><span style="color: rgb(0,0,0);">TF-A binary for UART serial boot mode (STM32CubeProgrammer)</span></td></tr><tr><td class="confluenceTd"><span style="color: rgb(0,0,0);">tf-a-&lt;DEVICE_TREE_NAME&gt;-emmc.stm32</span></td><td class="confluenceTd"><span style="color: rgb(0,0,0);">TF-A binary for FSBL partition (eMMC boot device)<br /></span></td></tr><tr><td class="confluenceTd"><span style="color: rgb(0,0,0);">tf-a-&lt;DEVICE_TREE_NAME&gt;-nand.stm32</span></td><td class="confluenceTd"><span style="color: rgb(0,0,0);">TF-A binary for FSBL partition (NAND boot device)</span></td></tr><tr><td class="confluenceTd"><span style="color: rgb(0,0,0);">tf-a-&lt;DEVICE_TREE_NAME&gt;-nor.stm32</span></td><td class="confluenceTd"><span style="color: rgb(0,0,0);">TF-A binary for FSBL partition (NOR boot device)</span></td></tr><tr><td class="confluenceTd"><span style="color: rgb(0,0,0);">tf-a-&lt;DEVICE_TREE_NAME&gt;-sdcard.stm32</span></td><td class="confluenceTd"><span style="color: rgb(0,0,0);">TF-A binary for FSBL partition (SD-card boot device)</span></td></tr><tr><td class="highlight-#f4f5f7 confluenceTd" style="text-align: center;" data-highlight-colour="#f4f5f7"><span style="color: rgb(0,0,0);" title="">fip</span></td><td class="confluenceTd"><p><span style="color: rgb(0,0,0);">fip-&lt;DEVICE_TREE_NAME&gt;-trusted.stm32</span></p></td><td class="confluenceTd"><p>FIP binary for FIP partition (trusted boot chain)</p><p>This binary encapsulate u-boot. For more details, refer to:</p><p><a href="https://wiki.st.com/stm32mpu/wiki/How_to_configure_TF-A_FIP" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/How_to_configure_TF-A_FIP</a></p></td></tr><tr><td class="highlight-#f4f5f7 confluenceTd" style="text-align: center;" rowspan="6" data-highlight-colour="#f4f5f7"><span style="color: rgb(0,0,0);" title="">-</span><br /><span style="color: rgb(0,0,0);" title=""><br /></span></td><td class="confluenceTd"><p><span style="color: rgb(0,0,0);">st-image-bootfs-&lt;DISTRO&gt;-&lt;MACHINE&gt;.ext4</span></p></td><td class="confluenceTd"><span style="color: rgb(0,0,0);">Binary for <em>bootfs</em> partition&#xa0;on eMMC and microSD card devices</span></td></tr><tr><td class="confluenceTd"><p><span style="color: rgb(0,0,0);">st-image-vendorfs-&lt;DISTRO&gt;-&lt;MACHINE&gt;.ext4</span></p></td><td class="confluenceTd"><span style="color: rgb(0,0,0);">Binary for <em>vendorfs</em> partition&#xa0;on eMMC and microSD card devices</span></td></tr><tr><td class="confluenceTd"><p><span style="color: rgb(0,0,0);">&lt;BSP_IMAGE&gt;-&lt;DISTRO&gt;-&lt;MACHINE&gt;.ext4</span></p></td><td class="confluenceTd"><span style="color: rgb(0,0,0);">Binary for<em> rootfs</em> partition&#xa0;on eMMC and microSD card devices</span></td></tr><tr><td class="confluenceTd"><p><span style="color: rgb(0,0,0);">st-image-userfs-&lt;DISTRO&gt;-&lt;MACHINE&gt;.ext4</span></p></td><td class="confluenceTd"><span style="color: rgb(0,0,0);">Binary for <em>userfs</em> partition&#xa0;on eMMC and microSD card devices</span></td></tr><tr><td class="confluenceTd"><span style="color: rgb(0,0,0);">&lt;BSP_IMAGE&gt;-&lt;DISTRO&gt;-&lt;MACHINE&gt;_nand_x_x_multivolume.ubi</span></td><td class="confluenceTd"><span style="color: rgb(0,0,0);">Binary for <em>bootfs</em>, <em>vendorfs</em>, <em>rootfs,</em> and <em>userfs</em> partitions on NAND device</span></td></tr><tr><td class="confluenceTd"><p><span style="color: rgb(0,0,0);">&lt;BSP_IMAGE&gt;-&lt;DISTRO&gt;-&lt;MACHINE&gt;.wic<br /></span></p><p><span style="color: rgb(0,0,0);">&lt;BSP_IMAGE&gt;-&lt;DISTRO&gt;-&lt;MACHINE&gt;.bmap</span></p><p><span style="color: rgb(0,0,0);">&lt;BSP_IMAGE&gt;-&lt;DISTRO&gt;-&lt;MACHINE&gt;.wic.bz2</span></p></td><td class="confluenceTd"><span style="color: rgb(0,0,0);">WIC file to create SD-card image<br /></span></td></tr></tbody></table></div><h1 class="auto-cursor-target" id="L876e-A4phyCORESTM32MP15xBSPManual-ProgrammingtheTargetProgrammingthetarget">Programming the Target<span class="confluence-anchor-link conf-macro output-inline" id="L876e.A4phyCORESTM32MP15xBSPManual-Programmingthetarget" data-hasbody="false" data-macro-name="anchor"></span></h1><p>In this section, we explain how to use the <em>STM32MPCubeProgrammer </em>tool to flash the NOR, eMMC, NAND, or SD Card.</p><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-InstallSTM32CubeProgrammerTool">Install STM32CubeProgrammer Tool</h2><p>When using the PHYTEC Virtual Machine preconfigured for the phyCORE-STM32MP15x BSP, this tool is already installed. Otherwise, refer to <a href="https://wiki.st.com/stm32mpu/wiki/STM32CubeProgrammer" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/STM32CubeProgrammer</a> for information on installing the STM32CubeProgrammer.</p><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-ConnectingtheBoardviaUSBDFULink"><span style="color: rgb(0,0,0);">Connecting the Board via USB DFU Link</span></h2><p>To download the BSP via DFU link, change the BOOT mode to<strong> UART/USB boot mode </strong></p><ul><li>Switch OFF the board</li><li>Change the S7 DIP switch&#xa0;to <strong>UART/USB boot mode</strong>:</li></ul><p style="margin-left: 30.0px;"><strong><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><a href= "https://wiki.phytec.com/download/thumbnails/156533019/USB%20-%20UART%201.jpg?version=1&amp;modificationDate=1588743751000&amp;api=v2" class="lightbox"><img class="confluence-embedded-image" draggable="false" height="150" src="https://wiki.phytec.com/download/thumbnails/156533019/USB%20-%20UART%201.jpg?version=1&amp;modificationDate=1588743751000&amp;api=v2" data-image-src="https://wiki.phytec.com/download/thumbnails/156533019/USB%20-%20UART%201.jpg?version=1&amp;modificationDate=1588743751000&amp;api=v2" style="max-width: 100%;"/></a></span></strong></p><ul><li><span style="color: rgb(0,51,102);">Switch ON the board =&gt;&#xa0;</span>The RED LED on the SOM must start blinking RED<span style="color: rgb(0,51,102);">.</span></li><li>Connect a USB micro-AB (OTG) to X12 and to the host PC that contains the downloaded image =&gt; The RED led should stop blinking.</li></ul><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-UsingSTM32CubeProgrammerUsingSTM32CubeProgrammer">Using STM32CubeProgrammer<span class="confluence-anchor-link conf-macro output-inline" id="L876e.A4phyCORESTM32MP15xBSPManual-UsingSTM32CubeProgrammer" data-hasbody="false" data-macro-name="anchor"></span></h2><ul><li>Go to the directory that contains the binaries and the flash layout files:&#xa0;</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~$ cd ~/PHYTEC_STM32MP1_BSP/build-openstlinuxweston-stm32mp1/tmp-glibc/deploy/images/phycore-stm32mp1-3</pre></div></div><ul><li>Get the device port location for the USB link:</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">$ STM32_Programmer_CLI -l usb
      -------------------------------------------------------------------
                        STM32CubeProgrammer &lt;tool version&gt;                  
      -------------------------------------------------------------------

=====  DFU Interface   =====

Total number of available STM32 device in DFU mode: 1

  Device Index           : USB1
  USB Bus Number         : 001
  USB Address Number     : 001
  Product ID             : DFU in HS Mode @Device ID /0x500, @Revision ID /0x0000
  Serial number          : 003C00283338510C34383330
  Firmware version       : 0x0110
  Device ID              : 0x0500</pre></div></div><ul><li>Use the flashing command:</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">$ STM32_Programmer_CLI -c port=&lt;DEVICE_PORT_LOCATION&gt; -w [&lt;file.tsv&gt;]
where 
 w:
     Write
 &lt;file.tsv&gt;:PathToFlashlayout/flashlayout.tsv file
         if Flashlayout and binaries are not in the same directory, then the path to the Flashlayout files must be precised.
 &lt;DEVICE_PORT_LOCATION&gt;:
         e.g. usb1 (case sensitive)</pre></div></div><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-FlashingtheSDCardBootfromSD-card"><span style="color: rgb(255,0,0);"><span style="color: rgb(0,51,102);"><span style="color: rgb(0,0,0);">Flashing the </span>SD Card (Boot from SD-card)<br /></span></span></h3><p>To flash the SD Card with <em>STM32CubeProgrammer</em>:</p><ul><li>If not already done, insert an SD Card in the SD Card connector (X14).</li><li>Use the flashing command with the following <em>Flashlayout </em>file:<em>&#xa0;/flashlayout_st-image-weston/trusted/FlashLayout_sdcard_phycore-stm32mp1-3-trusted.tsv</em></li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">$ STM32_Programmer_CLI -c port=usb1 -w flashlayout_st-image-weston/trusted/FlashLayout_sdcard_phycore-stm32mp1-3-trusted.tsv</pre></div></div><p>This operation takes several minutes (mainly depending on the <em>rootfs</em> size). A successful flashing outputs the following message:</p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">Flashing service completed successfully</pre></div></div><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-FlashingtheTarget">Flashing the Target</h3><h4 id="L876e-A4phyCORESTM32MP15xBSPManual-FlashingtheNORandeMMCBootfromNOR">Flashing the NOR and eMMC (Boot from NOR)</h4><ul><li>Use the flashing command with the following <em>Flashlayout</em> file:&#xa0;<em>/flashlayout_&lt;BSP_IMAGE&gt;/trusted/FlashLayout_nor-emmc_&lt;MACHINE&gt;-trusted.tsv</em></li></ul><div class="alert alert-success" data-hasbody="true" data-macro-name="tip"><p class="title" style="margin-left: 23px;">Tip</p><i class="fa fa-check-circle" style="float:left; margin-right: 10px;"></i><div class="confluence-information-macro-body"><p><span style="color: rgb(0,51,102);">With this <em>FlashLayout</em> file, the ST Trusted Firmware and U-boot are downloaded into the NOR Flash. The kernel and <em>rootfs</em> files are downloaded into eMMC. This enables booting from NOR Flash and running Linux on the eMMC.</span></p></div></div><p><br /></p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">$ STM32_Programmer_CLI -c port=usb1 -w flashlayout_st-image-weston/FlashLayout_nor-emmc_phycore-stm32mp1-3-trusted.tsv</pre></div></div><p>This operation takes several minutes (mainly depending on the <em>rootfs</em> size). A successful flashing outputs the following message:</p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">Flashing service completed successfully</pre></div></div><h4 id="L876e-A4phyCORESTM32MP15xBSPManual-FlashingeMMCBootfromeMMC"><span style="color: rgb(255,0,0);"><span style="color: rgb(0,51,102);">Flashing eMMC (Boot from eMMC)</span></span></h4><ul><li>Use the flashing command with the following <em>Flashlayout </em>file:&#xa0;<em>/flashlayout_&lt;BSP_IMAGE&gt;/trusted/FlashLayout_emmc_&lt;MACHINE&gt;-trusted.tsv</em></li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">$ STM32_Programmer_CLI -c port=usb1 -w flashlayout_st-image-weston/FlashLayout_emmc_phycore-stm32mp1-3-trusted.tsv</pre></div></div><p>This operation takes several minutes (mainly depending on the <em>rootfs</em> size). A successful flashing outputs the following message:</p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">Flashing service completed successfully</pre></div></div><h4 class="auto-cursor-target" id="L876e-A4phyCORESTM32MP15xBSPManual-FlashingNANDBootfromNAND">Flashing NAND (Boot from NAND)</h4><ul><li>Use the flashing command with the following <em>Flashlayout </em>file:&#xa0;<em>/flashlayout_&lt;BSP_IMAGE&gt;/trusted/FlashLayout_nand_&lt;MACHINE&gt;-trusted.tsv</em></li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">$ STM32_Programmer_CLI -c port=usb1 -w flashlayout_st-image-weston/FlashLayout_nand-2-256_phycore-stm32mp1-3-trusted.tsv</pre></div></div><p>This operation takes several minutes (mainly depending on the <em>rootfs</em> size). A successful flashing outputs the following message:</p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">Flashing service completed successfully</pre></div></div><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-CreateanSDCardImagewithPCHostSDCardReaderCreateaSDcardimagewithPCHostSDcardreader"><span style="color: rgb(0,0,0);">Create an SD Card Image (with PC Host SD Card Reader)</span><span style="color: rgb(0,0,0);"><span class="confluence-anchor-link conf-macro output-inline" id="L876e.A4phyCORESTM32MP15xBSPManual-CreateaSDcardimage(withPCHostSDcardreader)" data-hasbody="false" data-macro-name="anchor"></span></span></h2><p><span style="color: rgb(0,0,0);">When booting from an SD card, another possibility (apart from using STM32Cubeprogrammer) is to create an SD Card image that contains all BSP binary files in correctly preformatted partitions.</span></p><p><span style="color: rgb(0,0,0);">For that, a WIC image (<em>.wic </em>file) is generated by default along other binaries (under <em>build-&lt;DISTRO&gt;-&lt;MACHINE&gt;/</em><em>tmp-glibc/deploy/images/&lt;MACHINE&gt;</em>):</span></p><div class="frame table-responsive table-sm table-hover mb-5" style="max-height: 100% !Important;"><table class="confluenceTable ce-table" style=""><colgroup><col /><col /></colgroup><tbody><tr><td class="confluenceTd"><span style="color: rgb(0,0,0);">&lt;BSP_IMAGE&gt;-&lt;DISTRO&gt;-&lt;MACHINE&gt;.wic</span></td><td class="confluenceTd">WIC image</td></tr><tr><td class="confluenceTd"><span style="color: rgb(0,0,0);">&lt;BSP_IMAGE&gt;-&lt;DISTRO&gt;-&lt;MACHINE&gt;.wic</span>.bz2</td><td class="confluenceTd">compressed WIC image</td></tr><tr><td class="confluenceTd"><span style="color: rgb(0,0,0);">&lt;BSP_IMAGE&gt;-&lt;DISTRO&gt;-&lt;MACHINE&gt;.wic</span>.bmap</td><td class="confluenceTd">map file for bmaptool usage</td></tr></tbody></table></div><p><span style="color: rgb(0,0,0);"><strong>Example of WIC&#xa0; file:</strong><em>st-image-weston-openstlinux-weston-phycore-stm32mp1-3.wic</em>&#xa0;</span></p><p><span style="color: rgb(0,0,0);">Instead of using the WIC format, there is also the possibility to generate a RAW file (.raw) using </span><span style="color: rgb(0,0,0);">the script&#xa0;<em><strong>create_sdcard_from_flashlayout.sh</strong></em>&#xa0;with the <em>&lt;FlashLayout file&gt; =&#xa0;<strong>FlashLayout_sdcard_phycore-stm32mp1-3-trusted.tsv</strong></em>:</span></p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~$ cd build-&lt;DISTRO&gt;-&lt;MACHINE&gt;/tmp-glibc/deploy/images/&lt;MACHINE&gt;/scripts
host:~$ ./create_sdcard_from_flashlayout.sh ../flashlayout_&lt;built-image&gt;/trusted/&lt;FlashLayout file&gt;</pre></div></div><p><strong><span style="color: rgb(0,0,0);">Example:</span></strong></p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~$ cd build-openstlinuxweston-phycore-stm32mp1-3/tmp-glibc/deploy/images/phycore-stm32mp1-3/scripts
host:~$ ./create_sdcard_from_flashlayout.sh ../flashlayout_st-image-weston/trusted/FlashLayout_sdcard_phycore-stm32mp1-3-trusted.tsv </pre></div></div><p><span style="color: rgb(0,0,0);">The script will generate the following SD Card image (raw file): in the binaries directory: <em>.../flashlayout_&lt;BSP_IMAGE&gt;_FlashLayout_sdcard_&lt;MACHINE&gt;-trusted.raw</em></span></p><p><span style="color: rgb(0,0,0);"><em>Example :&#xa0;flashlayout_st-image-weston_FlashLayout_sdcard_phycore-stm32mp1-3-trusted.raw </em>(in&#xa0;<em>build-openstlinuxweston-phycore-stm32mp1-3/tmp-glibc/deploy/images/phycore-stm32mp1-3</em>)</span></p><p><span style="color: rgb(0,0,0);"><em>.wic </em>or <em>.raw</em> images can be used to populate the SD Card with<em> the Linux dd</em> command:</span></p><ul><li class="auto-cursor-target">Insert the uSD Card in the PC Host</li><li class="auto-cursor-target">Umount all the partitions associated with uSD Card</li><li class="auto-cursor-target"><span>Populate microSD card with <em>dd</em> command:</span></li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~$ cd build-openstlinuxweston-phycore-stm32mp1-3/tmp-glibc/deploy/images/phycore-stm32mp1-3
host:~$ sudo dd if=st-image-weston-openstlinux-weston-phycore-stm32mp1-3.wic of=/dev/mmcblk0 bs=8MB conv=fdatasync</pre></div></div><p class="auto-cursor-target">More details on the <span style="color: rgb(0,0,0);"><em>create_sdcard_from_flashlayout.sh</em></span> script and the <em>dd</em> command can be found here: <span style="color: rgb(0,0,0);"><a href="https://wiki.st.com/stm32mpu/wiki/How_to_populate_the_SD_card_with_dd_command" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/How_to_populate_the_SD_card_with_dd_command</a></span></p><div class="alert alert-danger" data-hasbody="true" data-macro-name="warning"><p class="title" style="margin-left: 23px;">Warning</p><i class="fa fa-times-circle" style="float:left; margin-right: 10px;"></i><div class="confluence-information-macro-body"><p>To create your bootable SD Card with the&#xa0;<em>dd</em>&#xa0;command, you must have root privileges. Because of this, you must be very careful when selecting the destination device for the&#xa0;dd&#xa0;command! All files on the selected destination device will be erased immediately without any further query! Consequently, having selected the wrong device can also erase your hard drive!</p></div></div><div class="alert alert-success" data-hasbody="true" data-macro-name="tip"><p class="title" style="margin-left: 23px;">Tip</p><i class="fa fa-check-circle" style="float:left; margin-right: 10px;"></i><div class="confluence-information-macro-body"><p><span style="color: rgb(0,0,0);">With WIC image, the <em>bmaptool</em> can be used instead of <em>dd</em> command with the association of the <em>.wic.bmap</em> file.<em> bmaptool</em> also accept the compressed format <em>.wic.bz2</em>. For more information on this tool, please refer to:<br /></span></p><p><span style="color: rgb(0,0,0);"><a href="https://docs.yoctoproject.org/3.1.17/dev-manual/dev-manual-common-tasks.html#flashing-images-using-bmaptool" class="external-link" rel="nofollow">https://docs.yoctoproject.org/3.1.17/dev-manual/dev-manual-common-tasks.html#flashing-images-using-bmaptool</a><br /></span><span style="color: rgb(0,0,0);"><a href="https://github.com/intel/bmap-tools" class="external-link" rel="nofollow">https://github.com/intel/bmap-tools</a></span></p></div></div><h1 id="L876e-A4phyCORESTM32MP15xBSPManual-SystemBooting">System Booting</h1><p>The phyCORE-STM32MP15x can boot from the following devices:</p><ul><li>eMMC</li><li>NOR</li><li>NAND (when populated instead of eMMC)</li><li>UART&#xa0;</li><li>USB</li><li>SD-Card</li></ul><p>The boot source is chosen by setting the <strong>S7 DIP switch</strong>.</p><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-BootingfromSDCard"><span style="color: rgb(0,0,0);">Booting from SD Card</span></h2><p><span style="color: rgb(0,0,0);">Booting from the SD Card is useful in several situations (for example when the bootloader in Flash memory has crashed).</span></p><p><span style="color: rgb(0,0,0);">To boot from the SD card, set the <strong>S7 DIP switch</strong> as follow:&#xa0;</span></p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><a href= "https://wiki.phytec.com/download/thumbnails/156533019/SD%20Card.jpg?version=1&amp;modificationDate=1588743668000&amp;api=v2" class="lightbox"><img class="confluence-embedded-image" draggable="false" height="150" src="https://wiki.phytec.com/download/thumbnails/156533019/SD%20Card.jpg?version=1&amp;modificationDate=1588743668000&amp;api=v2" data-image-src="https://wiki.phytec.com/download/thumbnails/156533019/SD%20Card.jpg?version=1&amp;modificationDate=1588743668000&amp;api=v2" style="max-width: 100%;"/></a></span></p><p><span style="color: rgb(0,0,0);">There are two ways to create a bootable SD card. You can either use:</span></p><ul><li><span style="color: rgb(0,0,0);">use a single prebuilt SD card image (see section <a href="#L876e.A4phyCORESTM32MP15xBSPManual-CreateaSDcardimage(withPCHostSDcardreader)">Create an SD card image (with PC Host SD card reader)</a>)</span></li><li><span style="color: rgb(0,0,0);">use STM32MPCubeprogrammer to flash the SD card from a target (see section&#xa0;<a href="#L876e.A4phyCORESTM32MP15xBSPManual-UsingSTM32CubeProgrammer">Using STM32CubeProgrammer</a> )</span></li></ul><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-BootingfromeMMCFlash"><span style="color: rgb(0,0,0);">Booting from eMMC Flash</span></h2><ul><li><span style="color: rgb(0,0,0);">First, you have to follow the procedure to flash the eMMC: <a href="#L876e.A4phyCORESTM32MP15xBSPManual-UsingSTM32CubeProgrammertoFlashtheBSP">Using STM32CubeProgrammer to Flash the BSP</a></span></li><li><span style="color: rgb(0,0,0);">After flashing, power off the board. Then set the<strong> S7 DIP</strong> switch to the correct positions: </span></li></ul><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><a href= "https://wiki.phytec.com/download/thumbnails/156533019/eMMC.jpg?version=2&amp;modificationDate=1588743693000&amp;api=v2" class="lightbox"><img class="confluence-embedded-image" draggable="false" height="150" src="https://wiki.phytec.com/download/thumbnails/156533019/eMMC.jpg?version=2&amp;modificationDate=1588743693000&amp;api=v2" data-image-src="https://wiki.phytec.com/download/thumbnails/156533019/eMMC.jpg?version=2&amp;modificationDate=1588743693000&amp;api=v2" style="max-width: 100%;"/></a></span></p><ul><li><span style="color: rgb(0,0,0);">When powering the board again, the system will boot from eMMC.</span></li></ul><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-BootingfromNORFlash"><span style="color: rgb(0,0,0);">Booting from NOR Flash</span></h2><ul><li><span style="color: rgb(0,0,0);">First, you have to follow the procedure to flash the NOR/eMMC: <a href="#L876e.A4phyCORESTM32MP15xBSPManual-UsingSTM32CubeProgrammertoFlashtheBSP">Using STM32CubeProgrammer to Flash the BSP</a></span></li><li><span style="color: rgb(0,0,0);">After flashing, power off the board. Then set the<strong> S7 DIP</strong> switch to the correct positions:</span></li></ul><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><a href= "https://wiki.phytec.com/download/thumbnails/156533019/NOR.jpg?version=2&amp;modificationDate=1588743628000&amp;api=v2" class="lightbox"><img class="confluence-embedded-image" draggable="false" height="150" src="https://wiki.phytec.com/download/thumbnails/156533019/NOR.jpg?version=2&amp;modificationDate=1588743628000&amp;api=v2" data-image-src="https://wiki.phytec.com/download/thumbnails/156533019/NOR.jpg?version=2&amp;modificationDate=1588743628000&amp;api=v2" style="max-width: 100%;"/></a></span></p><ul><li><span style="color: rgb(0,0,0);">When powering the board again, the system will boot from NOR.</span></li></ul><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-BootingfromNANDFlash"><span style="color: rgb(0,0,0);">Booting from NAND Flash</span></h2><ul><li><span style="color: rgb(0,0,0);">First, you have to follow the procedure to flash the NAND: <a href="#L876e.A4phyCORESTM32MP15xBSPManual-UsingSTM32CubeProgrammertoFlashtheBSP">Using STM32CubeProgrammer to Flash the BSP</a></span></li><li><span style="color: rgb(0,0,0);">After flashing, power off the board. Then set the<strong> S7 DIP</strong> switch to the correct positions:&#xa0;</span></li></ul><p style="margin-left: 30.0px;"><span style="color: rgb(0,0,0);"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><a href= "https://wiki.phytec.com/download/thumbnails/156533019/NAND.jpg?version=2&amp;modificationDate=1588743724000&amp;api=v2" class="lightbox"><img class="confluence-embedded-image" draggable="false" height="150" src="https://wiki.phytec.com/download/thumbnails/156533019/NAND.jpg?version=2&amp;modificationDate=1588743724000&amp;api=v2" data-image-src="https://wiki.phytec.com/download/thumbnails/156533019/NAND.jpg?version=2&amp;modificationDate=1588743724000&amp;api=v2" style="max-width: 100%;"/></a></span></span></p><ul><li><span style="color: rgb(0,0,0);">When powering the board again, the system will boot from NAND.</span></li></ul><h1 id="L876e-A4phyCORESTM32MP15xBSPManual-AccessingPeripheralsinLinuxuserspace">Accessing Peripherals (in Linux userspace)</h1><p>The following sections provide an overview of the supported hardware components and their operating system drivers on the STM32 platform.</p><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-UARTstty"><span style="color: rgb(0,0,0);">UARTs (tty)</span></h2><p><span style="color: rgb(0,0,0);">The STM32MP15x SoC provides up to 4 x UART and 4 x USART. phyCORE-STM32MP15x&#xa0;and carrier board is configured by default with <strong>4 UARTs</strong>:</span></p><div class="frame table-responsive table-sm table-hover mb-5" style="max-height: 100% !Important;"><table class="confluenceTable ce-table" style=""><colgroup><col /><col /><col /><col /></colgroup><tbody><tr><th style="background-color: #F4F5F7 !Important;" class="">UART interface</th><th style="background-color: #F4F5F7 !Important;" class="">Linux Device</th><th style="background-color: #F4F5F7 !Important;" colspan="1" class="">Function on Carrier Board</th><th colspan="1" class="" style="background-color: #F4F5F7 !Important;">RTS/CTS</th></tr><tr><td style="text-align: center;" class="confluenceTd">UART4</td><td style="text-align: center;" class="confluenceTd">/dev/ttySTM0</td><td style="text-align: left;" colspan="1" class="confluenceTd"><p>USB debug (X13) - 1<sup>st</sup>&#xa0;FTDI serial port (Linux Terminal)<br />optionally available on Expansion connector (X33)</p></td><td style="text-align: center;" colspan="1" class="confluenceTd">no</td></tr><tr><td style="text-align: center;" class="confluenceTd">USART3</td><td style="text-align: center;" class="confluenceTd">/dev/ttySTM1</td><td style="text-align: left;" colspan="1" class="confluenceTd"><p>USB debug (X13) - 2<sup>nd</sup> FTDI serial port<br />optionally available on:</p><ul><li>Arduino&#xa0;Shields connector (X3)</li><li>Expansion connector (X33)</li></ul></td><td style="text-align: center;" colspan="1" class="confluenceTd">no</td></tr><tr><td style="text-align: center;" class="confluenceTd">USART1</td><td style="text-align: center;" class="confluenceTd">/dev/ttySTM2</td><td style="text-align: left;" colspan="1" class="confluenceTd"><p>UART available on:</p><ul><li>RS232/RS485 (X35)</li><li>Arduino&#xa0;Shields connector (X3)</li><li>Raspberry Pi HAT connector (X7)</li></ul></td><td style="text-align: center;" colspan="1" class="confluenceTd">yes</td></tr></tbody></table></div><p><span style="color: rgb(0,0,0);">Below are some Linux&#xa0;userspace commands to test the UART on target:</span></p><ul><li><span style="color: rgb(0,0,0);">Sending a message on USART3:</span></li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">target$ echo "test" &gt; /dev/ttySTM1</pre></div></div><ul><li><span style="color: rgb(0,0,0);">Receiving a message on USART3:</span></li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">target$ cat /dev/ttySTM1</pre></div></div><ul><li><span style="color: rgb(0,0,0);">Be sure that the baud rate is set correctly on the host and target. In order to get the currently configured baud rate, you can use the command&#xa0;<em>stty</em>&#xa0;on the target. </span></li></ul><p>Command to get <em>tty </em>help:</p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">target$ tty --help</pre></div></div><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-FDCANBus"><span style="color: rgb(0,0,0);">FD CAN Bus</span></h2><p>For an overview of the Linux Controller Area Network (CAN) framework, please refer to&#xa0;<a href="https://wiki.st.com/stm32mpu/wiki/CAN_overview" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/CAN_overview</a></p><p class="firstHeading" lang="en">Below are some examples of how to send or receive data on a SocketCAN interface using the <strong><em>can-utils</em></strong> package with the <em><strong>cansend</strong></em> and <em><strong>candump</strong></em> command:</p><p class="firstHeading" lang="en"><strong>Prerequisite:&#xa0;</strong>At least two nodes are required to communicate on a CAN network.</p><ul><li class="auto-cursor-target">Initialize CAN0 Link with 1Mbit/s:</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">target$ ip link set can0 up type can bitrate 1000000</pre></div></div><ul><li class="auto-cursor-target">The command below allows you to get details on the created link:</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">target$ ip -details link show can0
2: can0: &lt;NOARP,UP,LOWER_UP,ECHO&gt; mtu 16 qdisc fq_codel state UNKNOWN mode DEFAULT group default qlen 10
    link/can  promiscuity 0 
    can state ERROR-ACTIVE (berr-counter tx 0 rx 0) restart-ms 0 
          bitrate 992063 sample-point 0.761
          tq 48 prop-seg 7 phase-seg1 8 phase-seg2 5 sjw 1
          m_can: tseg1 2..256 tseg2 1..128 sjw 1..128 brp 1..512 brp-inc 1
          m_can: dtseg1 1..32 dtseg2 1..16 dsjw 1..16 dbrp 1..32 dbrp-inc 1
          clock 62500000numtxqueues 1 numrxqueues 1 gso_max_size 65536 gso_max_segs 65535</pre></div></div><ul><li class="auto-cursor-target">To send a single frame, use the <em><strong>cansend</strong></em> utility (<em>cansend &lt;device&gt; &lt;can_frame&gt;</em>):</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">target$ cansend can0 123#1122334455667788                                                                                                                                                   </pre></div></div><ul><li class="auto-cursor-target">To receive CAN message, use the <em><strong>candump</strong></em> utility:</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">target$ candump can0                                                                                                                                                     
  can0  123   [8]  00 11 22 33 44 55 66 77
  can0  123   [8]  00 11 22 33 44 55 66 77</pre></div></div><ul><li class="auto-cursor-target"><span style="color: rgb(88,88,90);">To print help on<span>&#xa0;</span></span><em><strong>candump</strong></em><span style="color: rgb(88,88,90);"><span>&#xa0;</span>utility, use: "<em>candump -h</em>"</span></li></ul><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-Network"><span style="color: rgb(88,88,90);">Network</span></h2><p><span style="color: rgb(255,0,0);"><span style="color: rgb(0,0,0);">A gigabit Ethernet is provided by our module and board. The interfaces offer a standard&#xa0;<em>Linux</em> network port that can be programmed using the</span><span style="color: rgb(0,0,0);">BSD socket interface</span>. </span><span style="color: rgb(0,0,0);">The BSP contains different Network tools that allow for the configuration and testing of the Ethernet connection.</span></p><p><span style="color: rgb(255,0,0);"><span style="color: rgb(0,0,0);">For information about these different tools and how to use them, please refer to</span><a href="https://wiki.st.com/stm32mpu/wiki/Network_tools" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/Network_tools</a></span></p><p><span style="color: rgb(0,0,0);">Example of how to assign a given IP address to an Ethernet ETH0 interface:</span></p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">ifconfig eth0 10.48.1.324</pre></div></div><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-SDCard"><span style="color: rgb(0,0,0);">SD Card</span></h2><p><span style="color: rgb(0,0,0);">The phyBOARD-Sargas supports a slot for Secure Digital Cards to be used as general-purpose block devices. These devices can be used in the same way as any other block device.</span></p><div class="alert alert-danger" data-hasbody="true" data-macro-name="warning"><p class="title" style="margin-left: 23px;">Warning</p><i class="fa fa-times-circle" style="float:left; margin-right: 10px;"></i><div class="confluence-information-macro-body"><p><span style="color: rgb(0,0,0);">These kinds of devices are hot-pluggable. Nevertheless, you must ensure not to unplug the device while it is still mounted. This may result in data loss!</span></p></div></div><p>After inserting an SD/MMC card, the kernel will generate new device nodes in&#xa0;<em>/dev</em>. The full device can be reached via its&#xa0;<em>/dev/mmcblk0</em>&#xa0;device node.&#xa0;SD/MMC card partitions will show up in the following way:</p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">/dev/mmcblk0p&lt;Y&gt;</pre></div></div><p><span style="color: rgb(0,0,0);">&lt;Y&gt; counts as the partition number starting from 1 to the max count of partitions on this device.&#xa0;The partitions can be formatted with any kind of file system and also handled in a standard manner, e.g. the&#xa0;<em>mount</em>&#xa0;and&#xa0;<em>umount</em>&#xa0;command work as expected.</span></p><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-GPIOsGPIOs"><span style="color: rgb(0,0,0);">GPIOs</span><span style="color: rgb(0,0,0);"><span class="confluence-anchor-link conf-macro output-inline" id="L876e.A4phyCORESTM32MP15xBSPManual-GPIOs" data-hasbody="false" data-macro-name="anchor"></span></span></h2><p><span style="color: rgb(0,0,0);">The&#xa0;phyBOARD-Sargas carrier board has a set of pins specifically dedicated as user I/Os. Those pins are connected directly to STM32MP15x balls and are muxed as GPIOs. </span><span style="color: rgb(0,0,0);">Accessing GPIOs from userspace can be done using the <em>libgpiod.</em></span></p><p>To see how to access the GPIOs, please refer to <a href="https://wiki.st.com/stm32mpu/wiki/How_to_control_a_GPIO_in_userspace" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/How_to_control_a_GPIO_in_userspace</a>&#xa0;</p><div class="alert alert-danger" data-hasbody="true" data-macro-name="warning"><p class="title" style="margin-left: 23px;">Warning</p><i class="fa fa-times-circle" style="float:left; margin-right: 10px;"></i><div class="confluence-information-macro-body"><p><span style="color: rgb(0,0,0);">Most of the CPU IOs are used for special functions. Before using a user IO, refer to the schematic or the hardware manual of your board to ensure that it is not already in use.</span></p></div></div><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-Keys"><span style="color: rgb(0,0,0);">Keys</span></h3><p><span style="color: rgb(0,0,0);">With&#xa0;<em>gpio-keys </em>driver, the&#xa0;<em>Linux</em>&#xa0;kernel can interpret GPIO signals as virtual keyboard events. The carrier board has 2 buttons (S4 and S5), which can be used with the&#xa0;<em>gpio-keys</em>&#xa0;driver.&#xa0;</span></p><p><span style="color: rgb(0,0,0);">To display the key events in ASCII format, use&#xa0;<em>evtest.</em></span></p><ul><li><span style="color: rgb(0,0,0);">To show the available input devices, run:</span></li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">target$ evtest</pre></div></div><ul><li><span style="color: rgb(0,0,0);">You will get, for example:</span></li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">No device specified, trying to scan all of /dev/input/event*
Available devices:
/dev/input/event0:      pmic_onkey
/dev/input/event1:      gpio-keys
Select the device event number [0-1]:</pre></div></div><ul><li><span style="color: rgb(0,0,0);">Select input device event number&#xa0;<em>1</em>&#xa0;for&#xa0;<em>gpio-keys:</em></span></li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">Select the device event number [0-1]: 1
Input driver version is 1.0.1
Input device ID: bus 0x19 vendor 0x1 product 0x1 version 0x100
Input device name: "gpio-keys"
Supported events:
  Event type 0 (EV_SYN)
  Event type 1 (EV_KEY)
    Event code 28 (KEY_ENTER)
    Event code 102 (KEY_HOME)
Properties:
Testing ... (interrupt to exit)</pre></div></div><ul><li><span style="color: rgb(0,0,0);">Now you will see every hit on push buttons&#xa0;<em>S4 (KEY_HOME) or S5 (KEY_ENTER):</em></span></li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">Event: time 1570639195.409061, type 1 (EV_KEY), code 102 (KEY_HOME), value 1
Event: time 1570639195.409061, -------------- SYN_REPORT ------------
Event: time 1570639195.569047, type 1 (EV_KEY), code 102 (KEY_HOME), value 0
Event: time 1570639195.569047, -------------- SYN_REPORT ------------
Event: time 1570639196.809052, type 1 (EV_KEY), code 28 (KEY_ENTER), value 1
Event: time 1570639196.809052, -------------- SYN_REPORT ------------
Event: time 1570639197.009031, type 1 (EV_KEY), code 28 (KEY_ENTER), value 0
Event: time 1570639197.009031, -------------- SYN_REPORT ------------</pre></div></div><ul><li><span style="color: rgb(0,0,0);">You can exit&#xa0;<em>evtest</em>&#xa0;with&#xa0;<strong>Ctrl+C</strong></span></li><li><span style="color: rgb(0,0,0);">Listening to the device with&#xa0;<em>cat</em>&#xa0;will print the raw output:</span></li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">target$ cat /dev/input/event1
root@phycore-stm32mp1-3:/sys/class# cat /dev/input/event1 
F
�]��fF
�]��F
�]BfF
�]B</pre></div></div><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-LEDs"><span style="color: rgb(0,51,102);">LEDs</span></h3><p>If any LEDs are connected to GPIOs, you have the possibility to access them by a special LED driver interface instead of the general GPIO interface (section&#xa0;<a href="#L876e.A4phyCORESTM32MP15xBSPManual-GPIOs">GPIOs</a>). You will then access them using&#xa0;<em>/sys/class/leds/</em>&#xa0;instead of&#xa0;<em>/sys/class/gpio/</em>. The maximum brightness of the LEDs can be read from the&#xa0;<em>max_brightness</em>&#xa0;file. The&#xa0;brightness&#xa0;file will set the brightness of the LED (taking a value from 0 up to&#xa0;max_brightness). Most LEDs do not have hardware brightness support and therefore, will just be turned on by all non-zero brightness settings.</p><p>Here is a simple example:</p><ul><li>To get all LEDs available, type:</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">target$ ls /sys/class/leds
blue-power  pca:green:power  pca:red:power</pre></div></div><p>Here the LEDs are the three possible colors from RGB lED driven by a LED dimmer present on the carrier board. By default, the RGB LED blinks blue (it is the "Linux Heartbeat" that shows the Linux Kernel is running). But this RGB LED can also be used as a "user LED".</p><ul><li>Example to toggle the RGB LED <strong>Blue </strong>color <strong>OFF</strong>:</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">target$ cd /sys/class/leds
target$ echo 0 &gt;  blue-power/brightness</pre></div></div><ul><li>Example to toggle RGB LED <strong>Blue </strong>color <strong>ON&#xa0;</strong>with a brightness=10:</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">target$ echo 10 &gt;  blue-power/brightness</pre></div></div><ul><li class="auto-cursor-target">Example to toggle RGB LED <strong>Green&#xa0;</strong>color <strong>ON&#xa0;</strong>with a brightness=20:</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">target$ echo 20 &gt;  pca\:green\:power/brightness</pre></div></div><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-I2CBus"><span style="color: rgb(0,51,102);">I<sup>2</sup>C Bus</span></h2><p><span style="color: rgb(0,51,102);"><span style="color: rgb(0,0,0);">The STM32MP15x SoC provides up to 6 I²C FM (Fast-Mode).&#xa0;</span>The phyCORE-STM32MP15x is configured with two Fast-Mode I²C modules called I2C4 and I2C1.</span></p><ul><li><strong>I<sup>2</sup>C4</strong> is reserved for the I²C devices on the module (PMIC, RTC, EEPROM).</li><li><strong>I<sup>2</sup>C1</strong> is reserved for the carrier board which provides plenty of different I²C devices connected to the I²C1 bus of the STM32MP15x.</li></ul><p>This section will describe basic device usage.</p><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-EEPROM"><span style="color: rgb(0,51,102);">EEPROM</span></h3><p><span style="color: rgb(0,51,102);">It is possible to read and write directly to the device:</span></p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">/sys/class/i2c-dev/i2c-1/device/1-0050/eeprom</pre></div></div><ul><li>To read and print the first 1024 bytes of the EEPROM as a hex number, execute:</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">target$ dd if=/sys/class/i2c-dev/i2c-1/device/1-0050/eeprom bs=1 count=1024  | od -x</pre></div></div><ul><li>To fill the whole EEPROM with zeros, use:</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">target$ dd if=/dev/zero of=/sys/class/i2c-dev/i2c-1/device/1-0050/eeprom bs=4096 count=1</pre></div></div><p>This operation takes some time as the EEPROM is relatively slow.</p><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-RTC"><span style="color: rgb(0,51,102);">RTC</span></h3><p><span style="color: rgb(0,0,0);">RTCs can be accessed via&#xa0;<em>/dev/rtc*</em>.&#xa0;</span></p><ul><li><span style="color: rgb(0,0,0);">Check the available RTC:</span></li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">target$ ls /sys/class/rtc
target$ rtc0  rtc1</pre></div></div><div class="alert alert-success" data-hasbody="true" data-macro-name="tip"><p class="title" style="margin-left: 23px;">Tip</p><i class="fa fa-check-circle" style="float:left; margin-right: 10px;"></i><div class="confluence-information-macro-body"><p><span style="color: rgb(0,0,0);">This will list all RTCs including the non-I²C RTCs.</span></p></div></div><ul><li><span style="color: rgb(0,0,0);">To find the name of the RTC devices, you can read its <em>sysfs</em> entry with:</span></li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">target$ cat /sys/class/rtc/rtc*/name
rtc-rv3028 1-0052
stm32_rtc 5c004000.rtc</pre></div></div><div class="frame table-responsive table-sm table-hover mb-5" style="max-height: 100% !Important;"><table class="confluenceTable ce-table" style=""><colgroup><col style="width: 12.7325%;"/><col style="width: 19.9395%;"/><col style="width: 67.328%;"/></colgroup><tbody><tr><th class="" style="background-color: #F4F5F7 !Important;" data-highlight-colour="grey">RTC Devices</th><th class="" style="background-color: #F4F5F7 !Important;" colspan="1" data-highlight-colour="grey">Name</th><th class="" style="background-color: #F4F5F7 !Important;" data-highlight-colour="grey">Description</th></tr><tr><td class="confluenceTd">/dev/RTC0</td><td colspan="1" class="confluenceTd">rtc-rv3028 1-0052</td><td class="confluenceTd">External RTC RV-3028 (on the SOM). It is the <strong>Default</strong> RTC used by Linux Timing System.</td></tr><tr><td class="confluenceTd"><p>/dev/RTC1</p></td><td colspan="1" class="confluenceTd">stm32_rtc 5c004000.rtc</td><td class="confluenceTd"><p>Internal RTC of the CPU</p></td></tr></tbody></table></div><p><span style="color: rgb(0,0,0);">As time is set according to the value of <em>rtc0</em> during system boot, <em>rtc0</em> should always be the RTC that is being backed up.&#xa0;</span></p><ul><li><span style="color: rgb(0,0,0);">Date and time can be manipulated with the <em>date</em>&#xa0;command and the&#xa0;<em>hwclock</em>&#xa0;tool.&#xa0;</span><span style="color: rgb(0,0,0);">Example to set the date on /dev/RTC0:</span></li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">target$ date 1010123119
Thu Oct 10 12:31:00 UTC 2019
target$ hwclock -w</pre></div></div><p><br /></p><div class="alert alert-success" data-hasbody="true" data-macro-name="tip"><p class="title" style="margin-left: 23px;">Tip</p><i class="fa fa-check-circle" style="float:left; margin-right: 10px;"></i><div class="confluence-information-macro-body"><p><span style="color: rgb(0,0,0);">As the VBACKUP pin of the external RTC component RV-3028 (on the SOM) is connected to a Gold Cap (on the carrier board), the date and time stored in the RTC are kept even if the board is switched off.</span></p></div></div><h2 class="auto-cursor-target" id="L876e-A4phyCORESTM32MP15xBSPManual-SPIBus">SPI Bus</h2><p>The STM32MP15x SoC provides up to 6 SPI interfaces.&#xa0;The phyCORE-STM32MP15x is configured with 1 SPI called SPI16 (configured as SPI1 or SPI6).</p><p>By default, the Linux SPI driver used in the BSP is <em>spidev</em>.</p><div class="frame table-responsive table-sm table-hover mb-5" style="max-height: 100% !Important;"><table class="confluenceTable ce-table" style=""><colgroup><col style="width: 49.4962%;"/><col style="width: 50.5038%;"/></colgroup><tbody><tr><th style="background-color: #F4F5F7 !Important;" class="">SPI Interface</th><th style="background-color: #F4F5F7 !Important;" class="">Linux Device</th></tr><tr><td style="text-align: center;" class="confluenceTd"><p>SPI1 (or SPI6)</p></td><td style="text-align: center;" class="confluenceTd"><span style="color: rgb(0,51,102);">/dev/spidev0.0</span></td></tr></tbody></table></div><h2 class="auto-cursor-target" id="L876e-A4phyCORESTM32MP15xBSPManual-USBHostandOTG">USB Host and OTG</h2><p><span style="color: rgb(0,0,0);">Both USB Host and OTG use the same framework.</span></p><p><span style="color: rgb(0,0,0);">To learn about the Linux USB framework and how to use it, please refer to the USB framework: <a href="https://wiki.st.com/stm32mpu/wiki/USB_overview" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/USB_overview</a></span></p><p><span style="color: rgb(0,0,0);">For more software details about the OTG internal peripheral, please refer to <a href="https://wiki.st.com/stm32mpu/wiki/OTG_internal_peripheral" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/OTG_internal_peripheral</a></span></p><p>For more software details about the USBH internal peripheral, please refer to <span style="color: rgb(0,0,0);"><a href="https://wiki.st.com/stm32mpu/wiki/USBH_internal_peripheral" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/USBH_internal_peripheral</a></span></p><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-CreateanSSHConnectionwithUSBOTGorEthernetCreateanSSHConnectionwithUSBOTGorEthernet">Create an SSH Connection with USB OTG or Ethernet<span class="confluence-anchor-link conf-macro output-inline" id="L876e.A4phyCORESTM32MP15xBSPManual-CreateanSSHConnectionwithUSBOTGorEthernet" data-hasbody="false" data-macro-name="anchor"></span></h3><p><span style="color: rgb(0,0,0);">When the target is running on Linux, you can create an SSH connection with Ethernet or USB OTG (Ethernet point to point). </span></p><p>To create an SSH connection over USB OTG, proceed as follow:&#xa0;</p><ul><li>Plug a&#xa0;USB-A male to USB Micro B between the carrier board (X12) and the PC Host.</li><li>On your host PC, with your network manager or using "<em>ifconfig</em>" on a terminal, check that there is a new network interface (ex: new interface called "<em>enp0s20f0u2u3").</em></li><li>Check the IP address of the USB OTG device of the target (<em>usb0</em>). By default, it is configured to <strong>192.168.7.1</strong>.</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">target$ ifconfig 
eth0      Link encap:Ethernet  HWaddr 8E:C5:2C:68:CF:75  
          inet6 addr: fe80::8cc5:2cff:fe68:cf75/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:35 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:0 (0.0 B)  TX bytes:7597 (7.4 KiB)
          Interrupt:61 Base address:0x2000 

lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:264 errors:0 dropped:0 overruns:0 frame:0
          TX packets:264 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:16800 (16.4 KiB)  TX bytes:16800 (16.4 KiB)

usb0      Link encap:Ethernet  HWaddr BA:15:19:D5:BC:01  
          inet addr:192.168.7.1  Bcast:192.168.7.255  Mask:255.255.255.0
          UP BROADCAST MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)</pre></div></div><ul><li>On your host PC, with your network manager or with <em>ifconfig</em> command, check that there is a new network interface (ex: new interface called "<em>enp0s20f0u2u3"). </em>Then, configure the IP that matches with the <em>usb0</em> target interface (<em>192.168.7.1</em>). Example with <em>ifconfig</em>:</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~$ sudo ifconfig enp0s20f0u2u3 192.168.7.2</pre></div></div><ul><li>Connect to the target (to create a new remote terminal through SSH):</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~$ ssh root@192.168.7.1</pre></div></div><ul><li>You can also copy any file from the host to the target with the following command:</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~$ scp ~/myFile root@192.168.7.1:/home/root</pre></div></div><p class="auto-cursor-target"><span style="color: rgb(0,0,0);">The same procedure can be applied with an Ethernet connection, except that no Ethernet IP is attributed by default on the target (when no DHCP server is used). So you first have to set an Ethernet IP address to the target.<br /></span></p><h2 class="auto-cursor-target" id="L876e-A4phyCORESTM32MP15xBSPManual-Audio"><span style="color: rgb(0,0,0);">Audio</span></h2><p><span style="color: rgb(0,0,0);">On the phyCORE-STM32MP15x, we use the TI TLV320AIC3007 audio codec.&#xa0;Audio support is done via the SAI2&#xa0;interface and controlled via I<sup>2</sup>C.</span></p><ul><li><span style="color: rgb(0,0,0);">To check if your sound card driver is loaded correctly and to check which audio output device is available:</span></li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">target$ aplay -L</pre></div></div><ul><li><span style="color: rgb(0,0,0);">You will get output similar toː</span></li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">null
&#xa0; &#xa0; &#xa0; Discard all samples (playback) or generate zero samples (capture)
pulse
&#xa0; &#xa0; &#xa0; PulseAudio Sound Server
default
&#xa0; &#xa0; &#xa0; Default ALSA Output (currently PulseAudio Sound Server)
sysdefault:CARD=STM32MP1PHYCORE
&#xa0; &#xa0; &#xa0; STM32MP1-PHYCORE, 
&#xa0; &#xa0; &#xa0; &#xa0;Default Audio Device</pre></div></div><ul><li>To test Audio Playback:</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">target$ aplay -D plughw:CARD=STM32MP1PHYCORE /usr/share/sounds/alsa/Front_Center.wav</pre></div></div><ul><li>To list a<span style="color: rgb(0,0,0);">udio capture devices:</span></li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">target$ arecord -l
**** List of CAPTURE Hardware Devices ****card 0: STM32MP1PHYCORE [STM32MP1-PHYCORE], device 1: 4400b004.audio-controller-tlv320aic3x-hifi tlv320aic3x-hifi-1 []&#xa0;
Subdevices: 1/1 Subdevice #0: subdevice #0</pre></div></div><ul><li><span style="color: rgb(0,51,102);">Run&#xa0;<em>speaker-test</em>&#xa0;to identify channel numbers (Left, Right...). Example to check right and left channel (2 channels):</span></li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">target$ speaker-test -c 2 -t wav</pre></div></div><ul><li><span style="color: rgb(0,51,102);">You may have to select the audio device:</span></li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">target$ speaker-test -c 2 -t wav -D plughw:CARD=STM32MP1PHYCORE</pre></div></div><ul><li><span style="color: rgb(0,51,102);">To inspect your sound cards capabilities, call:</span></li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">target$ alsamixer -c STM32MP1PHYCORE</pre></div></div><p>You should see a lot of options as the audio-ICs has many features you can play with. It might be better to open&#xa0;<em>alsamixer&#xa0;</em>via&#xa0;<em>ssh&#xa0;</em>(see <a href="#L876e.A4phyCORESTM32MP15xBSPManual-CreateanSSHConnectionwithUSBOTGorEthernet">Create an SSH Connection with USB OTG or Ethernet</a>) instead of the serial console, as the console graphical effects are better.</p><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-AudioSourcesandSinks">Audio Sources and Sinks</h3><p><span style="color: rgb(0,51,102);"><span style="color: rgb(0,0,0);">The phyBOARD-Sargas carrier board has three jacks: headphone (X28), line-in (X27), line out (X26); and one Mono speaker output connector (X5). Enabling and disabling input and output channels can be done with the <em>alsamixer</em> program.</span></span></p><p><span style="color: rgb(0,51,102);"><span style="color: rgb(0,0,0);">With the&#xa0;<em><strong>Tabulator</strong></em> key, you can switch between the following screens:&#xa0; <em>Screen Playback;&#xa0;Screen Capture.&#xa0;</em>To enable or disable switchable controls, press&#xa0;<em><strong>m</strong></em> (mute). </span></span><span style="color: rgb(0,51,102);"><span style="color: rgb(0,0,0);">With the cursor keys left and right, you can step through the different channels.<span>&#xa0; </span></span></span><span style="color: rgb(0,51,102);"><span style="color: rgb(0,0,0);">You can leave&#xa0;<em>alsamixer</em>&#xa0;by pressing the&#xa0;<em><strong>ESC</strong></em>&#xa0;key. The settings are saved automatically on shutdown and restored on boot by the systemd service&#xa0;<em>alsa-restore</em>. If you want to save the mixer settings manually, you can execute&#xa0;<em>alsactl store</em>. The settings are saved in&#xa0;<em>/var/lib/alsa/asound.state</em>.</span></span></p><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-Playback">Playback</h3><p>To playback simple audio streams, you can use&#xa0;<em>aplay</em>. For example:</p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">target$ aplay /usr/share/sounds/alsa/Front_Center.wav
#OR you may have to select the audio device:
target$ aplay -D plughw:CARD=STM32MP1PHYCORE /usr/share/sounds/alsa/Front_Center.wav</pre></div></div><h3 class="auto-cursor-target" id="L876e-A4phyCORESTM32MP15xBSPManual-Capture">Capture</h3><p><em>arecord </em>is a command-line tool for capturing audio streams that use Line In as the default input source. The following example captures the current stereo input source with a sample rate of 48000 Hz and creates an audio file in WAV format (signed 16 bit per channel, 32 bit per sample):</p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">target$ arecord -t wav -c 2 -r 48000 -f S16_LE test.wav
#OR :
target$ arecord -t wav -c 2 -f dat test.wav
#OR you may have to select the audio device:
target$ arecord -t wav -c 2 -f dat test.wav -D hw:0,1</pre></div></div><p class="auto-cursor-target">Capturing can be stopped using&#xa0;<strong>CTRL-C</strong>. You can also specify the capture duration with the <em>-d</em> option.</p><ul><li class="auto-cursor-target"><span style="color: rgb(0,51,102);">To play the recorded file:&#xa0;</span></li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">target$ aplay test.wav</pre></div></div><h3 class="auto-cursor-target" id="L876e-A4phyCORESTM32MP15xBSPManual-TexasInstrumentsTLV320AIC3007"><span style="color: rgb(0,0,0);">Texas Instruments TLV320AIC3007</span></h3><p><span style="color: rgb(0,0,0);">The TI chip has a lot of mixing features as you will notice when opening&#xa0;<em>alsamixer</em>. To get an idea of the possibilities, refer to the datasheet from TI. One important feature is the analog mixing capability. You can route input channels to output channels, either active or passive, without transferring data back and forth to the SoC. This is usually known as zero-latency monitoring in terms of PC Audio cards. To control this feature, open&#xa0;<em>alsamixer</em>&#xa0;and go to&#xa0;<em>Playback section</em>&#xa0;(F3). There will be one group of selectors for each output channel, e.g.&#xa0;<em>Right Line Mixer</em>. For most of the input paths, you can select between "passive through" or you can activate a programmable gain signal path. To route the line input to the line output, activate both "<em>Right Line Mixer PGAR Bypass</em>" and "<em>Left Line Mixer PGAL Bypass</em>". You should now hear the input signal at the line-out.</span></p><p><span style="color: rgb(0,0,0);">As an example application, we can route the audio stream through the whole system. First, we deactivate the direct loop from line-in to line-out in&#xa0;<em>alsamixer</em>&#xa0;and activate the ADC for the analog input mixer and the DAC for the analog output mixer. We can now close the signal path in the user space by using a pipe and the&#xa0;<em>ALSA</em>&#xa0;tools:</span></p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">target$ arecord -c 2 -r 48000 -f S16_LE | aplay
#OR
target$ arecord -c 2 -r 48000 -f S16_LE -D hw:0,1 | aplay -D plughw:CARD=STM32MP1PHYCORE</pre></div></div><p class="auto-cursor-target"><span style="color: rgb(0,0,0);">We created the following audio routing path:</span></p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">analog in -&gt; ADC -&gt; STM32MP1 -&gt; kernel -&gt; (userspace -&gt; kernel -&gt; )* DAC -&gt; analog out</pre></div></div><p><span style="color: rgb(255,0,0);"><small>* actually twice for the pipe</small></span></p><p><span style="color: rgb(0,0,0);">You should now hear the input signal at the line output again. But this time, the routing through the entire system added latency of 750 ms to the signal. The line mixer on the other side will only add about 4 μs delay.</span></p><p><span style="color: rgb(0,0,0);">This pipe routing is a crude example of how to use audio. If you need good audio performance, you should use an audio server. There are two prominent choices available,&#xa0;<em>pulseaudio</em>&#xa0;and&#xa0;<em>jack</em>.</span></p><p><span style="color: rgb(0,0,0);">As a third option, you can route the audio from line-in to the internal ADC. But instead of taking the signal path through the complete system, you can use the internal digital mixer of the TLV to directly route the signal back to the DAC and then to the output analog mixer and line-out. This signal path is record-only. You do not have the option of full-duplex playback in this mode. You can, however, use all the available DSP features of the TLV, the automatic gain, the high-pass filter, EQ, and de-emphasis filters for the record path. To activate this mode, you have to use the TI Windows tool to look up the specific I²C commands. The software can be found on the TI webpage and is called <em>TLV320AIC3107EVM-K - GUI</em>&#xa0;software. The 3107 is register compatible with all available features to the 3007. The software is used for both chips.</span></p><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-Displays"><span style="color: rgb(0,0,0);">Displays</span></h2><p>Three different kinds of displays are currently supported:</p><ul><li>HDMI monitor =&gt; with <strong>PEB-AV-01</strong> PHYTEC addon connected on <strong>Audio/Video connectors X24/X25</strong></li><li>AC158 7" EDT capacitive LCD screen - 800x480 pixels =&gt; with <strong>PEB-AV-02</strong> PHYTEC addon connected on <strong>Audio/Video connectors X24/X25</strong></li><li>MB1407 MIPI DSI screen&#xa0; - 4" TFT 480x800 pixels (from STMicroelectronics : <a href="https://wiki.st.com/stm32mpu/wiki/MB1407" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/MB1407</a>) =&gt; connected on <strong>MIPI DSI connector X41</strong></li><li>Official Raspberry Pi Touch 7" Display =&gt; connected on <strong>MIPI DSI connector X41</strong></li></ul><p>By default, the PHYTEC BSP is configured for the AC158 LCD parallel display (with PEB-AV-02 expansion). Switching between those 4 different configurations is explained in the next section.</p><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-ChangingtheBSPDisplayConfiguration">Changing the BSP Display Configuration</h3><p>Changing the BSP display configuration can be done enabling/disabling one of the following Linux Kernel device tree overlay:</p><ul><li><em>phyboard-stm32mp1-peb-av01-hdmi.dtbo</em></li><li><em>phyboard-stm32mp1-peb-av02-lcd.dtbo</em></li><li><em>phyboard-stm32mp1-dsi-lcd-mb1407.dtbo</em></li><li><em>phyboard-stm32mp1-dsi-rpi-official-display.dtbo</em></li></ul><p>By default, <em>phyboard-stm32mp1-peb-av02-lcd </em>device tree overlay is enabled.</p><p>Note that only one display expansion can be enabled at a time.</p><ul><li>To enable/disable one of those device tree expansions, refer to <a href="#L876e.A4phyCORESTM32MP15xBSPManual-Howtoapplythedevicetreeoverlay">How to apply the device tree overlay</a>.</li><li>Once you have activated the corresponding device tree overlay, you can check that the display configuration is correct with the following command:</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">target$ modetest -M stm -c
Connectors:
id      encoder status          name            size (mm)       modes   encoders
29      28      connected       HDMI-A-1        520x290         2       28
  modes:
        name refresh (Hz) hdisp hss hse htot vdisp vss vse vtot)
  1024x768 70 1024 1048 1184 1328 768 771 777 806 75000 flags: nhsync, nvsync; type: driver
  800x600 72 800 856 976 1040 600 637 643 666 50000 flags: phsync, pvsync; type: driver
  props:
        1 EDID:
                flags: immutable blob
                blobs:

                value:
                        00ffffffffffff005a6330b701010101
                        201a010380341d782e0bd5a25750a128
                        0f5054bfef80b300a940a9c095009040
                        8180814081c0023a801871382d40582c
                        450009252100001e000000ff0055454a
                        3136333232313038340a000000fd0032
                        4b185213000a202020202020000000fc
                        00564132343635205345524945530081
        2 DPMS:
                flags: enum
                enums: On=0 Standby=1 Suspend=2 Off=3
                value: 0
        5 link-status:
                flags: enum
                enums: Good=0 Bad=1
                value: 0
        6 non-desktop:
                flags: immutable range
                values: 0 1
                value: 0
        19 CRTC_ID:
                flags: object
                value: 32</pre></div></div><p>This command allows the user to check the display connectors and their status. <strong>modetest</strong> is DRM/KMS test tool.</p><p>The <em>'-c' modetest</em> option displays only the Connectors. To check all the Linux DRM display parameters (Encoders, CRTCs, Planes, Framerbuffers) use the command:&#xa0;</p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">target$ modetest -M stm</pre></div></div><p>To get more information about the <em>modetest </em>command and the Linux DRM/KMS display, graphic and composition framework, please refer to:&#xa0;<a href="https://wiki.st.com/stm32mpu/wiki/DRM_KMS_overview#Show_display_overall_status" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/DRM_KMS_overview#Show_display_overall_status</a></p><p><u>Expected results to check that the display configuration on target is correct:</u></p><ul><li class="auto-cursor-target"><strong>HDMI configuration enabled:</strong> connector name = "<strong>HDMI-A-1</strong>", status ="connected"</li><li><strong>parallel LCD configuration enabled:</strong> connector name = "<strong>DPI-1</strong>", status ="connected"</li><li><strong>MIPI DSI display configuration enabled: </strong>connector name = "<strong>DSI-1</strong>", status ="connected"</li></ul><div class="alert alert-danger" data-hasbody="true" data-macro-name="warning"><p class="title" style="margin-left: 23px;">Warning</p><i class="fa fa-times-circle" style="float:left; margin-right: 10px;"></i><div class="confluence-information-macro-body"><ul><li>If you want to test displays or set specific video modes with the <strong>modetest</strong> tool, the Wayland/Weston framework has to be stopped with the following command:</li></ul><p><em>systemctl stop <a href="mailto:weston@root.servic" class="external-link" rel="nofollow">weston@root.servic</a>e</em></p><ul><li>If you want to restart Wayland, use the following command:</li></ul><p><em>systemctl start <a href="mailto:weston@root.servic" class="external-link" rel="nofollow">weston@root.servic</a>e</em></p><ul><li>If Wayland/Weston framework is not running but the splash screen is displayed, this one must be removed with the following command:</li></ul><p><em>psplash-drm-quit</em></p></div></div><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-SelectingtheHDMIMonitorVideoModes">Selecting the HDMI Monitor Video Modes</h3><p>To get the supported video modes (resolutions and refresh frequencies) of an HDMI monitor connected to the phyCORE-STM32MP platform, please refer to <a href="https://wiki.st.com/stm32mpu/wiki/How_to_display_on_HDMI#Video_modes" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/How_to_display_on_HDMI#Video_modes</a> and <a href="https://wiki.st.com/stm32mpu/wiki/How_to_display_on_HDMI#FAQ" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/How_to_display_on_HDMI#FAQ. </a></p><p><u>Example to set a particular HDMI video mode:</u></p><p>Taking the result of the "<em>modetest -M stm -c</em>" command from the previous section, we can see that:</p><ul><li>HDMI-A-1 is on connector id 29, is connected, and supports a resolution of 1280x720-50.</li><li>associated CRTC is on id 32</li></ul><p>The command to set the supported "800x600-72" video mode is:</p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">target$ modetest -M stm -s 29@32:800x600-72 -d</pre></div></div><div class="alert alert-warning" data-hasbody="true" data-macro-name="note"><p class="title" style="margin-left: 23px;">Note</p><i class="fa fa-exclamation-triangle" style="float:left; margin-right: 10px;"></i><div class="confluence-information-macro-body"><p>To be able to use this command, stop any running graphical environment on top of DRM/KMS Linux framework (like Wayland Weston or splash screen).</p></div></div><p>Generally, the <span class="mw-lingo-term">HDMI</span> monitor (or TV) provides (through I2C) several video modes (resolutions and refresh frequencies), that might not be all supported by the platform. In case all video modes supported by the monitor are rejected by the phyCORE-STM32MP platform, you will not be able to use the monitor.</p><p>One solution, in this case, is to use Linux kernel DRM KMS Helper with EDID Firmware files to be able to get more video modes possibilities and choose the HDMI resolution to apply. This EDID firmware is installed by default in the BSP.&#xa0; The resolution must be set in <strong>u-boot</strong>, setting the variable environment "<em>hdmi_resolution</em>" as follow.</p><p>example to fix the HDMI resolution to 1280x720 in u-boot:</p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">STM32MP&gt; setenv hdmi_resolution HDMI-A-1:edid/1280x720.bin
STM32MP&gt; saveenv</pre></div></div><p>By default, this environment variable does not exist in u-boot so that this EDID Firmware is not used for HDMI resolution configuration (resolution provided by the monitor and supported by the STM32MP are used).</p><p>The list of available EDID resolution binaries can be found on target in linux under: <em>/lib/firmware/edid/</em>. Note that not all of them are not supported by the STM32MP15x.</p><p>Once you have saved the u-boot environments with "saveenv", you can continue the normal boot with the u-boot command "boot".</p><h2 class="auto-cursor-target" id="L876e-A4phyCORESTM32MP15xBSPManual-WLANBluetoothModuleExpansion">WLAN / Bluetooth Module Expansion</h2><p>Two different WLAN / Bluetooth modules are supported :</p><ul><li>Laird Stering-LWB 2.4GHz or 5Ghz <span class="toctext"><span style="color: rgb(37,37,37);">from Laird™</span></span> =&gt; with <strong>PEB-WLBT-05</strong> PHYTEC addon connected on <strong>Expansion connector X33</strong></li><li><span style="color: rgb(255,0,0);"><span style="color: rgb(0,0,0);">AMPAK AP6212A</span>&#xa0;</span>=&gt; with the Raspberry PI HAT "RedBear IoT pHAT v1.0" connected on <strong>Raspberry Pi connector X7</strong></li></ul><p>By default, the PHYTEC BSP is configured without any Wifi/Bluetooth module activated in the device tree. Activating Wifi/Bluetooth modules is explain in the next section.</p><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-EnablingWLANBluetoothModule">Enabling WLAN / Bluetooth Module</h3><p>Activating WLAN / Bluetooth module can be done by enabling one of the following Linux Kernel device tree overlay:</p><div class="frame table-responsive table-sm table-hover mb-5" style="max-height: 100% !Important;"><table class="confluenceTable ce-table" style=""><colgroup><col /><col /><col /><col /></colgroup><tbody><tr><th style="background-color: #F4F5F7 !Important;" class="">Expansion<br /><br /></th><th style="background-color: #F4F5F7 !Important;" colspan="2" class="">Function</th><th style="background-color: #F4F5F7 !Important;" class="">Device tree overlay</th></tr><tr><td rowspan="3" class="confluenceTd"><div class="content-wrapper"><p class="auto-cursor-target">PEB-WLBT-05<span class="simple-cite-cite conf-macro output-inline" data-cite-id="1" data-hasbody="true" data-macro-name="single-cite" style="font-weight: bold;"><span class="confluence-anchor-link" id="cite-1-1" style="font-size:0px"></span><a href="#cite-summary-1-1"><sup>[1]</sup></a></span></p></div></td><td rowspan="2" class="confluenceTd"><div class="content-wrapper"><p class="auto-cursor-target">Bluetooth<span class="simple-cite-cite conf-macro output-inline" data-cite-id="2" data-hasbody="true" data-macro-name="single-cite" style="font-weight: bold;"><span class="confluence-anchor-link" id="cite-2-1" style="font-size:0px"></span><a href="#cite-summary-2-1"><sup>[2]</sup></a></span></p></div></td><td class="confluenceTd">on USART1</td><td class="confluenceTd"><p><em>phyboard-stm32mp1-peb-wlbt-05-bluetooth-usart1.dtbo</em></p></td></tr><tr><td class="confluenceTd">on USART3</td><td class="confluenceTd"><em>phyboard-stm32mp1-peb-wlbt-05-bluetooth-usart3.dtbo</em></td></tr><tr><td colspan="2" class="confluenceTd">WLAN</td><td class="confluenceTd"><p><em>phyboard-stm32mp1-peb-wlbt-05-wlan.dtbo</em></p></td></tr><tr><td class="confluenceTd">RedBear IoT pHAT v1.0</td><td colspan="2" class="confluenceTd">WLAN and Bluetooth</td><td colspan="1" class="confluenceTd"><em>phyboard-stm32mp1-pi-hat-redbear.dtbo</em></td></tr></tbody></table></div><p><table class="conf-macro output-block" data-hasbody="false" data-macro-name="cite-summary" style="background-color: #F5F5F5 !Important; border-style: solid; border-width: 1px; border-color: #D0D2D3;"><tbody><tr><td align="right" style="font-weight: bold; vertical-align:top; min-width:50px;"> 1. </td><td><div class="simple-cite-render simple-cite-summary-cite" style="display:inline" data-cite-id="1" data-reference="" data-render-task="" data-cite-rendered="true" data-tooltip="false" data-citation-override="false"><p style="display:inline"><span>With PEB-WLBT-05, WLAN and Bluetooth features are independent (two different DT overlays), so it is possible to enable WLAN only, Bluetooth only, or both. </span></p><aui-spinner class="simple-cite-spinner" size="small" style="display:none"></aui-spinner></div></td></tr><tr><td align="right" style="font-weight: bold; vertical-align:top; min-width:50px;"> 2. </td><td><div class="simple-cite-render simple-cite-summary-cite" style="display:inline" data-cite-id="2" data-reference="" data-render-task="" data-cite-rendered="true" data-tooltip="false" data-citation-override="false"><p style="display:inline"><span>With PEB-WLBT-05, for Bluetooth, enable the device tree corresponding to the </span><span>UART interface that should be used by the module (refer to the Application Note of this module to configure the phyBOARD-Sargas correctly: <a href="https://www.phytec.de/cdocuments/?doc=CwAsHg" class="external-link" rel="nofollow">LAN-102e.A1 PEB-WLBT-05 for phyBOARD-Sargas Quickstart Guide</a>).</span></p><aui-spinner class="simple-cite-spinner" size="small" style="display:none"></aui-spinner></div></td></tr></tbody></table></p><ul><li>To enable/disable one of those device tree expansions, refer to <a href="#L876e.A4phyCORESTM32MP15xBSPManual-Howtoapplythedevicetreeoverlay">How to apply the device tree overlay</a><span style="color: rgb(0,0,0);">.</span></li></ul><div class="alert alert-success" data-hasbody="true" data-macro-name="tip"><p class="title" style="margin-left: 23px;">Tip</p><i class="fa fa-check-circle" style="float:left; margin-right: 10px;"></i><div class="confluence-information-macro-body"><p>To get more information on&#xa0; using the <em><strong>PEB-WLBT-05</strong></em> module and setting up a WiFi and/or Bluetooth connection, please refer to the Application Note <span><a href="https://www.phytec.de/cdocuments/?doc=CwAsHg" class="external-link" rel="nofollow">LAN-102e.A1 PEB-WLBT-05 for phyBOARD-Sargas Quickstart Guide</a></span></p></div></div><h2 class="auto-cursor-target" id="L876e-A4phyCORESTM32MP15xBSPManual-Watchdog">Watchdog</h2><p><span style="color: rgb(255,0,0);"><span style="color: rgb(0,0,0);">The STM32MP includes a Watchdog circuit called "IWDG" (Independent WatchDoG) that is able to reset the board when the system hangs (due to software or hardware failures). </span></span><span style="color: rgb(255,0,0);"><span style="color: rgb(0,0,0);">The IWDG is clocked by an independent clock and stays active even if the main clock fails. In addition, the watchdog function is performed in the VDD voltage domain, allowing the IWDG to remain functional even in low-power modes.</span></span></p><p>Two independent watchdogs (IWDG1 and IWDG2) are dedicated to MPU:</p><ul><li>IWGG1 can only be allocated to the Cortex-A7 secure <span style="color: rgb(0,0,0);">(to be used in the secure context by the customer application: this instance is not supported in OpenSTLinux distribution).</span></li></ul><ul><li>IWDG2 can be allocated to the Cortex-A7 non-secure to be used with Linux W<span style="color: rgb(0,0,0);"><a title="Watchdog overview" style="text-decoration: none;" href="https://wiki.st.com/stm32mpu/wiki/Watchdog_overview" class="external-link" rel="nofollow">atchdog</a></span> Timer (WDT) framework.</li></ul><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-HowtoenabletheIWDG2andconfigureitstimeoutvalue">How to enable the IWDG2 and configure its timeout value</h3><p><span style="color: rgb(0,0,0);">The IWDG2 watchdog is enabled by default in the <strong><em>phycore-stm32mp15-som.dtsi</em></strong> kernel device tree with a custom timeout value in seconds (timeout-sec):</span></p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">&amp;iwdg2 {
timeout-sec = &lt;32&gt;;
status = "okay";
};</pre></div></div><p><span style="color: rgb(255,0,0);"><span style="color: rgb(0,0,0);">By default, the Watchdog Timer Linux framework support and the IWDG support are activated in the Linux kernel. <span style="color: rgb(88,88,90);"><span style="color: rgb(0,0,0);">This configuration can be changed through the Menuconfig tool (<a href="#L876e.A4phyCORESTM32MP15xBSPManual-ConfigurethekernelthroughMenuconfig">Configure the kernel through Menuconfig</a></span><span style="color: rgb(0,0,0);">):</span></span></span></span></p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">Device Drivers ---&gt;
[*] Watchdog Timer Support ---&gt;
[*] Disable watchdog shutdown on close
[*] Update boot-enabled watchdog until userspace takes over
&lt;*&gt; STM32 Independent WatchDoG (IWDG) support</pre></div></div><p><span style="color: rgb(255,0,0);"><span style="color: rgb(0,0,0);">With the option&#xa0; "Update boot-enabled watchdog until userspace takes over" (enabled by default),&#xa0; the kernel will ping the watchdog as long as an application opens the /dev/watchdog file (used by <em>systemd</em>).</span></span></p><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-HowtousethewatchdoginLinuxusingsystemd"><span style="color: rgb(255,0,0);"><span style="color: rgb(0,0,0);">How to use the watchdog in</span><span style="color: rgb(0,0,0);">&#xa0;<em>Linux</em>&#xa0;</span><span style="color: rgb(0,0,0);">using</span>&#xa0;<span style="color: rgb(0,0,0);"><em>systemd</em></span></span></h3><p><span style="color: rgb(255,0,0);"><span style="color: rgb(0,0,0);"><em>systemd </em>is able to use the Hardware watchdog to check for system hangs (when the system is running or during reboot). This feature is enabled by default, with the <strong>RuntimeWatchdogSec= </strong>option in&#xa0;</span></span>the file<span>&#xa0;</span><em>system.conf</em><span>&#xa0;</span>in<span>&#xa0;</span><em>/lib/systemd/system.conf.d/00-systemd-conf.conf</em><span> :</span></p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">RuntimeWatchdogSec=30s
ShutdownWatchdogSec=10min</pre></div></div><p>When <em>RuntimeWatchdogSec</em> is not set or equal to 0, the Watchdog is not used. Setting this option to a different value allows you to use it.</p><p><em>RuntimeWatchdogSec</em><span>&#xa0;</span>defines the timeout value of the watchdog, while<span>&#xa0;</span><em>ShutdownWatchdogSec</em><span>&#xa0;</span>defines the timeout when the system is rebooted.&#xa0;For more detailed information about hardware watchdogs under<span>&#xa0;</span><em>systemd</em><span>&#xa0;</span>refer to<span>&#xa0;</span><a class="external-link" href="http://0pointer.de/blog/projects/watchdog.html" style="text-decoration: none;" rel="nofollow">http://0pointer.de/blog/projects/watchdog.html</a>.</p><p>To get more information on the IWDG internal peripheral please refer to:</p><p><a href="https://wiki.st.com/stm32mpu/wiki/IWDG_internal_peripheral" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/IWDG_internal_peripheral</a></p><p><a href="https://wiki.st.com/stm32mpu/wiki/IWDG_device_tree_configuration" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/IWDG_device_tree_configuration</a></p><p>To get more information on the IWDG Linux Kernel support and how to use and trace/debug the WDT framework, please refer to:</p><p><a href="https://wiki.st.com/stm32mpu/wiki/Watchdog_overview" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/Watchdog_overview</a></p><h1 class="auto-cursor-target" id="L876e-A4phyCORESTM32MP15xBSPManual-SpecialConnectorsPinoutConfiguration">Special Connectors Pinout Configuration</h1><p>The following special connectors are available on the phyCORE-Sargas:</p><ul><li>Raspberry PI HAT</li><li>Arduino Shields</li><li>Motor Control</li></ul><p>Those special connectors pinout can be configured in the Linux Kernel device tree overlays with the following <em>dts</em> files:</p><ul><li><em>phyboard-stm32mp1-pi-hat-extension.dts</em></li><li><em>phyboard-stm32mp1-uno-r3-extension.dts</em></li><li><em>phyboard-stm32mp1-motor-control.dts</em></li></ul><p>By default, no device tree overlays for those specific connectors are enabled.</p><ul><li>To enable/disable one of those device tree expansions, refer to <a href="#L876e.A4phyCORESTM32MP15xBSPManual-Howtoapplythedevicetreeoverlay">How to apply the device tree overlay</a>.&#xa0;</li><li>To modify and rebuild the device tree overlays (for example, to adapt the pinout configuration of one specific connector), please refer to <a href="#L876e.A4phyCORESTM32MP15xBSPManual-RebuildingtheKernel,Bootloader,orTrustedFirmware">Rebuilding the Kernel, Bootloader, or Trusted Firmware</a>.<span style="color: rgb(255,0,0);"><br /></span></li></ul><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-RapsberryPIHATConnectorX7">Rapsberry PI HAT Connector (X7)</h2><p>This connector is compatible with the pinout of the standard Raspberry Pi HAT connector (<a href="https://pinout.xyz/" class="external-link" rel="nofollow">https://pinout.xyz/</a>). The pinout can be configured by pin muxing in the following device tree overlay file: <em><strong>phyboard-stm32mp1-pi-hat-extension.dts</strong></em></p><p>Please refer to the <a href="https://www.phytec.de/cdocuments/?doc=UoA_Hw" class="external-link" rel="nofollow">L-875e.A2 phyCORE-STM32MP15x / phyBOARD-Sargas (1534.1/1517.2) Hardware Manual</a>, in <em>Raspberry Pi HAT Connector (X7) </em>chapter for the pinout of this connector.</p><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-ArduinoShieldsConnectorX3">Arduino Shields Connector (X3)</h2><p>This connector is compatible with the standard Arduino pinout connector (<a href="https://docs.arduino.cc/hardware/uno-rev3" class="external-link" rel="nofollow">https://docs.arduino.cc/hardware/uno-rev3</a>). The pinout can be configured by pin muxing in the following device tree overlay file: <em><strong>phyboard-stm32mp1-uno-r3-extension.dts</strong></em></p><p>Please refer to the <a href="https://www.phytec.de/cdocuments/?doc=UoA_Hw" class="external-link" rel="nofollow">L-875e.A2 phyCORE-STM32MP15x / phyBOARD-Sargas (1534.1/1517.2) Hardware Manual</a>, in <em>Arduino Shields Connector (X3)</em> chapter, for the pinout of this connector.</p><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-MotorControlConnectorX38">Motor Control Connector (X38)</h2><p>This connector is compatible with the pinout of STM32 standard motor control power boards. It is also possible to connect X-NUCLEO-IHMx STM32 motor control expansions using X-NUCLEO-IHM09M1 adaptor: <a href="https://www.st.com/en/ecosystems/x-nucleo-ihm09m1.html" class="external-link" rel="nofollow">https://www.st.com/en/ecosystems/x-nucleo-ihm09m1.html</a>. The pinout can be configured by pin muxing in the following device tree overlay files: <strong><em>phyboard-stm32mp1-motor-control.dts </em></strong><em>or&#xa0;</em><strong><em>phyboard-stm32mp1-motor-control<span style="color: rgb(0,0,0);">-m4</span>.dts</em></strong>.</p><p><strong><em>phyboard-stm32mp1-motor-contro<span style="color: rgb(0,0,0);">l</span></em><span style="color: rgb(0,0,0);"><em>-m4</em></span><em>.dts </em></strong>is an example of device tree configuration when signals are used by the Cortex-M4 MCU.</p><p>Please refer to the<a href="https://www.phytec.de/cdocuments/?doc=UoA_Hw" class="external-link" rel="nofollow">L-875e.A2 phyCORE-STM32MP15x / phyBOARD-Sargas (1534.1/1517.2) Hardware Manual</a>, in <em>Motor Control Connector (X38)</em> for the pinout of this connector.</p><h1 id="L876e-A4phyCORESTM32MP15xBSPManual-BSPCustomizationBSPCustomization">BSP Customization<span class="confluence-anchor-link conf-macro output-inline" id="L876e.A4phyCORESTM32MP15xBSPManual-BSPCustomization" data-hasbody="false" data-macro-name="anchor"></span></h1><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-STM32MP15xBSPDeviceTreeConcept">STM32MP15x BSP Device Tree Concept</h2><p><span>All device tree documentation can be found under:</span></p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP/build-&lt;DISTRO&gt;-&lt;MACHINE&gt;/tmp-glibc/work/&lt;MACHINE&gt;-&lt;DISTRO&gt;-linux-gnueabi/linux-stm32mp/&lt;x.y&gt;-r0/&lt;x.y&gt;/&lt;x.y.z&gt;/Documentation/devicetree/bindings</pre></div></div><p><span>&lt;x.y&gt; and &lt;x.y.z&gt; in the above path have to be replaced by the Linux Kernel version number (ex: 5.4-r0/5.4/5.4.56/).</span></p><p><span>An introduction of the device tree usage can be found in the Linux kernel: <em>linux/Documentation/devicetree/usage-model.txt</em>. </span>The device tree files are used during boot time by the Trusted Firmware (TF-A), the Bootloader (U-Boot), by the Linux kernel.</p><p><span>STM32MP documentation about the STM32MP15x Device Tree&#xa0;can be found at:</span></p><ul><li><span><a href="https://wiki.st.com/stm32mpu/wiki/Platform_configuration_overview" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/Platform_configuration_overview</a></span></li><li><span><a href="https://wiki.st.com/stm32mpu/wiki/Device_tree" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/Device_tree</a></span></li><li><a href="https://wiki.st.com/stm32mpu-ecosystem-v3/wiki/STM32MP15_device_tree" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu-ecosystem-v3/wiki/STM32MP15_device_tree</a></li></ul><p><span>As shown in the STM32MP15x device tree documentation, the device tree organization depends on whether you are using the <strong>"upstream device tree"</strong> or the <strong>device tree generated by the STM32CubeMX</strong> tool.</span></p><p><span>In this BSP customization chapter, we are presenting the "upstream device tree" organization. For the STM32CubeMX STM32MP15x device tree organization refers to <a href="#L876e.A4phyCORESTM32MP15xBSPManual-TheSTM32CubeMXtool">The STM32CubeMX tool</a>.</span></p><p><span>Note that in this STM documentation, the device tree file's name concerning the boards does not correspond to our PHYTEC boards but the concept is exactly the same. The device tree files for our boards start with "phycore" or "phyboard". Refer to the following section for the phyCORE and phyBOARD device tree file organization: <a href="#L876e.A4phyCORESTM32MP15xBSPManual-phyCORE-STM32MP15xandphyBOARD-SargasDeviceTree(Upstream)">phyCORE-STM32MP15x and phyBOARD-Sargas Device Tree (Upstream)</a>.<br /></span></p><p><u>Device tree source files:</u></p><p><strong>.dts:</strong> The device tree source (<span class="mw-lingo-term">DTS</span>) that can be processed by DTC (Device Tree Compiler) into a binary device tree called "device tree blob" <strong>(.dtb)</strong>. This device tree blob can be parsed by the embedded software components: Linux<sup></sup>Kernel, <span class="mw-lingo-term">U-Boot</span>, and <span class="mw-lingo-term">TF-A</span>.</p><p>For each SOM versions (MACHINE), it is assigned a .dts file (ex: phycore-stm32mp1-4.dts for MACHINE=phycore-stm32mp1-4).</p><p><strong>.dtsi:</strong> Source files that can be included from a <span class="mw-lingo-term">DTS</span> file.</p><p><span>For example, our <strong>phycore-stm32mp1-x</strong> DTS (phycore-stm32mp1-x.dts files) include one of the following <strong>STM32MP15</strong><strong>dtsi </strong>files (SoC specific) which are upstreamed to the communities:</span></p><p><span><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><a href= "https://wiki.phytec.com/download/attachments/519176224/image2021-2-8_15-21-45.png?version=1&amp;modificationDate=1658300847000&amp;api=v2" class="lightbox"><img class="confluence-embedded-image" draggable="false" width="800" src="https://wiki.phytec.com/download/attachments/519176224/image2021-2-8_15-21-45.png?version=1&amp;modificationDate=1658300847000&amp;api=v2" data-image-src="https://wiki.phytec.com/download/attachments/519176224/image2021-2-8_15-21-45.png?version=1&amp;modificationDate=1658300847000&amp;api=v2" data-linked-resource-id="519176239" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-2-8_15-21-45.png" data-base-url="https://wiki.phytec.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="519176224" data-linked-resource-container-version="3" alt="" style="max-width: 100%;"/></a></span></span></p><p><u>Example for our MACHINE "phycore-stm32mp1-3" (equipped with a STM32MP157CAC SoC):</u></p><p><strong>phycore-stm32mp1-3.dts</strong> includes the following STM32MP15 SoC dtsi:&#xa0; stm32mp157.dtsi + stm32mp15xc.dtsi + stm32mp15-pinctrl.dtsi + stm32mp15xxac-pinctrl.dtsi</p><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-STM32MP1PinMuxing"><span style="color: rgb(0,0,0);">STM32MP1 Pin Muxing</span></h2><p><span style="color: rgb(0,0,0);">The STM32MP1 SoC contains many peripheral interfaces. In order to reduce package size and lower overall system cost while maintaining maximum functionality, many of the&#xa0;STM32MP1 terminals can multiplex up to 16 signal functions. </span><span style="color: rgb(0,0,0);">The&#xa0;STM32MP1 BSP is based on the&#xa0;<em>pin controller</em>&#xa0;Linux kernel framework (<strong><em>pinctrl)&#xa0;</em></strong>with a specific <strong><em>pinctrl-stm32</em></strong> driver. The configuration is performed in the <strong>device tree source (DTS)</strong>.</span></p><p><span style="color: rgb(0,0,0);">Please refer to ST documentation to learn about <em><strong>pinctrl&#xa0;</strong></em>and how to configure it in the device tree:</span></p><ul><li><span style="color: rgb(0,0,0);"><a href="https://wiki.st.com/stm32mpu/wiki/Pinctrl_overview" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/Pinctrl_overview</a></span></li><li><span style="color: rgb(0,0,0);"><a href="https://wiki.st.com/stm32mpu/wiki/Pinctrl_device_tree_configuration" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/Pinctrl_device_tree_configuration</a></span></li></ul><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-phyCORE-STM32MP15xandphyBOARD-SargasDeviceTreeUpstreamphyCORE-STM32MP15xandphyBOARD-SargasDeviceTreeUpstream"><span style="color: rgb(0,0,0);">phyCORE-STM32MP15x and phyBOARD-Sargas Device Tree (Upstream)</span><span style="color: rgb(0,0,0);"><span class="confluence-anchor-link conf-macro output-inline" id="L876e.A4phyCORESTM32MP15xBSPManual-phyCORE-STM32MP15xandphyBOARD-SargasDeviceTree(Upstream)" data-hasbody="false" data-macro-name="anchor"></span></span></h2><p><span style="color: rgb(0,0,0);">As seen in previous section, the<strong> DTS </strong>of the <strong>phycore-stm32mp1-x </strong>machines (<strong>phycore-stm32mp1-x.dts</strong>) contain the specific SoC <em>dtsi </em>files. In addition to those .<em>dtsi</em>, other <em>dtsi </em>are included to specify the Board Hardware specificities, which is split into two boards; the SOM and the Baseboard (one <em>dtsi </em>per board):&#xa0; </span></p><ul><li><span style="color: rgb(0,0,0);"><u>SOM:</u>&#xa0; <strong>phycore-stm32mp15-som.dtsi </strong>=&gt; contains the Hardware specificities common to all the <strong>phyCORE-STM32MP15x</strong> SOM declinations (machines)<br /></span></li><li><span style="color: rgb(0,0,0);"><u>Baseboard:</u>&#xa0; <strong>phyboard-stm32mp1.dtsi</strong> =&gt; contains the Hardware configuration of <strong>the phyBOARD-Sargas</strong></span></li></ul><div class="alert alert-warning" data-hasbody="true" data-macro-name="note"><p class="title" style="margin-left: 23px;">Note</p><i class="fa fa-exclamation-triangle" style="float:left; margin-right: 10px;"></i><div class="confluence-information-macro-body"><p>The hardware differences between the different <span style="color: rgb(0,0,0);"><strong>phyCORE-STM32MP15x</strong></span> machines are set in the <span style="color: rgb(0,0,0);"><strong>phycore-stm32mp1-x.dts </strong>files. This is done including different <em>ddr </em>configuration <em>dtsi </em>files (in U-boot and TF-A only), and enabling/disabling SoC features (like GPU or CAN) or SOM devices (like eMMC/NAND).</span></p></div></div><p><span style="color: rgb(0,0,0);">SOM and Baseboard dtsi includes others .dtsi files (for pin control for example).</span></p><p>Below is the complete list of our PHYTEC custom DTS files (.dts &amp; .dtsi) for the phyCORE-STM32MP15x and phyBOARD-Sargas, used by each software component (Linux Kernel, U-Boot, and TF-A).</p><p>To know how to modify those sources and rebuild the BSP image, refer to the next sections.</p><div class="frame table-responsive table-sm table-hover mb-5" style="max-height: 100% !Important;"><table class="confluenceTable ce-table" style=""><colgroup><col style="width: 7.25851%;"/><col style="width: 8.36025%;"/><col style="width: 18.924%;"/><col style="width: 20.0257%;"/><col style="width: 16.3316%;"/><col style="width: 12.832%;"/><col style="width: 16.2668%;"/></colgroup><tbody><tr><td class="highlight-grey confluenceTd" style="text-align: center;" rowspan="2" data-highlight-colour="grey"><strong>Sources</strong></td><td class="highlight-grey confluenceTd" style="text-align: center;" rowspan="2" data-highlight-colour="grey"><strong>DTS files path</strong></td><td class="highlight-grey confluenceTd" style="text-align: center;" rowspan="2" data-highlight-colour="grey"><strong>Machine (.dts)</strong></td><td class="highlight-grey confluenceTd" style="text-align: center;" colspan="2" data-highlight-colour="grey"><strong>phyCORE-STM32MP15x .dtsi files</strong></td><td class="highlight-grey confluenceTd" style="text-align: center;" colspan="2" data-highlight-colour="grey"><strong><strong title="">phyBOARD-Sargas .dtsi files<br /></strong></strong></td></tr><tr><td class="highlight-grey confluenceTd" style="text-align: left;" colspan="1" data-highlight-colour="grey"><p title=""><strong>peripheral configuration</strong></p></td><td class="highlight-grey confluenceTd" style="text-align: center;" colspan="1" data-highlight-colour="grey"><strong>pin control</strong></td><td class="highlight-grey confluenceTd" style="text-align: center;" colspan="1" data-highlight-colour="grey"><strong title=""><strong>peripheral c</strong>onfiguration</strong></td><td class="highlight-grey confluenceTd" style="text-align: center;" colspan="1" data-highlight-colour="grey"><strong title=""><strong>pin control</strong></strong></td></tr><tr><td class="highlight-grey confluenceTd" style="text-align: center;" data-highlight-colour="grey"><p><strong>Linux</strong></p><p><strong>Kernel</strong></p></td><td style="text-align: center;" class="confluenceTd"><p>arch/arm/boot/dts/</p></td><td colspan="1" class="confluenceTd"><div class="content-wrapper"><p><u>Default:</u></p><p>phycore-stm32mp1-x.dts</p><p><u>Cortex-M4 example</u><span class="simple-cite-cite conf-macro output-inline" data-cite-id="3" data-hasbody="true" data-macro-name="single-cite" style="font-weight: bold;"><span class="confluence-anchor-link" id="cite-3-1" style="font-size:0px"></span><a href="#cite-summary-3-1"><sup>[3]</sup></a></span>:</p><p>phycore-stm32mp1-x-m4-examples.dts</p><p><u>Cortex-A7 example</u><span class="simple-cite-cite conf-macro output-inline" data-cite-id="4" data-hasbody="true" data-macro-name="single-cite" style="font-weight: bold;"><span class="confluence-anchor-link" id="cite-4-1" style="font-size:0px"></span><a href="#cite-summary-4-1"><sup>[4]</sup></a></span>:</p><p>phycore-stm32mp1-x-a7-examples.dts</p></div></td><td colspan="1" class="confluenceTd"><p>phycore-stm32mp15-som.dtsi</p><p><br /></p></td><td colspan="1" class="confluenceTd">phycore-stm32mp15-pinctrl.dtsi</td><td colspan="1" class="confluenceTd"><p>phyboard-stm32mp1.dtsi</p></td><td colspan="1" class="confluenceTd"><p>phyboard-stm32mp1-pinctrl.dtsi</p><p><br /></p></td></tr><tr><td class="highlight-grey confluenceTd" style="text-align: center;" data-highlight-colour="grey"><strong>U-Boot</strong></td><td style="text-align: center;" class="confluenceTd">arch/arm/dts</td><td colspan="1" class="confluenceTd">phycore-stm32mp1-x.dts</td><td colspan="1" class="confluenceTd"><p><strong>Copied from kernel:</strong></p><p>phycore-stm32mp1-x.dts</p><p>phycore-stm32mp15-som.dtsi</p><p><strong>Specific to u-boot:</strong></p><p>phycore-stm32mp1-x-u-boot.dtsi</p><p>phycore-stm32mp1-common-u-boot.dtsi</p><p><strong>Specific to u-boot:</strong></p><p>phycore-stm32mp15-ddr3-x-y-z.dtsi <strong>(same as TF-A)</strong></p></td><td colspan="1" class="confluenceTd"><p>phycore-stm32mp15-pinctrl.dtsi</p><p><strong>(copied from kernel)</strong></p></td><td colspan="1" class="confluenceTd"><p>same dtsi files as kernel</p><p><strong>(copied from kernel)</strong></p></td><td colspan="1" class="confluenceTd"><p>same dtsi files as kernel</p><p><strong>(copied from kernel)</strong></p></td></tr><tr><td class="highlight-grey confluenceTd" style="text-align: center;" colspan="1" data-highlight-colour="grey"><strong>TF-A</strong></td><td style="text-align: center;" colspan="1" class="confluenceTd">fdts</td><td colspan="1" class="confluenceTd">phycore-stm32mp1-x.dts</td><td style="text-align: left;" class="confluenceTd"><p><strong>Copied from kernel:</strong></p><p>phycore-stm32mp1-x.dts</p><p><strong>Partially copied from kernel:</strong></p><p>phycore-stm32mp15-som.dtsi</p><p><strong>Specific to TF-A:<br /></strong></p><p>phycore-stm32mp15-ddr3-x-y-z.dtsi <strong>(same as u-boot)</strong></p></td><td style="text-align: left;" class="confluenceTd"><p>phycore-stm32mp15-pinctrl.dtsi</p></td><td style="text-align: center;" class="confluenceTd"><p>-</p></td><td colspan="1" class="confluenceTd"><p style="text-align: center;">-</p></td></tr></tbody></table></div><p class="auto-cursor-target"><table class="conf-macro output-block" data-hasbody="false" data-macro-name="cite-summary" style="background-color: #F5F5F5 !Important; border-style: solid; border-width: 1px; border-color: #D0D2D3;"><tbody><tr><td align="right" style="font-weight: bold; vertical-align:top; min-width:50px;"> [3] </td><td><div class="simple-cite-render simple-cite-summary-cite" style="display:inline" data-cite-id="3" data-reference="" data-render-task="" data-cite-rendered="true" data-tooltip="false" data-citation-override="false"><p style="display:inline">Dedicated device tree configuration for <strong>Cortex-M4 </strong>examples, which allows the allocation of peripherals and pins assignments related to M4 examples. By default, this device tree is not used by the kernel, but it can be loaded instead of the default one, selecting the boot mode <strong>phycore-stm32mp1-x-m4-examples</strong> during the <span class="mw-lingo-term">U-Boot</span> stage.</p><aui-spinner class="simple-cite-spinner" size="small" style="display:none"></aui-spinner></div></td></tr><tr><td align="right" style="font-weight: bold; vertical-align:top; min-width:50px;"> [4] </td><td><div class="simple-cite-render simple-cite-summary-cite" style="display:inline" data-cite-id="4" data-reference="" data-render-task="" data-cite-rendered="true" data-tooltip="false" data-citation-override="false"><p style="display:inline">Dedicated device tree configuration for <strong>Cortex-A7 </strong>examples, which allows the allocation of peripherals and pins assignments related to A7 examples. By default, this device tree is not used by the kernel, but it can be loaded instead of the default one, selecting the boot mode <strong>phycore-stm32mp1-x-a7-examples</strong> during the <span class="mw-lingo-term">U-Boot</span> stage.</p><aui-spinner class="simple-cite-spinner" size="small" style="display:none"></aui-spinner></div></td></tr></tbody></table></p><div class="alert alert-success" data-hasbody="true" data-macro-name="tip"><p class="title" style="margin-left: 23px;">Tip</p><i class="fa fa-check-circle" style="float:left; margin-right: 10px;"></i><div class="confluence-information-macro-body"><ul><li>For more details on the phyCORE-STM32MP15x and phyBOARD-Sargas pin muxing configuration on the BSP, you can refer to the Hardware Manual and the Pinmuxing Excel file that can be downloaded at <a href="https://www.phytec.de/produkte/system-on-modules/phycore-stm32mp15x/#downloads/" class="external-link" rel="nofollow">https://www.phytec.de/produkte/system-on-modules/phycore-stm32mp15x/#downloads/</a></li><li>When customizing the BSP, the device tree (DTS) can also be automatically generated thanks to the <span style="color: rgb(0,0,0);">STM32CubeMX tool</span> (<a href="#L876e.A4phyCORESTM32MP15xBSPManual-TheSTM32CubeMXtool">The STM32CubeMX tool</a>)</li></ul></div></div><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-phyBOARD-SargasDeviceTreeOverlayphyBOARD-SargasDeviceTreeOverlay"><span style="color: rgb(0,0,0);">phyBOARD-Sargas Device Tree Overlay </span><span style="color: rgb(0,0,0);"><span class="confluence-anchor-link conf-macro output-inline" id="L876e.A4phyCORESTM32MP15xBSPManual-phyBOARD-SargasDeviceTreeOverlay" data-hasbody="false" data-macro-name="anchor"></span></span></h2><p><span style="color: rgb(0,0,0);">phyBOARD-Sargas add-ons (expansions, phyCAM, etc..), or specific connector configuration (like pin muxing examples for Raspberry PI HAT or Arduino Uno connectors) are managed by <strong>Device Tree Overlay</strong><strong>(</strong><strong>DTO).</strong></span></p><p><span style="color: rgb(0,0,0);">DTOs are device tree blob fragments that allow specific parts of a Kernel device tree to be overridden on-the-fly, before booting the Kernel. This allow to make small changes without defining a new complete device tree or modifying the original one.<strong><br /></strong></span></p><p><span style="color: rgb(0,0,0);">The phyBOARD-Sargas DTO defined the necessary Kernel device tree adaptation for the specific add-ons/connectors config. One or more DTO can be applied by u-boot over the machine device tree (DTB) before booting the kernel (through <strong><em>boot.scr.cmd</em></strong> script). </span></p><p><span style="color: rgb(0,0,0);">phyBOARD-Sargas DTO source files (.dts) are stored aside the others <strong>kernel</strong> device tree source files, in a subdirectory called "overlays", : <em><strong>arch/arm/boot/dts/overlays/ </strong></em><em><strong><br /></strong></em></span></p><p><span style="color: rgb(0,0,0);">Like classic device tree, the Device Tree Overlay sources are processed by DTC (Device Tree Compiler), but into a binary with <em><strong>.dtbo</strong></em> extension. Those binaries are then stored on target under: <strong><em>/boot/overlays</em></strong></span></p><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-ListofphyBOARD-SargasDeviceTreeOverlaysListofphyBOARD-Sargasdevicetreeoverlays"><span style="color: rgb(0,0,0);">List of phyBOARD-Sargas Device Tree Overlays</span><span style="color: rgb(0,0,0);"><span class="confluence-anchor-link conf-macro output-inline" id="L876e.A4phyCORESTM32MP15xBSPManual-ListofphyBOARD-Sargasdevicetreeoverlays" data-hasbody="false" data-macro-name="anchor"></span></span></h3><div class="frame table-responsive table-sm table-hover mb-5" style="max-height: 100% !Important;"><table class="confluenceTable ce-table" style=""><colgroup><col style="width: 20.4875%;"/><col style="width: 26.9346%;"/><col style="width: 52.5779%;"/></colgroup><tbody><tr><th class="" style="background-color: #F4F5F7 !Important;"><p>Category</p></th><th class="" style="background-color: #F4F5F7 !Important;"><p>Device Tree Overlay Name</p></th><th class="" style="background-color: #F4F5F7 !Important;"><p>Description</p></th></tr><tr><td class="highlight-grey confluenceTd" rowspan="4" data-highlight-colour="grey"><p title=""><span style="color: rgb(0,0,0);"><strong>Displays</strong></span></p><p title=""><span style="color: rgb(0,0,0);">(select only one display interface at a time)</span></p></td><td class="confluenceTd"><p>phyboard-stm32mp1-peb-av02-lcd</p></td><td class="confluenceTd"><p>PEB-AV-02 LCD expansion board.</p></td></tr><tr><td class="confluenceTd"><p>phyboard-stm32mp1-peb-av01-hdmi</p></td><td class="confluenceTd"><p>PEB-AV-01 HDMI expansion board.</p><p><strong>if HDMI machine feature enabled </strong>(enabled by default for all phyCORE-STM32MP15x machines).</p></td></tr><tr><td class="confluenceTd"><p>phyboard-stm32mp1-dsi-lcd-mb1407</p></td><td class="confluenceTd"><p>MB1407 MIPI DSI screen.</p><p><strong>if MIPI-DSI machine feature enabled </strong>(not available for all phyCORE-STM32MP15x machines).</p></td></tr><tr><td class="confluenceTd"><p>phyboard-stm32mp1-dsi-rpi-official-display</p></td><td class="confluenceTd"><p>Official Raspberry Pi Touch 7" Display.</p><p><strong>if MIPI-DSI machine feature enabled </strong>(not available for all phyCORE-STM32MP15x machines).</p></td></tr><tr><td class="highlight-grey confluenceTd" rowspan="4" data-highlight-colour="grey"><p title=""><span style="color: rgb(0,0,0);"><strong>Specific connectors</strong></span></p><p title=""><span style="color: rgb(0,0,0);">(pin control and config examples)</span></p></td><td class="confluenceTd"><p>phyboard-stm32mp1-pi-hat-extension</p></td><td class="confluenceTd"><p>Raspberry PI HAT connector configuration example.</p><p>Contains sdmmc3 config examples.</p></td></tr><tr><td class="confluenceTd"><p>phyboard-stm32mp1-uno-r3-extension</p></td><td class="confluenceTd"><p>Arduino Uno R3 connector configuration example.</p><p>Contains <strong>Timers</strong> Pinctrl and configuration examples. Note that&#xa0; other Timers and ADCs.</p><p>for the Arduino Shield connector are settled in "phyboard-stm32mp1-motor-control.dtso" overlay.</p></td></tr><tr><td class="confluenceTd"><p>phyboard-stm32mp1-motor-control</p></td><td class="confluenceTd"><p>ST motor control connector configuration example for Cortex-A7.</p><p>Contains Pinctrl examples for<strong> Timers and ADC </strong>when managed by Linux (Cortex-A7).</p><p><strong>(not compatible with PEB-AV-01/02)</strong>.</p></td></tr><tr><td class="confluenceTd"><p>phyboard-stm32mp1-motor-control-m4</p></td><td class="confluenceTd"><p>ST motor control connector configuration example for Cortex-M4.</p><p>Contains Pinctrl examples for <strong>Timers and ADC </strong>when managed by Cortex-M4.</p><p><strong>(not compatible with PEB-AV-01/02)</strong>.</p></td></tr><tr><td class="highlight-grey confluenceTd" rowspan="4" data-highlight-colour="grey"><p><span style="color: rgb(0,0,0);" title=""><strong>Wireless expansions</strong></span></p></td><td class="confluenceTd"><p>phyboard-stm32mp1-peb-wlbt-05-wlan</p></td><td class="confluenceTd"><p>PEB-AV-05<strong></strong>expansion board - DT overlay to activate WLAN function.</p><p><strong>if WIFI machine feature enabled </strong>(enabled by default for all phyCORE-STM32MP15x machines).</p></td></tr><tr><td class="confluenceTd"><p>phyboard-stm32mp1-peb-wlbt-05-bluetooth-usart3</p></td><td class="confluenceTd"><p>PEB-AV-05<strong></strong>expansion board - DT overlay to activate Bluetooth function, through USART3.</p><p>(no CAN transceiver and no 2nd debug FTDI available on baseboard).</p><p><strong>if Bluetooth machine feature enabled </strong>(enabled by default for all phyCORE-STM32MP15x machines).</p></td></tr><tr><td class="confluenceTd"><p>phyboard-stm32mp1-peb-wlbt-05-bluetooth-usart1</p></td><td class="confluenceTd"><p>PEB-AV-05<strong></strong>expansion board - DT overlay to activate Bluetooth function, through USART1.</p><p>(no RS232 transceiver available on baseboard).</p><p><strong>if Bluetooth machine feature enabled</strong><strong></strong>(enabled by default for all phyCORE-STM32MP15x machines).</p></td></tr><tr><td class="confluenceTd"><p>phyboard-stm32mp1-pi-hat-redbear</p></td><td class="confluenceTd"><p>Red Bear IoT pHAT (WLAN and Bluetooth)</p><p><strong>if WIFI or Bluetooth machine feature enabled</strong><strong></strong>(enabled by default for all phyCORE-STM32MP15x machines).</p></td></tr><tr><td class="highlight-grey confluenceTd" rowspan="7" data-highlight-colour="grey"><p><span style="color: rgb(0,0,0);" title=""><strong>phyCAM-P</strong></span></p><p><span style="color: rgb(0,0,0);" title=""><strong><br /></strong></span></p><p><span style="color: rgb(0,0,0);" title=""><strong><br /></strong></span></p><p><span style="color: rgb(0,0,0);" title=""><strong><br /></strong></span></p></td><td class="confluenceTd"><p>phyboard-stm32mp1-pcm939l-phycam-vm010-bw-8bits</p></td><td class="confluenceTd"><p>phyCAM-P <strong>VM-010 B&amp;W</strong> connected with <strong>8bits</strong> data bus (phyBOARD-Sargas <strong>PCM-939L</strong> only).</p></td></tr><tr><td class="confluenceTd">phyboard-stm32mp1-pcm939l-phycam-vm010-col-8bits</td><td class="confluenceTd"><p>phyCAM-P <strong>VM-010 COL</strong> connected with <strong>8bits</strong> data bus (phyBOARD-Sargas <strong>PCM-939L</strong> only).</p></td></tr><tr><td class="confluenceTd"><p>phyboard-stm32mp1-pcm939-phycam-vm010-bw-10bits</p></td><td class="confluenceTd"><p>phyCAM-P <strong>VM-010 B&amp;W</strong> connected with <strong>10bits</strong> data bus (phyBOARD-Sargas <strong>PCM-939</strong> only).</p></td></tr><tr><td class="confluenceTd"><p>phyboard-stm32mp1-pcm939-phycam-vm010-col-10bits</p></td><td class="confluenceTd"><p>phyCAM-P <strong>VM-010 COL</strong> connected with <strong>10bits</strong> data bus (phyBOARD-Sargas <strong>PCM-939</strong> only).</p></td></tr><tr><td class="confluenceTd"><p>phyboard-stm32mp1-pcm939l-phycam-vm016-8bits</p></td><td class="confluenceTd"><p>phyCAM-P <strong>VM-016 B&amp;W or COL</strong> connected with <strong>8bits</strong> data bus (when using phyBOARD-Sargas<strong> PCM-939L</strong>).</p></td></tr><tr><td class="confluenceTd"><p>phyboard-stm32mp1-pcm939-phycam-vm016-8bits</p></td><td class="confluenceTd"><p>phyCAM-P <strong>VM-016 B&amp;W or COL</strong> connected with <strong>8bits</strong> data bus (when using phyBOARD-Sargas <strong>PCM-939</strong>).</p></td></tr><tr><td class="confluenceTd"><p>phyboard-stm32mp1-pcm939-phycam-vm016-10bits</p></td><td class="confluenceTd"><p>phyCAM-P <strong>VM-016 B&amp;W or COL</strong> connected with <strong>10bits</strong> data bus (phyBOARD-Sargas <strong>PCM-939</strong> only).</p></td></tr><tr><td class="highlight-grey confluenceTd" data-highlight-colour="grey"><p><span style="color: rgb(0,0,0);" title=""><strong>RS485</strong></span></p></td><td class="confluenceTd"><p>phyboard-stm32mp1-rs485</p></td><td class="confluenceTd"><p>DT overlay to enable RS485 at boot time.</p></td></tr></tbody></table></div><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-HowtoApplytheDeviceTreeOverlayHowtoapplythedevicetreeoverlay"><span style="color: rgb(0,0,0);">How to Apply the Device Tree Overlay</span><span class="confluence-anchor-link conf-macro output-inline" id="L876e.A4phyCORESTM32MP15xBSPManual-Howtoapplythedevicetreeoverlay" data-hasbody="false" data-macro-name="anchor"></span></h3><p><span style="color: rgb(0,0,0);">The board must be booted and accessible through a remote console. Device tree overlays can be applied either from u-boot or from userspace:</span></p><h4 id="L876e-A4phyCORESTM32MP15xBSPManual-ApplyingDTOfromuserspace"><span style="color: rgb(0,0,0);">Applying DTO from userspace</span></h4><ul><li>Edit the /boot/overlays/overlays.txt file</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">target$ vi /boot/overlays/overlays.txt </pre></div></div><p style="margin-left: 40.0px;">This file specifies the DT overlays to apply with the following syntax:</p><p style="margin-left: 40.0px;"><em>overlay=aa bb cc dd</em></p><p style="margin-left: 40.0px;">- aa, bb, cc, dd correspond to a device tree name file (without extension) located on /overlays/ directory:</p><p style="margin-left: 40.0px;">/overlays/aa.dtbo<br />/overlays/bb.dtbo<br />/overlays/cc.dtbo<br />/overlays/dd.dtbo</p><p style="margin-left: 40.0px;">Edit the file to enable/disable any DTO located in the /overlays/ directory.</p><div class="alert alert-success" data-hasbody="true" data-macro-name="tip"><p class="title" style="margin-left: 23px;">Tip</p><i class="fa fa-check-circle" style="float:left; margin-right: 10px;"></i><div class="confluence-information-macro-body"><p>You will need to use the following basic <strong><em>vi</em></strong> command:</p><p><em>&lt;Inser&gt; </em>or<em> &lt;i&gt; =&gt; </em>to enter Edit mode</p><p><em>Esc =&gt; </em>to escape the Edit mode</p><p><em>:wq =&gt;&#xa0;</em> save the modifications and quit the file</p><p>:q! =&gt; quit the file without saving</p></div></div><ul><li class="auto-cursor-target">force filesystem sync:</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">target$ sync</pre></div></div><ul><li>reboot the board:</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">target$ reboot</pre></div></div><h4 id="L876e-A4phyCORESTM32MP15xBSPManual-ApplyingDTOfromu-boot"><span style="color: rgb(0,0,0);">Applying DTO from u-boot</span></h4><p>Device tree overlays to apply can also be set on u-boot with the following commands:</p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">STM32MP&gt; setenv overlay 'aa bb cc'
STM32MP&gt; saveenv</pre></div></div><p>With aa, bb, cc, dd corresponding to a device tree name file (without extension) located on /overlays/ directory:</p><p>/overlays/aa.dtbo<br />/overlays/bb.dtbo<br />/overlays/cc.dtbo<br />/overlays/dd.dtbo</p><p>If you want to modify an existing overlay variable, you can use the following command:</p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">STM32MP&gt; editenv overlay</pre></div></div><p>Once you have save the u-boot environments with "<em>saveenv</em>", you can continue the normal boot with the u-boot command "boot".</p><div class="alert alert-warning" data-hasbody="true" data-macro-name="note"><p class="title" style="margin-left: 23px;">Note</p><i class="fa fa-exclamation-triangle" style="float:left; margin-right: 10px;"></i><div class="confluence-information-macro-body"><p>This method will create the "overlay" u-boot env variable and in this case, the content of /boot/overlays/overlays.txt will be ignored.</p><p>To use the overlays.txt file instead, remove the "overlay" env var with following u-boot command: <em>setenv overlay</em></p></div></div><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-CreatingCustomYoctoLayerCreatingCustomYoctoLayer"><span style="color: rgb(0,0,0);">Creating Custom Yocto Layer</span><span style="color: rgb(0,0,0);"><span class="confluence-anchor-link conf-macro output-inline" id="L876e.A4phyCORESTM32MP15xBSPManual-CreatingCustomYoctoLayer" data-hasbody="false" data-macro-name="anchor"></span></span></h2><p>Creating your layer should be one of the first tasks when customizing the BSP. In the following chapter, we have an embedded project called "racer" which we will implement using the <em>OpenSTLinux</em><span>&#xa0;</span>distribution.</p><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-CreatetheLayerCreatethelayer">Create the Layer<span class="confluence-anchor-link conf-macro output-inline" id="L876e.A4phyCORESTM32MP15xBSPManual-Createthelayer" data-hasbody="false" data-macro-name="anchor"></span></h3><p>First, we need to create a new layer. <em>Yocto</em><span>&#xa0;</span>provides a script for that. If you set up the BSP and the shell is ready, type:</p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP/build-&lt;DISTRO&gt;-&lt;MACHINE&gt;$&#xa0;bitbake-layers create-layer meta-racer</pre></div></div><p class="auto-cursor-target"><span style="color: rgb(37,37,37);">The default options are fine for now. Move the layer to the source directory:</span></p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP/build-&lt;DISTRO&gt;-&lt;MACHINE&gt;$&#xa0;mv meta-racer ../layers/</pre></div></div><p class="auto-cursor-target"><span style="color: rgb(37,37,37);">Create a&#xa0;</span><em>Git</em><span style="color: rgb(37,37,37);">&#xa0;repository in this layer to track your changes:</span></p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP/build-&lt;DISTRO&gt;-&lt;MACHINE&gt;$&#xa0;cd ../layers/meta-racer
host:~/PHYTEC_STM32MP1_BSP/layers/meta-racer$&#xa0;git init &amp;&amp; git add . &amp;&amp; git commit -s -m "create meta-racer"</pre></div></div><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-AddtheLayertotheBSPBuildDependency">Add the Layer to the BSP Build Dependency</h3><p class="auto-cursor-target"><span style="color: rgb(37,37,37);">Now you can add the layer directly to your build-<em>&lt;DISTRO&gt;-&lt;MACHINE&gt;/conf/bblayers.conf</em>:</span></p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">BBLAYERS += "${OEROOT}/layers/meta-racer"</pre></div></div><p class="auto-cursor-target"><span style="color: rgb(37,37,37);">or with a script provided by&#xa0;</span><em>Yocto</em><span style="color: rgb(37,37,37);">:</span></p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP/layers/meta-racer$&#xa0;cd ../../build-&lt;DISTRO&gt;-&lt;MACHINE&gt;
host:~/PHYTEC_STM32MP1_BSP/build-&lt;DISTRO&gt;-&lt;MACHINE&gt;$ bitbake-layers add-layer ../layers/meta-racer</pre></div></div><div class="alert alert-success" data-hasbody="true" data-macro-name="tip"><p class="title" style="margin-left: 23px;">Tip</p><i class="fa fa-check-circle" style="float:left; margin-right: 10px;"></i><div class="confluence-information-macro-body"><p>Further resources: <a href="https://wiki.st.com/stm32mpu/wiki/How_to_create_a_new_open_embedded_layer" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/How_to_create_a_new_open_embedded_layer</a></p></div></div><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-ConfiguretheKernelthroughMenuconfigConfigurethekernelthroughMenuconfig"><span style="color: rgb(0,0,0);">Configure the Kernel through <em>Menuconfig</em></span><span style="color: rgb(0,0,0);"><span class="confluence-anchor-link conf-macro output-inline" id="L876e.A4phyCORESTM32MP15xBSPManual-ConfigurethekernelthroughMenuconfig" data-hasbody="false" data-macro-name="anchor"></span></span></h2><p><span style="color: rgb(0,0,0);">The process of building a kernel has two parts: configuring the kernel options and building the source with those options. For your BSP customization, you may have to change the kernel options. This section describes how to do it.</span></p><ul><li><span style="color: rgb(0,0,0);">Start the Linux kernel configuration menu:</span></li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP/build-&lt;DISTRO&gt;-&lt;MACHINE&gt;$ bitbake linux-stm32mp -c menuconfig</pre></div></div><ul><li><span style="color: rgb(0,0,0);">Navigate forward or backward directly between feature</span><ul><li><span style="color: rgb(0,0,0);">un/select, modify feature(s) you want</span></li><li><span style="color: rgb(0,0,0);">When the configuration is OK: exit and save the new configuration</span></li></ul></li></ul><div class="alert alert-success" data-hasbody="true" data-macro-name="tip"><p class="title" style="margin-left: 23px;">Tip</p><i class="fa fa-check-circle" style="float:left; margin-right: 10px;"></i><div class="confluence-information-macro-body"><p><u><span style="color: rgb(0,0,0);">useful Menuconfig keys to know:</span></u><br /><span style="color: rgb(0,0,0);"><strong>enter</strong>: enter in <em>config </em>subdirectory</span><br /><span style="color: rgb(0,0,0);"><strong>space</strong>: hit several times to either select [*], select in module [m], or unselect [ ]&#xa0;</span><br /><span style="color: rgb(0,0,0);"><strong>/</strong>: to search for a keyword, this is useful to navigate in the tree</span><br /><span style="color: rgb(0,0,0);"><strong>?</strong>: to have more information on the selected line</span></p></div></div><ul><li class="auto-cursor-target"><span style="color: rgb(0,0,0);">After saving et exiting the <em>menuconfig</em>, the kernel the modifications made are only temporary. Only the kernel configuration file (<em>.config</em>) in the kernel build directory is updated. It is located under:</span></li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP/build-&lt;DISTRO&gt;-&lt;MACHINE&gt;/tmp-glibc/work/&lt;MACHINE&gt;-ostl-linux-gnueabi/linux-stm32mp/&lt;x.y&gt;-r0/build/</pre></div></div><ul><li class="auto-cursor-target"><span style="color: rgb(0,0,0);">Your</span> modifications will be taken into account if the kernel is rebuilt from this point (without clean), but it will not be permanent (not in the Linux Kernel source directory). To save it, create a new configuration fragment that will contain only your configuration changes:</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP/build-&lt;DISTRO&gt;-&lt;MACHINE&gt;$ bitbake linux-stm32mp -c diffconfig</pre></div></div><ul><li>The fragment is generated under:</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP/build-&lt;DISTRO&gt;-&lt;MACHINE&gt;/tmp-glibc/work/phycore_stm32mp1_x-ostl-linux-gnueabi/linux-stm32mp/&lt;x.y&gt;-r0/fragment.cfg</pre></div></div><ul><li>You can temporarily save and rename this fragment to your home folder (for example):</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP/build-&lt;DISTRO&gt;-&lt;MACHINE&gt;$ cp tmp-glibc/work/phycore_stm32mp1_x-ostl-linux-gnueabi/linux-stm32mp/&lt;x.y&gt;-r0/fragment.cfg ~/&lt;custom-fragment&gt;.cfg</pre></div></div><ul><li>This configuration fragment file has to be added to <span style="color: rgb(0,0,0);">the <em>linux-stm32mp_%.bbappend</em> yocto recipe (see&#xa0;<a href="#L876e.A4phyCORESTM32MP15xBSPManual-AddingKernelconfigurationfragment">Adding Kernel configuration fragment</a>)</span></li><li>Without using the new config fragment file, you can temporarily test your kernel configurations changes (build without clean) using the temporary method: <a href="#L876e.A4phyCORESTM32MP15xBSPManual-Updatingthekernel/devicetreeonrunningtarget(temporarymethod)">Updating the kernel/device tree on running target (temporary method)</a></li><li>If you need to remove/modify your kernel configuration changes previously made, you have to restart from a clean Linux Kernel build:</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP/build-&lt;DISTRO&gt;-&lt;MACHINE&gt;$ bitbake linux-stm32mp -c cleansstate</pre></div></div><p>With this clean, when using <em>bitbake diffconfig </em>command again, it will generate a new fragment comparing the new changes made from the default Linux Kernel configuration.&#xa0;</p><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-PatchKernel,Bootloader,orTrustedFirmware"><span style="color: rgb(37,37,37);">Patch Kernel, Bootloader, or Trusted Firmware</span></h2><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-ModifytheSourceswithdevtool"><span style="color: rgb(0,0,0);">Modify the Sources with <em>devtool </em></span></h3><p>Instead of using the standard PHYTEC versions of kernel, bootloader, or trusted firmware which are provided in the Yocto recipes, you can modify the source code to build your customized BSP.</p><p>Modifying the kernel device tree is necessary when customizing your own application/baseboard (ex: pin muxing modification).&#xa0;</p><p><em>Devtool</em> is a set of helper scripts to enhance the user workflow of Yocto. It is available as soon as you set up your shell environment. <em>Devtool</em> can be used to:</p><ul><li>modify existing sources</li><li>integrate software projects into your build setup</li><li>build software and deploy software modifications to your target</li></ul><p><span style="color: rgb(0,0,0);"><em>Devtool</em> command to modify an existing recipe:</span></p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">devtool modify -x &lt;recipename&gt; [&lt;directory&gt;]</pre></div></div><ul><li><span style="color: rgb(0,0,0);">&lt;recipename&gt;: corresponding recipe names for kernel, bootloader, or trusted firmware are:&#xa0;</span></li></ul><div class="frame table-responsive table-sm table-hover mb-5" style="max-height: 100% !Important;"><table class="confluenceTable ce-table" style=""><colgroup><col style="width: 53.5385%;"/><col style="width: 46.4615%;"/></colgroup><tbody><tr><td class="highlight-grey confluenceTd" colspan="1" data-highlight-colour="grey"><strong>Trusted Firmware</strong></td><td colspan="1" class="confluenceTd"><em>tf-a-stm32mp</em></td></tr><tr><td class="highlight-grey confluenceTd" colspan="1" data-highlight-colour="grey"><strong>Bootloader</strong></td><td colspan="1" class="confluenceTd"><em>u-boot-stm32mp</em></td></tr><tr><td class="highlight-grey confluenceTd" data-highlight-colour="grey"><strong>Kernel</strong></td><td class="confluenceTd"><em>linux-stm32mp</em></td></tr></tbody></table></div><ul><li>&lt;directory&gt;: optional parameter to specify the path where the source files will be located. If not specified, the following subdirectory will be created and used: <em>~/PHYTEC_STM32MP1_BSP/build-&lt;DISTRO&gt;-&lt;MACHINE&gt;/workspace/sources</em></li></ul><p><u>Example for modifying the kernel:</u></p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP/build-&lt;DISTRO&gt;-&lt;MACHINE&gt;$ devtool modify -x linux-stm32mp sources/linux-stm32mp</pre></div></div><p><em>Devtool</em> will create a new Yocto layer in <em>/build-openstlinuxweston-&lt;MACHINE&gt;/workspace</em>&#xa0;where you can see all modifications done by&#xa0;<em>devtool</em>. It will extract the sources corresponding to the recipe to the specified directory. In this example kernel sources will be extracted on the following local <em>git</em> directory: <em>/build-openstlinuxweston-&lt;MACHINE&gt;/sources/linux-stm32mp</em></p><p>A&#xa0;<em>bbappend </em>file&#xa0;will be created in the workspace directing the SRC_URI to this directory. Building an image with&#xa0;<em>Bitbake&#xa0;</em>will now use the sources in this directory. Now you can do your kernel, u-boot, or trusted-firmware modifications.</p><p><u>Example of modifying a kernel device tree file:</u></p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP/build-&lt;DISTRO&gt;-&lt;MACHINE&gt;$ vim sources/linux-stm32mp/arch/arm/boot/dts/phycore-stm32mp1-3.dtsi</pre></div></div><p><span style="color: rgb(0,0,0);">Make a change in the<em> dts</em> file with your favorite code editor.&#xa0;</span><span style="color: rgb(0,0,0);">When it is done, refer to the next sections for re-building the BSP:</span></p><ul><li>Re-build the kernel/BSP image, referring to the section <a href="#L876e.A4phyCORESTM32MP15xBSPManual-RebuildingtheKernel,Bootloader,orTrustedFirmware">Rebuilding the Kernel, Bootloader, or Trusted Firmware</a>.</li><li>For a quick test on a running target (temporary method), you can rebuild the kernel/device tree and only deploy the new device tree blob on target referring to<span style="color: rgb(255,0,0);">&#xa0;<a href="#L876e.A4phyCORESTM32MP15xBSPManual-Updatingthekernel/deviceTreeonaRunningTarget(TemporaryMethod)">Updating the kernel/device Tree on a Running Target (Temporary Method)</a></span></li></ul><p>If you want to store your code changes permanently, it is advisable to create a patch from the changes, then store and backup only the patch. You can go into the <em>linux-stm32mp</em> directory and create a patch with the method described in the section <a href="#L876e.A4phyCORESTM32MP15xBSPManual-CreatingPatches">Creating Patches.</a></p><div class="alert alert-success" data-hasbody="true" data-macro-name="tip"><p class="title" style="margin-left: 23px;">Tip</p><i class="fa fa-check-circle" style="float:left; margin-right: 10px;"></i><div class="confluence-information-macro-body"><p>Learn more about <em>devtool</em> at:<br /><a href="https://wiki.st.com/stm32mpu/wiki/OpenEmbedded_-_devtool" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/OpenEmbedded_-_devtool</a><br /><a href="https://www.yoctoproject.org/docs/2.6/ref-manual/ref-manual.html#ref-devtool-reference" class="external-link" rel="nofollow">https://www.yoctoproject.org/docs/2.6/ref-manual/ref-manual.html#ref-devtool-reference</a></p><p>Learn more about how to modify Linux Kernel, U-Boot, and TF-A at <a href="https://wiki.st.com/stm32mpu/wiki/How_to_cross-compile_with_the_Distribution_Package" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/How_to_cross-compile_with_the_Distribution_Package.</a></p></div></div><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-UpdatingthekerneldeviceTreeonaRunningTargetTemporaryMethodUpdatingthekerneldeviceTreeonaRunningTargetTemporaryMethod"><span style="color: rgb(0,0,0);">Updating the kernel/device Tree on a Running Target (Temporary Method)</span><span style="color: rgb(0,0,0);"><span class="confluence-anchor-link conf-macro output-inline" id="L876e.A4phyCORESTM32MP15xBSPManual-Updatingthekernel/deviceTreeonaRunningTarget(TemporaryMethod)" data-hasbody="false" data-macro-name="anchor"></span></span></h3><p><span style="color: rgb(0,0,0);">After modifying the device tree kernel and/or kernel configuration, you can test your modifications on your running target with the following quick but <strong>temporary method </strong>(to use for prototyping only).</span></p><ul><li>Rebuild kernel/device tree:</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP/build-&lt;DISTRO&gt;-&lt;MACHINE&gt;$ bitbake linux-stm32mp</pre></div></div><p>This command will generate a new Kernel Image (uImage) and new device tree blob (&lt;MACHINE&gt;.dtb) under the binaries folder (<em>tmp-glibc/deploy/images/&lt;MACHINE&gt;)</em></p><ul><li>Create an SSH connection between your PC and the running board with Ethernet or USB OTG (see <a href="#L876e.A4phyCORESTM32MP15xBSPManual-CreateanSSHConnectionwithUSBOTGorEthernet">Create an SSH Connection with USB OTG or Ethernet</a>)</li><li>For device tree update: copy the new device tree blob to the /boot directory of the target:</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP/build-&lt;DISTRO&gt;-&lt;MACHINE&gt;$ scp tmp-glibc/deploy/images/&lt;MACHINE&gt;/&lt;MACHINE&gt;.dtb root@&lt;Target_IP&gt;:/boot</pre></div></div><p>Example:</p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP/build-openstlinuxweston-phycore-stm32mp$ scp tmp-glibc/deploy/images/phycore-stm32mp-3/phycore-stm32mp-3.dtb root@192.168.7.1:/boot</pre></div></div><ul><li>For kernel update: copy the new kernel image (uImage) to the /boot directory of the target:</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP/build-&lt;DISTRO&gt;-&lt;MACHINE&gt;$ scp tmp-glibc/deploy/images/&lt;MACHINE&gt;/uImage root@&lt;Target_IP&gt;:/boot</pre></div></div><p>Example:</p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP/build-openstlinuxweston-phycore-stm32mp$ scp tmp-glibc/deploy/images/phycore-stm32mp-3/uImage root@192.168.7.1:/boot</pre></div></div><ul><li>Reboot the board with the following commands on target:</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">root@phycore-stm32mp1-3:~# cd /boot; sync; systemctl reboot</pre></div></div><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-RebuildingtheKernel,Bootloader,orTrustedFirmwareRebuildingtheKernel,Bootloader,orTrustedFirmware"><span style="color: rgb(0,0,0);">Rebuilding the Kernel, Bootloader, or Trusted Firmware</span><span style="color: rgb(0,0,0);"><span class="confluence-anchor-link conf-macro output-inline" id="L876e.A4phyCORESTM32MP15xBSPManual-RebuildingtheKernel,Bootloader,orTrustedFirmware" data-hasbody="false" data-macro-name="anchor"></span></span></h3><p>Launch the following command to re-start the BSP image build process (only the modules that have been modified will be re-generated; the kernel for example).</p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP/build-&lt;DISTRO&gt;-&lt;MACHINE&gt;$ bitbake &lt;BSP_IMAGE&gt;</pre></div></div><p><span style="color: rgb(0,0,0);">For quick build tests, you may also want to build only the module you have modified (kernel, bootloader, or trusted firmware), as described in the following sections.</span></p><div class="alert alert-success" data-hasbody="true" data-macro-name="tip"><p class="title" style="margin-left: 23px;">Tip</p><i class="fa fa-check-circle" style="float:left; margin-right: 10px;"></i><div class="confluence-information-macro-body"><p><span style="color: rgb(0,0,0);">We recommend rebuilding the entire BSP image as described above, so that all necessary BSP binaries are generated, before flashing the target.</span></p></div></div><h4 id="L876e-A4phyCORESTM32MP15xBSPManual-RebuildtheKernelkernelimage+devicetreeblob"><span style="color: rgb(0,0,0);">Rebuild the Kernel (kernel image + device tree blob)<br /></span></h4><p><span style="color: rgb(0,0,0);">To rebuild the kernel only, launch the following command:</span></p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP/build-&lt;DISTRO&gt;-&lt;MACHINE&gt;$ bitbake linux-stm32mp</pre></div></div><h4 id="L876e-A4phyCORESTM32MP15xBSPManual-Rebuildu-boot">Rebuild u-boot</h4><p><span style="color: rgb(0,0,0);">To rebuild the bootloader only, launch the following command:</span></p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP/build-&lt;DISTRO&gt;-&lt;MACHINE&gt;$ bitbake u-boot-stm3mp</pre></div></div><p>Note that with the FIP feature, u-boot is encapsulated in the TF-A FIP &#xa0;(Firmware Image Package) binary. So once u-boot is rebuilt, the FIP binary must be regenerated.</p><p>One solution to update the FIP binary is to relaunch the TF-A firmware build (refer to next section).</p><h4 id="L876e-A4phyCORESTM32MP15xBSPManual-RebuildtheTrustedFirmware">Rebuild the Trusted Firmware</h4><p><span style="color: rgb(0,0,0);">To rebuild the trusted firmware only, launch the following command:</span></p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP/build-&lt;DISTRO&gt;-&lt;MACHINE&gt;$ bitbake tf-a-stm32mp</pre></div></div><h4 id="L876e-A4phyCORESTM32MP15xBSPManual-RebuildKernelDeviceTreeOverlay">Rebuild Kernel Device Tree Overlay</h4><p><span style="color: rgb(0,0,0);">To rebuild kernel device tree overlay, launch the following command:</span></p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP/build-&lt;DISTRO&gt;-&lt;MACHINE&gt;$ bitbake phytec-dt-overlays-stm32mp -c cleanall
host:~/PHYTEC_STM32MP1_BSP/build-&lt;DISTRO&gt;-&lt;MACHINE&gt;$ bitbake phytec-dt-overlays-stm32mp</pre></div></div><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-CreatingPatchesCreatingPatches"><span>Creating Patches</span><span><span class="confluence-anchor-link conf-macro output-inline" id="L876e.A4phyCORESTM32MP15xBSPManual-CreatingPatches" data-hasbody="false" data-macro-name="anchor"></span></span></h3><p>You have to create the patch from the local git directory containing the modified source code (directory created by <em>devtool</em>).</p><h4 id="L876e-A4phyCORESTM32MP15xBSPManual-ExampletoCreateaKernelPatch">Example to Create a Kernel Patch<strong><br /></strong></h4><ul><li>Enter to the &lt;local git directory&gt;:</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP/build-openstlinuxweston-phycore-stm32mp1-3$ cd sources/linux-stm32mp </pre></div></div><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:&lt;local git directory&gt;$ cd sources/linux-stm32mp
host:&lt;local git directory&gt;$ git status                        # Show changes files
host:&lt;local git directory&gt;$ git diff                          # Show all the changes made compared to the previous commit
host:&lt;local git directory&gt;$ git add .&#xa0;&#xa0;                       # Add all modified file to the staging area
host:&lt;local git directory&gt;$ git commit -m "DTS modification"&#xa0; # Creates a commit with a not so useful commit message
host:&lt;local git directory&gt;$ git format-patch -1 -o ~/         # Creates a patch of the last commit and saves it in you home directory
/home/&lt;user&gt;/0001-DTS-modification.patch</pre></div></div><p class="auto-cursor-target">The created patch is the home directory: host:<em>~/0001-DTS-modification.patch</em>.</p><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-ApplyingPatches"><span style="color: rgb(0,0,0);">Applying Patches</span></h3><p><span style="color: rgb(0,0,0);">The created patches can be used once you have validated your device tree modifications (using <em>devtool</em> for example) and you want to customize the BSP by adding a custom Yocto layer (how to create a Yocto layer is described in <a href="#L876e.A4phyCORESTM32MP15xBSPManual-CreatingCustomYoctoLayer">Creating Custom Yocto Layer</a>).&#xa0;</span></p><div class="alert alert-success" data-hasbody="true" data-macro-name="tip"><p class="title" style="margin-left: 23px;">Tip</p><i class="fa fa-check-circle" style="float:left; margin-right: 10px;"></i><div class="confluence-information-macro-body"><p><span style="color: rgb(0,0,0);">It is possible to add your patches directly in the <em>meta-phytec</em> layer, but it is not recommended to do this, as it is easier to maintain your custom BSP if you have your own Yocto layer (particularly when we deliver BSP updates).</span></p></div></div><p><br /></p><div class="alert alert-danger" data-hasbody="true" data-macro-name="warning"><p class="title" style="margin-left: 23px;">Warning</p><i class="fa fa-times-circle" style="float:left; margin-right: 10px;"></i><div class="confluence-information-macro-body"><p><span style="color: rgb(0,0,0);">Before being able to apply any patch to a recipe, the recipe must be removed from the <em>devtool</em> workspace. To do that, use the following command (example for&#xa0;<em>linux-stm32mp</em> recipe):</span></p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">devtool reset linux-stm32mp</pre></div></div><p><span style="color: rgb(0,0,0);">This will remove the <em>linux-stm32mp.bbappend</em> file created by <em>devtool</em> in <em>../build-&lt;DISTRO&gt;-&lt;MACHINE&gt;/workspace/appends</em></span></p><p><span style="color: rgb(0,0,0);">Then clean the recipe build</span></p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">bitbake linux-stm32mp -c cleansstate
</pre></div></div></div></div><p>After you have created the kernel patch, you must create a <em>.bbappend</em> file in your custom layer. The locations for the append recipes are:</p><div class="frame table-responsive table-sm table-hover mb-5" style="max-height: 100% !Important;"><table class="confluenceTable ce-table" style=""><colgroup><col /><col /></colgroup><tbody><tr><td class="highlight-grey confluenceTd" colspan="1" data-highlight-colour="grey"><strong title="">recipe (.bb) to append</strong></td><td class="highlight-grey confluenceTd" colspan="1" data-highlight-colour="grey"><strong title="">.bbappend file path in custom layer to create</strong></td></tr><tr><td class="confluenceTd"><a href="http://linux-stm32mp.bb" class="external-link" rel="nofollow">linux-stm32mp.bb</a></td><td class="confluenceTd">layers/&lt;custom_layer&gt;/recipes-kernel/linux/linux-stm32mp_%.bbappend</td></tr><tr><td class="confluenceTd"><a href="http://u-boot-stm32mp.bb" class="external-link" rel="nofollow">u-boot-stm32mp.bb</a></td><td class="confluenceTd">layers/&lt;custom_layer&gt;/recipes-bsp/u-boot-stm32mp/u-boot-stm32mp_%.bbappend</td></tr><tr><td colspan="1" class="confluenceTd"><a href="http://tf-a-stm32mp.bb" class="external-link" rel="nofollow">tf-a-stm32mp.bb</a></td><td colspan="1" class="confluenceTd">layers/&lt;custom_layer&gt;/recipes-bsp/trusted-firmware-a/tf-a-stm32mp_%.bbappend</td></tr></tbody></table></div><p>The following example is for the <em>linux-stm32mp</em> recipe. You have to adjust the paths:</p><ul><li>Create the folders and move the patch into it. Then create the <em>bbappend</em> file:</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP/$ mkdir -p layers/meta-custom/recipes-kernel/linux/features&#xa0; &#xa0; &#xa0; &#xa0; &#xa0; &#xa0; &#xa0; &#xa0; &#xa0; &#xa0; &#xa0; &#xa0; &#xa0; # create the directories
host:~/PHYTEC_STM32MP1_BSP/$ cp ~/0001-DTS-modification.patch layers/meta-custom/recipes-kernel/linux/features&#xa0; # copy patch in the features directory
host:~/PHYTEC_STM32MP1_BSP/$ touch layers/meta-custom/recipes-kernel/linux/linux-stm32mp_%.bbappend&#xa0; &#xa0; &#xa0; &#xa0; &#xa0; &#xa0; &#xa0;# create a bbappend file</pre></div></div><div class="alert alert-danger" data-hasbody="true" data-macro-name="warning"><p class="title" style="margin-left: 23px;">Warning</p><i class="fa fa-times-circle" style="float:left; margin-right: 10px;"></i><div class="confluence-information-macro-body"><p>Pay attention to your current work directory. You have to execute the above commands in the BSP top-level directory. Not in the build directory!</p></div></div><ul><li>Use your favorite editor to add the following lines into the <em>bbappend</em> file (<em>layers/meta-custom/recipes-kernel/linux/linux-stm32mp_%.bbappend</em>):</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">FILESEXTRAPATHS_prepend := "${THISDIR}/features:"
SRC_URI_append = " \
file://0001-DTS-modification.patch \
"</pre></div></div><ul><li>Save the file, go back to the build directory and rebuild the kernel recipe with:</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP/$ cd build-&lt;DISTRO&gt;-&lt;MACHINE&gt;
host:~/PHYTEC_STM32MP1_BSP/build-&lt;DISTRO&gt;-&lt;MACHINE&gt;$ bitbake linux-stm32mp -c cleansstate
host:~/PHYTEC_STM32MP1_BSP/build-&lt;DISTRO&gt;-&lt;MACHINE&gt;$ bitbake linux-stm32mp</pre></div></div><ul><li>If the build is successful, you can then rebuild the entire image (<em>st-image-weston</em> for example).</li></ul><div class="alert alert-success" data-hasbody="true" data-macro-name="tip"><p class="title" style="margin-left: 23px;">Tip</p><i class="fa fa-check-circle" style="float:left; margin-right: 10px;"></i><div class="confluence-information-macro-body"><p>Further resources: <a href="https://wiki.st.com/stm32mpu/wiki/How_to_customize_the_Linux_kernel" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/How_to_customize_the_Linux_kernel</a></p></div></div><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-AddingKernelConfigurationFragmentAddingKernelconfigurationfragment"><span style="color: rgb(0,0,0);">Adding Kernel Configuration Fragment</span><span style="color: rgb(0,0,0);"><span class="confluence-anchor-link conf-macro output-inline" id="L876e.A4phyCORESTM32MP15xBSPManual-AddingKernelconfigurationfragment" data-hasbody="false" data-macro-name="anchor"></span></span></h3><p><span style="color: rgb(0,0,0);">After creating one or more kernel configuration file (.cfg) with <strong><em>menuconfig </em></strong>and <strong><em>diffconfig </em></strong>bitbake commands (<a href="#L876e.A4phyCORESTM32MP15xBSPManual-ConfigurethekernelthroughMenuconfig">Configure the kernel through Menuconfig</a>), you have to add them in the <strong><em>linux-stm32mp_%.bbappend </em></strong>recipe of your customer Yocto layer, so that it will be included in the final generated Kernel configuration file (<em>.config </em>file in&#xa0;the Kernel build directory).</span></p><div class="alert alert-success" data-hasbody="true" data-macro-name="tip"><p class="title" style="margin-left: 23px;">Tip</p><i class="fa fa-check-circle" style="float:left; margin-right: 10px;"></i><div class="confluence-information-macro-body"><p><span style="color: rgb(0,0,0);">It is possible to add your kernel config fragment files directly in the <em>meta-phytec</em> layer, but it is no recommended to do this, as it is easier to maintain your custom BSP if you have your own Yocto layer (particularly when we deliver BSP updates).</span></p></div></div><ul><li><span style="color: rgb(0,0,0);">If not already done, </span>you must create a <span style="color: rgb(0,0,0);"><strong><em>linux-stm32mp_%.bbappend</em></strong></span> file in your custom layer:</li></ul><p>Replace <strong>&lt;x.y&gt;</strong> below with the kernel version x.y (ex:<strong> 5.4</strong>).</p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP/$ mkdir -p layers/meta-custom/recipes-kernel/linux/features/&lt;x.y&gt;&#xa0; &#xa0; &#xa0;                # create the directories
host:~/PHYTEC_STM32MP1_BSP/$ touch layers/meta-custom/recipes-kernel/linux/linux-stm32mp_%.bbappend&#xa0; &#xa0; &#xa0; &#xa0; &#xa0; &#xa0; &#xa0;# create a bbappend file

</pre></div></div><ul><li class="auto-cursor-target">Copy your config fragment file (<em>&lt;custom-fragment&gt;.cfg) </em>into the features/&lt;x.y&gt; directory (ex: features/4.19):</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP/$ cp ~/&lt;custom-fragment&gt;.cfg layers/meta-custom/recipes-kernel/linux/features/&lt;x.y&gt;&#xa0;&#xa0;# copy fragment in the features directory</pre></div></div><div class="alert alert-danger" data-hasbody="true" data-macro-name="warning"><p class="title" style="margin-left: 23px;">Warning</p><i class="fa fa-times-circle" style="float:left; margin-right: 10px;"></i><div class="confluence-information-macro-body"><p>Pay attention to your current work directory. You have to execute the above commands in the BSP top-level directory. Not in the build directory!</p></div></div><ul><li>Use your favorite editor to add the following lines into the <em>bbappend</em> file (<em>layers/meta-custom/recipes-kernel/linux/linux-stm32mp_%.bbappend</em>):</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">FILESEXTRAPATHS_prepend := "${THISDIR}/features:"

SRC_URI += "file://${LINUX_VERSION}/custom-fragment.cfg;subdir=fragments"
KERNEL_CONFIG_FRAGMENTS += "${WORKDIR}/fragments/${LINUX_VERSION}/custom-fragment.cfg"</pre></div></div><ul><li>Save the file, go back to the build directory and rebuild the kernel recipe with:</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP/$ cd build-&lt;DISTRO&gt;-&lt;MACHINE&gt;
host:~/PHYTEC_STM32MP1_BSP/build-&lt;DISTRO&gt;-&lt;MACHINE&gt;$ bitbake linux-stm32mp -c cleansstate
host:~/PHYTEC_STM32MP1_BSP/build-&lt;DISTRO&gt;-&lt;MACHINE&gt;$ bitbake linux-stm32mp</pre></div></div><ul><li>If the build is successful, you can then rebuild the <em>st-image-bootfs</em> partition (containing the kernel and device tree) or the entire image (<em>st-image-weston</em> for example).</li></ul><h1 id="L876e-A4phyCORESTM32MP15xBSPManual-OpenSTLinuxYoctoSDKOpenSTLinuxYoctoSDK">OpenSTLinux Yocto SDK<span style="color: rgb(0,0,0);"><span class="confluence-anchor-link conf-macro output-inline" id="L876e.A4phyCORESTM32MP15xBSPManual-OpenSTLinuxYoctoSDK" data-hasbody="false" data-macro-name="anchor"></span></span></h1><p class="firstHeading">When a Yocto distribution has been modified and validated on target, it is pertinent to build a new Software Development Kit that integrates the modifications and redistributes this <span class="mw-lingo-term">SDK</span> to developers. This chapter describes the procedure to build, install and use the SDK.</p><p class="firstHeading">For&#xa0; more details on the OpenSTLinux SDK, please refer to <a href="https://wiki.st.com/stm32mpu/wiki/SDK_for_OpenSTLinux_distribution" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/SDK_for_OpenSTLinux_distribution</a></p><h2 class="firstHeading" id="L876e-A4phyCORESTM32MP15xBSPManual-HowtoBuildtheSDK">How to Build the SDK</h2><p>To build the SDK, first, if not already done, initialize the OpenSTLinux Environment for the phyCORE-STM32MP15x BSP (refer to <a href="#L876e.A4phyCORESTM32MP15xBSPManual-OpenEmbeddedEnvironmentSetup">OpenSTLinux Environment Setup</a>). Then launch the following <em>bitbake </em>command:</p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">bitbake -c populate_sdk &lt;image&gt;
</pre></div></div><p>With &#xa0;&lt;image&gt; =&#xa0; Image name (example: <em>st-image-weston</em>)</p><p><u>Example:</u></p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP/build-openstlinuxweston-phycore-stm32mp1-3$ bitbake -c populate_sdk st-image-weston</pre></div></div><p>The SDK installation files&#xa0; are deployed into the following output directory: <em>build-&lt;DISTRO&gt;-&lt;MACHINE&gt;/tmp-glibc/deploy/sdk/ </em>:</p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP/build-openstlinuxweston-phycore-stm32mp1-3$ cd tmp-glibc/deploy/sdk
host:~/PHYTEC_STM32MP1_BSP/build-openstlinuxweston-phycore-stm32mp1-3/tmp-glibc/deploy/sdk$ ls -l
total 955772
-rw-r--r-- 1 cparant cparant 11572 Feb 3 11:38 st-image-weston-openstlinux-weston-phycore-stm32mp1-3-x86_64-toolchain-3.1-snapshot.host.manifest
-rw-r--r-- 1 cparant cparant 21707 Feb 3 11:38 st-image-weston-openstlinux-weston-phycore-stm32mp1-3-x86_64-toolchain-3.1-snapshot.license
-rw-r--r-- 1 cparant cparant 575516 Feb 3 11:58 st-image-weston-openstlinux-weston-phycore-stm32mp1-3-x86_64-toolchain-3.1-snapshot-license_content.html
-rwxr-xr-x 1 cparant cparant 977377750 Feb 3 11:57 st-image-weston-openstlinux-weston-phycore-stm32mp1-3-x86_64-toolchain-3.1-snapshot.sh
-rw-r--r-- 1 cparant cparant 157514 Feb 3 11:37 st-image-weston-openstlinux-weston-phycore-stm32mp1-3-x86_64-toolchain-3.1-snapshot.target.manifest
-rw-r--r-- 1 cparant cparant 549110 Feb 3 11:37 st-image-weston-openstlinux-weston-phycore-stm32mp1-3-x86_64-toolchain-3.1-snapshot.testdata.json</pre></div></div><p>The main final output is the cross-development toolchain installation shell script : <em>&lt;image&gt;-&lt;distro&gt;-&lt;machine&gt;-&lt;host machine&gt;-toolchain-&lt;Yocto release&gt;-snapshot.sh</em></p><p>with:</p><p><em>&lt;host machine&gt;</em>: Host machine on which the SDK is generated: x86_64 (the only supported value)</p><p><em>&lt;Yocto release&gt;</em>: Release number of the Yocto Project; here it is Yocto 3.1 (<em>Dunfell</em>)</p><p>For more details, refer to: <a href="https://wiki.st.com/stm32mpu/wiki/How_to_create_an_SDK_for_OpenSTLinux_distribution" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/How_to_create_an_SDK_for_OpenSTLinux_distribution</a></p><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-HowtoInstalltheSDKHowtoinstalltheSDK">How to Install the SDK<span style="color: rgb(0,0,0);"><span class="confluence-anchor-link conf-macro output-inline" id="L876e.A4phyCORESTM32MP15xBSPManual-HowtoinstalltheSDK" data-hasbody="false" data-macro-name="anchor"></span></span></h2><p>Execute the cross-development toolchain installation shell script, as follow:</p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP/build-&lt;DISTRO&gt;-&lt;MACHINE&gt;$ ./st-image-weston-openstlinux-weston-phycore-stm32mp1-3-x86_64-toolchain-3.1-snapshot.sh -d ../../../SDK</pre></div></div><p>This will install the SDK into ~/PHYTEC_STM32MP1_BSP/build-&lt;DISTRO&gt;-&lt;MACHINE&gt;/SDK, but it can be installed into any other location.<br /><br />When the installation is successfully finished, the following log should appear:</p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">ST OpenSTLinux - Weston - (A Yocto Project Based Distro) SDK installer version 3.1-snapshot
===========================================================================================
You are about to install the SDK to "&lt;user_path&gt;/PHYTEC_STM32MP1_BSP/build-openstlinuxweston-phycore-stm32mp1-3/SDK". Proceed [Y/n]? y
Extracting SDK..................................................................................................................................................................................................................done
Setting it up...done
SDK has been successfully set up and is ready to be used.
Each time you wish to use the SDK in a new shell session, you need to source the environment setup script e.g.
&#xa0;$ . &lt;user_path&gt;/PHYTEC_STM32MP1_BSP/build-openstlinuxweston-phycore-stm32mp1-3/SDK/environment-setup-cortexa7t2hf-neon-vfpv4-ostl-linux-gnueabi</pre></div></div><h2 class="firstHeading" id="L876e-A4phyCORESTM32MP15xBSPManual-HowtoUsetheSDKinaLinuxTerminal">How to Use the SDK in a Linux Terminal</h2><p>If you want to cross-compile your application project into a Linux terminal, you have to start the SDK, using the following command:</p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:$ source &lt;SDK installation directory&gt;/environment-setup-cortexa7t2hf-neon-vfpv4-ostl-linux-gnueabi</pre></div></div><p>Note that the SDK environment setup script must be run once in each new working terminal in which you cross-compile.</p><p>The following checking list allows you to ensure that the environment is correctly setup:</p><ul><li>Check the target architecture:</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:$ echo $ARCH
arm</pre></div></div><ul><li>Check the toolchain binary prefix for the target tools:</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:$&#xa0;echo $CROSS_COMPILE
arm-ostl-linux-gnueabi-</pre></div></div><ul><li>Check the C compiler version:</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:$&#xa0;$CC --version
arm-ostl-linux-gnueabi-gcc (GCC) &lt;GCC version&gt;
[...]</pre></div></div><ul><li>Check that the SDK version is the expected one:</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:$&#xa0;echo $OECORE_SDK_VERSION
&lt;expected SDK version&gt;</pre></div></div><p>If any of these commands fails or does not return the expected result, please try to reinstall the SDK.</p><div class="alert alert-success" data-hasbody="true" data-macro-name="tip"><p class="title" style="margin-left: 23px;">Tip</p><i class="fa fa-check-circle" style="float:left; margin-right: 10px;"></i><div class="confluence-information-macro-body"><p>Once the SDK is installed, it is easy to develop a userspace application outside of the OpenSTLinux build system. There are different three ways to use the SDK toolchain within a terminal:</p><ul><li>command line</li><li>makefile-based project</li><li>autotools-based project</li></ul><p>Whatever the method, it relies on:</p><ul><li>the <em>sysroot </em>that is associated with the cross-toolchain, and that contains the header files and libraries needed for generating binaries (see target <em>sysroot</em>)</li><li>the environment variables created by the SDK environment setup script (see SDK startup)</li></ul><p>You can refer to the following simple example: Addition of a "hello world" userspace application: <a href="https://wiki.st.com/stm32mpu/wiki/How_to_cross-compile_with_the_Developer_Package#Adding_a_.22hello_world.22_user_space_example" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/How_to_cross-compile_with_the_Developer_Package#Adding_a_.22hello_world.22_user_space_example</a></p></div></div><h2 class="firstHeading" id="L876e-A4phyCORESTM32MP15xBSPManual-HowtoUsetheSDKwithSTM32CubeIDE">How to Use the SDK with STM32CubeIDE</h2><p>STM32CubeIDE can be used for Cortex-A7 or Cortex-M4 application development purposes.</p><p>For more details on the STM32CubeIDE tool, please refer to <a href="#L876e.A4phyCORESTM32MP15xBSPManual-STM32CubeIDEDevelopmentTool">STM32CubeIDE Development Tool</a></p><p>To see how to use the SDK to debug Linux userspace applications, please refer to <a href="#L876e.A4phyCORESTM32MP15xBSPManual-HowtoDebugaLinuxUserspaceApplication(Cortex-A7)">How to Debug a Linux Userspace Application (Cortex-A7)</a></p><h1 id="L876e-A4phyCORESTM32MP15xBSPManual-TheSTM32CubeMXToolTheSTM32CubeMXtool"><span>The </span><span class="mw-headline">STM32CubeMX Tool</span><span><span class="confluence-anchor-link conf-macro output-inline" id="L876e.A4phyCORESTM32MP15xBSPManual-TheSTM32CubeMXtool" data-hasbody="false" data-macro-name="anchor"></span></span></h1><p><span class="mw-headline">STM32CubeMX is an&#xa0;official STMicroelectronics graphical software configuration tool that</span><span class="mw-headline"> allows, among others features, to:</span></p><ul><li><span class="mw-headline">configure pin assignments, the clock tree, or internal peripherals</span></li><li><span class="mw-headline">generate the device tree for a Linux kernel, TF-A, and U-Boot firmware for Cortex-A7</span></li><li><span class="mw-headline">generate HAL initialization code for Cortex-M4</span></li></ul><p><span class="mw-headline">For more details on these and other features, go to <a href="https://wiki.st.com/stm32mpu/wiki/STM32CubeMX" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/STM32CubeMX</a></span></p><p><span class="mw-headline">To install the tool and get the user manual: <a href="https://www.st.com/en/development-tools/stm32cubemx.html" class="external-link" rel="nofollow">https://www.st.com/en/development-tools/stm32cubemx.html</a></span></p><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-UsingSTM32CubeMXtoGenerateDeviceTree"><span>Using STM32CubeMX to Generate Device Tree</span></h2><p>STM32CubeMX can be used to generate the device tree files for a given project:</p><ul><li>It generates one unique <strong>&lt;soc&gt;-&lt;project&gt;-mx.dts</strong> file (containing all the custom board DTS configuration) per sotware components (Kenel, U-boot and TF-A). This <strong>.dts</strong> includes the upstream specific SoC dtsi files (Soc, SoC extension and SoC package Pincontrol).</li><li>For U-boot, it also generates <strong>u-boot board specific</strong><strong>dtsi</strong> file: <strong>&lt;soc&gt;-&lt;project&gt;-mx-u-boot.dtsi</strong></li><li>For TF-A, it also generates <strong>&lt;soc&gt;-&lt;project&gt;-mx-fw-config.dts</strong> used by TF-A Firmware Configuration Framework.</li><li>For U-boot and TF-A , it also generates <strong>DDR configuration</strong><strong>dtsi</strong> file: <strong>stm32mp15-mx.dtsi </strong>(included in <strong>&lt;soc&gt;-&lt;project&gt;-mx.dts</strong> for TF-A and in <strong>&lt;soc&gt;-&lt;project&gt;-mx-u-boot.dtsi</strong> for U-boot)</li></ul><p>For more details of the generated <em>dtsi </em>files for each component, refer to&#xa0;<span><a href="https://wiki.st.com/stm32mpu-ecosystem-v3/wiki/STM32MP15_device_tree" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu-ecosystem-v3/wiki/STM32MP15_device_tree</a> (STM32CubeMX generated device tree section).</span></p><div class="alert alert-success" data-hasbody="true" data-macro-name="tip"><p class="title" style="margin-left: 23px;">Tip</p><i class="fa fa-check-circle" style="float:left; margin-right: 10px;"></i><div class="confluence-information-macro-body"><p>PHYTEC provides different STM32CubeMX projects of the <strong>phyCORE-STM32MP15x</strong> SOM (NAND version or eMMC version, with or without QSPI NOR FLASH) as well as the project of the <strong>phyBOARD-Sargas</strong> (including phyCORE-STM32MP15x). Those projects are provided in our <strong><em>STM32CubeMX-phytec</em></strong>packages that can be downloaded at <a href="https://www.phytec.de/produkte/system-on-modules/phycore-stm32mp15x/#downloads/" class="external-link" rel="nofollow">https://www.phytec.de/produkte/system-on-modules/phycore-stm32mp15x/#downloads/</a> under the heading "CubeMX ".</p><p>For details, refer to the <strong><em>Phytec-CubeMX_info.txt</em></strong> file located in the downloaded <strong><em>STM32CubeMX-phytec</em></strong>package.</p><p>For device tree generation, you can also follow the next section.</p></div></div><p>Procedure to create your own CubeMX project based on our phyCORE-STM32MP15x SOM (with or without phyBOARD-Sargas):</p><ul><li>Copy one of the project (<em>.ioc</em>) that we provide (the one which fit the best your need) and rename the file to match your project: <strong>&lt;project&gt;.ioc</strong>. For example: <em><strong>myboard.ioc</strong>.</em></li><li>Open this&#xa0; project with STM32CubeMX. Then save it. (the CubeMX project name is based on the <em>.ioc</em> file name and is updated as soon as you open and save the project).</li></ul><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-AddphyCORE-STM32MP15xandphyBOARDDeviceTreeUserCodeTemplates">Add phyCORE-STM32MP15x and phyBOARD Device Tree User Code Templates</h3><p>As the generated device tree files do not contain all the necessary device tree properties (dependent on BSP drivers), some manual code ("User code") needs to be added in specific sections of the generated files.</p><p>To be able to build the BSP with the device tree generated from the phyCORE-STM32MP15x/phyBOARD-Sargas STM32CubeMX project, we also <strong>provide .dts templates</strong>. Those are the generated device tree from our STM32CubeMX projects in which we have added the necessary user code, (adding some device tree properties) so to build the BSP image with it.</p><p>The templates that we provide are inside the downloaded <strong><em>STM32CubeMX-phytec</em></strong>package, under <strong><em>DeviceTree_templates</em></strong> directory. This directory containing <strong>.dts </strong>and<strong> .dtsi</strong> files that are the device tree templates.</p><p><span>The <em>dts </em>templates contain some user code sections like these:<br /></span></p><p><u>In the device tree root:</u></p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">/* USER CODE BEGIN root */
/* USER CODE END root */</pre></div></div><p><u>In each device tree specific &lt;node&gt;:</u></p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">/* USER CODE BEGIN &lt;node&gt; */
/* USER CODE END &lt;node&gt; */</pre></div></div><p><span>Those different sections can be parsed by the STM32Cube generator and then be automatically added into the generated DTS files.</span></p><div class="alert alert-success" data-hasbody="true" data-macro-name="tip"><p class="title" style="margin-left: 23px;">Tip</p><i class="fa fa-check-circle" style="float:left; margin-right: 10px;"></i><div class="confluence-information-macro-body"><p>To know how to configure the STM32CubeMX tool to use those templates during the code generation, refer to the <strong><em>Phytec-CubeMX_info.txt</em></strong> file located in the downloaded <strong><em>STM32CubeMX-phytec</em></strong>package.</p><p>By default, when using our provided CubeMX projects, the device tree generation will fail if the CubeMX tool or the project are not configured first.</p></div></div><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-BuildYoctoMachinefromGeneratedDeviceTreeBuildyoctomachinefromgeneratedDeviceTree">Build Yocto Machine from Generated Device Tree<span class="confluence-anchor-link conf-macro output-inline" id="L876e.A4phyCORESTM32MP15xBSPManual-BuildyoctomachinefromgeneratedDeviceTree" data-hasbody="false" data-macro-name="anchor"></span></h2><p>Once a device tree are generated from STM32CubeMX, a corresponding Yocto machine can be quickly build, using our machine configuration file template "<strong>meta-phytec/conf/machine/phycore-stm32mp1-mx.conf</strong>".</p><p>This configuration file works with the "<strong>meta-st-stm32mp-addons</strong>" Yocto layer provided by ST for this purpose.</p><p>This layer allows to build Yocto custom machines from STM32CubeMX projects containing generated device tree files. The following link describes this layer: <a href="https://wiki.st.com/stm32mpu/wiki/How_to_create_your_own_machine" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/How_to_create_your_own_machine</a></p><p>For the phyCORE-STM32MP, the way to use this layer is a little bit from the one described in this ST wiki page for those two reasons:</p><ul><li><strong>"meta-phytec/conf/machine/phycore-stm32mp1-mx.conf" </strong>must be used instead of<strong></strong>"meta-st/meta-st-stm32mp-addons/conf/machine/stm32mp1-mx.conf"</li><li>Yocto Build setup is a little bit different.</li></ul><p>So, please follow the sections below instead. They are two different methods:</p><ul><li>Configure and build the <strong>phycore-stm32mp1-mx</strong> machine. This is usefull for quick validation test.</li><li>Create a new machine (based on <strong>phycore-stm32mp1-mx.conf </strong>file).</li></ul><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-BuildImagesforthephycore-stm32mp1-mxMachineTemplate">Build Images for the <strong>phycore-stm32mp1-mx Machine Template<br /></strong></h3><ul><li>First, choose an OpenSTLinux Distribution (&lt;DISTRO&gt;) fitting your needs. Please refer to <span style="color: rgb(0,0,0);"><a href="#L876e.A4phyCORESTM32MP15xBSPManual-ChooseaBSPOpenSTLinuxDistribution">Choose a BSP OpenSTLinux Distribution</a></span>.</li><li>If you already have fetched the BSP Yocto sources, initialized with any machine and distro, you can start configuring the <strong>phycore-stm32mp1-mx.conf </strong>file<strong></strong>as described below.</li><li>Otherwise, please refer to <span style="color: rgb(0,0,0);"><a href="#L876e.A4phyCORESTM32MP15xBSPManual-GetandInitializetheBSPEnvironment">Get and Initialize the BSP Environment</a></span>, choosing the DISTRO fitting your project needs and selecting the MACHINE <strong>phycore-stm32mp1-mx.</strong><strong></strong>You<strong></strong>will be asked to read and accept (or not) the EULA license (mandatory to support GPU and third-party content). After that, the build directory <strong>build-&lt;DISTRO&gt;-phycore-stm32mp1-mx</strong> will be created.</li></ul><h4 id="L876e-A4phyCORESTM32MP15xBSPManual-CustomizetheYoctoMachineCustomizetheYoctomachine">Customize the Yocto Machine<span class="confluence-anchor-link conf-macro output-inline" id="L876e.A4phyCORESTM32MP15xBSPManual-CustomizetheYoctomachine" data-hasbody="false" data-macro-name="anchor"></span></h4><ul><li>Configure the machine feature to your need, editing "meta-phytec/conf/machine/phycore-stm32mp1-mx.conf" file<strong>. </strong></li><li>On this file, the changes that can be done are under "<strong><em>User machine customization</em>"</strong>:</li></ul><ul><li style="list-style-type: none;"><ul><li><strong>M4 copro: <br /></strong><ul><li><em>M4_BOARDS</em> : Define specific board reference to use for M4 firmware (boards cherry-pick from <strong>m4projects-stm32mp1.bbapend</strong> recipe). Only one is available by default, ie:&#xa0; "STM32MP15-phyBOARD-Sargas".</li><li><em>DEFAULT_COPRO_FIRMWARE</em>: Define the name of default copro firmware that can be executed at boot time (name cherry picked from a list defined in <strong>m4projects-stm32mp1</strong>.<strong>bbappend </strong>recipe)</li></ul></li></ul></li></ul><ul><li style="list-style-type: none;"><ul><li><strong>Boot Scheme: </strong>to select your boot scheme configuration(s), comment and uncomment the <em>BOOTSCHEME_LABELS</em> lines.</li></ul></li></ul><ul><li style="list-style-type: none;"><ul><li><strong>Boot Device Choice: </strong>to select your boot device configuration(s), comment, and uncomment the <em>BOOTDEVICE_LABELS</em> lines.</li></ul></li></ul><ul><li style="list-style-type: none;"><ul><li><strong>Image config for NAND device:&#xa0; </strong>for 512MB and 128MB NAND boot device, partition sizes must be redefined. For that, uncomment all the <em>STM32MP_&lt;PARTITION&gt;_SIZE </em>parameters<em></em>as well as<em> the MULTIUBI_BUILD_NAME </em>parameter (either for the 512MB config or the 128MB config).</li></ul></li></ul><ul><li style="list-style-type: none;"><ul><li><strong>Support Feature Choice: </strong>to select additional features to enable onboard, uncomment the <em>MACHINE_FEATURES</em> proposed lines.</li></ul></li></ul><ul><li style="list-style-type: none;"><ul><li><strong>Specific firmware and kernel modules configuration: </strong>this section allows the user to configure some specificites related to its board hardware.<ul><li><em>KERNEL_MODULE_AUTOLOAD</em>: you may need to feed this variable with the list of kernel modules that need to be loaded at boot time (this variable is empty for the standard phycore-stm32mp1-x machines).</li><li><em>BLUETOOTH_LIST</em>: in case you enable the "Bluetooth" feature and need to use another firmware module for your hardware (the default one used is defined in <strong>include/phytec-machine-common-stm32mp.inc</strong>).</li><li><em>WIFI_LIST</em> : in case you enable the "wifi" feature and need to use another firmware module for your hardware (the default one used is defined in <strong>include/phytec-machine-common-stm32mp.inc</strong>).</li></ul></li></ul></li></ul><ul><li style="list-style-type: none;"><ul><li><strong>CubeMX Project config: </strong>You have to uncomment and configure the following variables to set your CubeMX project:<ul><li><em>CUBEMX_DTB</em>: must be set to the device tree name (without file extension)</li><li><em>CUBEMX_PROJECT</em><strong></strong>: must be set to the Device tree path of CubeMX Board project (path <strong>relative to "meta-st/meta-st-stm32mp-addons"</strong> folder). For example, if the CubeMX project is located in "meta-phytec":</li></ul></li></ul></li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark"># CubeMX Project Config
# =========================================================================
# Assign CubeMX Board devicetree name (without file extension)
CUBEMX_DTB = "stm32mp157c-myboard-mx"
# Assign CubeMX Board project path (relative to "meta-st-stm32mp-addons" layer path folder)
CUBEMX_PROJECT = "../../meta-phytec/phycore-stm32mp1-myboard/CA7/DeviceTree/myboard"</pre></div></div><h4 id="L876e-A4phyCORESTM32MP15xBSPManual-SetUptheBuildEnvironment">Set Up the Build Environment</h4><p>OpenSTLinux build environment can be set up with or without Graphical User Interface (GUI).</p><p><u>1) Setup the build env without GUI:</u></p><ul><li>Launch the following command replacing &lt;DISTRO&gt; by your choice: <em>MACHINE=phycore-stm32mp1-mx DISTRO=&lt;DISTRO&gt; source openstlinux-init-phytec.sh</em></li></ul><p><em>Example:</em></p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP$ MACHINE=phycore-stm32mp1-mx DISTRO=openstlinux-eglfs source openstlinux-init-phytec.sh</pre></div></div><ul><li><p><span style="color: rgb(0,0,0);">If the corresponding build directory <strong>build-&lt;DISTRO&gt;-phycore-stm32mp1-mx</strong> doesn't exist yet:</span></p><ul><li><span style="color: rgb(0,0,0);">you will be asked to read and accept (or not) the EULA lisence (mandatory to support GPU and third party content).<br /></span></li><li><span style="color: rgb(0,0,0);">the following BUILD_DIR will be created: '~/PHYTEC_STM32MP1_BSP/<strong>build-&lt;DISTRO&gt;-phycore-stm32mp1-mx</strong>'.</span></li></ul></li><li><span style="color: rgb(0,0,0);">Build environment will be set up and you should now be in a sub-folder named '~/PHYTEC_STM32MP1_BSP/</span><strong>build-&lt;DISTRO&gt;-phycore-stm32mp1-mx</strong>'<span style="color: rgb(0,0,0);">.</span></li></ul><p><u>2) Setup the build env with GUI:</u></p><ul><li>Removing the "MACHINE" and "DISTRO" parameters in the above command will open the GUI interface<em>:</em></li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP$ source openstlinux-init-phytec.sh</pre></div></div><ul><li>A popup will appear. Select " <strong>build-&lt;DISTRO&gt;-phycore-stm32mp1-mx" </strong>as BUILD_DIR. Otherwise, select "<strong>NEW</strong>" to create it, if it doesn't exist yet (<span style="color: rgb(0,0,0);">Press 'space' to select and press 'enter' to validate).</span></li><li><p><span style="color: rgb(0,0,0);">When selecting "<strong>NEW</strong>":</span></p><ul><li><p><span style="color: rgb(0,0,0);">you will have to select the DISTRO and the MACHINE ("phycore-stm32mp1-mx" in our case).</span></p></li><li><p><span style="color: rgb(0,0,0);"> you will be asked to read and accept (or not) the EULA license (mandatory to support GPU and third party content).<br /></span></p></li><li><span style="color: rgb(0,0,0);">the following BUILD_DIR will be created: '~/PHYTEC_STM32MP1_BSP/<strong>build-&lt;DISTRO&gt;-phycore-stm32mp1-mx</strong>'.</span></li></ul></li><li><p><span style="color: rgb(0,0,0);">Build environment will be set up and you should now be in a sub-folder named '~/PHYTEC_STM32MP1_BSP/</span><strong>build-&lt;DISTRO&gt;-phycore-stm32mp1-mx</strong>'<span style="color: rgb(0,0,0);">.</span></p></li></ul><h4 id="L876e-A4phyCORESTM32MP15xBSPManual-BuildtheImage">Build the Image</h4><p>To build your BSP images, please follow the corresponding section: <span style="color: rgb(0,0,0);"><a href="#L876e.A4phyCORESTM32MP15xBSPManual-BuildProcess">Build Process</a></span></p><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-BuildImagesforaNewCustomMachine">Build Images for a<strong> New Custom Machine<br /></strong></h3><p>If not already done, please refer to <span style="color: rgb(0,0,0);"><a href="#L876e.A4phyCORESTM32MP15xBSPManual-GetandInitializetheBSPEnvironment">Get and Initialize the BSP Environment</a></span> choosing the DISTRO fitting your project needs and any "phycore-stm32mp1-x" machine (the selected one does not matter at this step, because we will create a new machine). You<strong></strong>will be asked to read and accept (or not) the EULA lisence (mandatory to support GPU and third party content). After that, the build directory <strong>build-&lt;DISTRO&gt;-phycore-stm32mp1-x</strong> will be created.</p><p>A new machine can be created into different locations:</p><ul><li>into meta-phytec</li><li>into your own meta layer (<strong>recommended method</strong> to manage the yocto sources of your own projects without touching other layers)</li></ul><h4 id="L876e-A4phyCORESTM32MP15xBSPManual-Createanewmachineintometa-phytec">Create a new machine into meta-phytec</h4><ul><li>Copy the "meta-phytec/conf/machine/<strong>phycore-stm32mp-mx.conf</strong>" file and rename it (ex: "phycore-stm32mp1-myboard"):</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP$ cd layers/meta-phytec/conf/machine
host:~/PHYTEC_STM32MP1_BSP/layers/meta-phytec/conf/machine$ cp phycore-stm32mp1-mx.conf phycore-stm32mp1-myboard.conf  </pre></div></div><ul><li>Create symbolic link to EULA for the new machine (necessary to support GPU and third party content):</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP/layers/meta-phytec/conf/machine$ cd ../eula
host:~/PHYTEC_STM32MP1_BSP/layers/meta-phytec/conf/eula$ ln -s ST_EULA_SLA phycore-stm32mp1-myboard</pre></div></div><p>Before starting to build images for you new machine, you must configure it, editing the "meta-phytec/conf/machine/<strong>phycore-stm32mp1-myboard.conf</strong>" file:</p><ul><li>Modify the "NAME" and "DESCRIPTION" parameters, so that you can easily identify the machine to the Hardware. Example:</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">#@NAME: phycore-stm32mp1-myboard
#@DESCRIPTION: MyCompany MyBoard, phyCORE-STM32MP1, stm32mp157cac @650Mhz MPU, 3D GPU, 1GiB RAM, 8GiB eMMC, 16MB QSPI NOR</pre></div></div><ul><li>Edit some machine parameters&#xa0; located under the sections "<strong>User machine customization sections</strong>" as described in the previous section: <span style="color: rgb(0,0,0);"><a href="#L876e.A4phyCORESTM32MP15xBSPManual-CustomizetheYoctomachine">Customize the Yocto machine</a></span></li><li>Be sure to have set up correctly the two parameters of the "CubeMX Project Config" section:<ul><li><strong>CUBEMX_DTB</strong>: must be set to the device tree name (without file extension)</li><li><strong>CUBEMX_PROJECT</strong>: must be set to the Device tree path of CubeMX Board project (path <strong>relative to "meta-st/meta-st-stm32mp-addons"</strong> folder). For example, if the CubeMX project is located in "~/PHYTEC_STM32MP1_BSP/":</li></ul></li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark"># CubeMX Project Config
# =========================================================================
# Assign CubeMX Board devicetree name (without file extension)
CUBEMX_DTB = "stm32mp157c-myboard-mx"
# Assign CubeMX Board project path (relative to "meta-st-stm32mp-addons" layer path folder)
CUBEMX_PROJECT = "../../../phycore-stm32mp1-myboard/CA7/DeviceTree/myboard"</pre></div></div><ul><li>The new machine is now ready. You can now <strong>set up the build environment</strong> and <strong>build your BSP image</strong>. See the corresponding next sections of this chapter.</li></ul><h4 id="L876e-A4phyCORESTM32MP15xBSPManual-CreateaNewYoctoLayer">Create a New Yocto Layer</h4><p>The other option (more recommended) is to create your own layer which will contain your custom machine.</p><ul><li>If not already done, create a new yocto layer in the layers directory (we will call it "meta-racer" as example), with the command below:</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP$ cd build-&lt;DISTRO&gt;-&lt;MACHINE&gt;
host:~/PHYTEC_STM32MP1_BSP/build-&lt;DISTRO&gt;-&lt;MACHINE&gt;$ ../layers/openembedded-core/bitbake/bin/bitbake-layers create-layer ../layers/meta-racer</pre></div></div><ul><li>Then, create the two following directories in the new layer and copy the EULA file:</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP/build-&lt;DISTRO&gt;-&lt;MACHINE&gt;$ cd ../layers/meta-racer
host:~/PHYTEC_STM32MP1_BSP/layers/meta-racer$ mkdir conf/eula &amp;&amp; mkdir conf/machine &amp;&amp; cp ../meta-phytec/conf/eula/ST_EULA_SLA conf/eula </pre></div></div><p>Your custom layer is now ready for building custom machines. See next section for adding&#xa0; a new machine (based on "phycore-stm32mp1-mx.conf") in this new layer .</p><h4 id="L876e-A4phyCORESTM32MP15xBSPManual-CreateaNewMachineintheCreatedLayer">Create a New Machine in the Created Layer</h4><p>Now that our "meta-racer" is ready, we can create a new machine inside. We will call this machine "racer-board".</p><ul><li>Copy the "meta-phytec/conf/machine/<strong>phycore-stm32mp-mx.conf</strong>" file into the "conf/machine" directory of your layer (ex: "meta-racer") and rename it (ex: "racer-board"):</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP/layers/meta-racer$ cp ../meta-phytec/conf/machine/phycore-stm32mp1-mx.conf conf/machine/racer-board.conf  </pre></div></div><ul><li>Create symbolic link to EULA for the new machine (necessary to support GPU and third party content):</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP/layers/meta-racer$ cd conf/eula
host:~/PHYTEC_STM32MP1_BSP/layers/meta-racer$ ln -s ST_EULA_SLA racer-board</pre></div></div><p>Before starting to build images for your new machine, you must configure it, editing the "<strong>racer-board.conf</strong>" file:</p><ul><li>Modify the "<strong>@NAME</strong>" and "<strong>@DESCRIPTION</strong>" parameters, so that you can easily identify the machine to the Hardware. Example:</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">#@NAME: racer-board
#@DESCRIPTION: Racer RacerBoard,phyCORE-STM32MP1, stm32mp157cac @650Mhz MPU, 3D GPU, 1GiB RAM, 8GiB eMMC, 16MB QSPI NOR</pre></div></div><ul><li>As opposed to the "phycore-stm32mp1-x" machines which are located in the meta-phytec layer, we must also modify the "<strong>@NEEDED_BSPLAYERS</strong>" by adding "layers/meta-phytec", otherwise the meta-phytec BSP dependency is not added automatically with the openSTLinux environment setup script.</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">#@NEEDED_BSPLAYERS: layers/meta-st/meta-st-stm32mp-addons layers/meta-phytec</pre></div></div><ul><li>Edit some machine parameters&#xa0; located under the sections "<strong>User machine customization sections</strong>" as described in the previous section: <span style="color: rgb(0,0,0);"><a href="#L876e.A4phyCORESTM32MP15xBSPManual-CustomizetheYoctomachine">Customize the Yocto machine</a></span></li><li>Be sure to have set up correctly the two parameters of the "CubeMX Project Config" section:<ul><li><strong><em>CUBEMX_DTB</em></strong>: must be set to the device tree name (without file extension)</li><li><strong><em>CUBEMX_PROJECT</em></strong>: must be set to the Device tree path of CubeMX Board project (path <strong>relative to "meta-st/meta-st-stm32mp-addons"</strong> folder).</li></ul></li></ul><p>It could be a good idea to store your CubeMX project with generated device tree files in your custom layer "meta-racer". In this case, <strong><em>CUBEMX_PROJECT</em></strong>will be set this way:</p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark"># CubeMX Project Config
# =========================================================================
# Assign CubeMX Board devicetree name (without file extension)
CUBEMX_DTB = "stm32mp157c-racer-board-mx"
# Assign CubeMX Board project path (relative to "meta-st-stm32mp-addons" layer path folder)
CUBEMX_PROJECT = "../../meta-racer/racer-board/CA7/DeviceTree/racer-board"</pre></div></div><ul><li>The new machine is now ready. You can now set up the build environment and build your BSP image. See next sections.</li></ul><h4 id="L876e-A4phyCORESTM32MP15xBSPManual-SetUptheBuildEnvironment-1">Set Up the Build Environment</h4><p>OpenSTLinux build environment can be set up with or without Graphical User Interface (GUI).</p><p><u>1) Setup the build env without GUI:</u></p><ul><li>Run the following command (example for "racer-board" machine with EGLFS distro):</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP$ MACHINE=racer-board DISTRO=openstlinux-eglfs source openstlinux-init-phytec.sh</pre></div></div><ul><li><span style="color: rgb(0,0,0);">A popup will appear, and you will be asked to read and to accept the EULA license.</span></li><li><span style="color: rgb(0,0,0);">Build environment will be set up and you should now be in a sub-folder named '~/PHYTEC_STM32MP1_BSP/<strong>build-&lt;DISTRO&gt;-&lt;MACHINE&gt;</strong>' (build-openstlinuxeglfs-racer-board for example).</span></li></ul><p><u><span style="color: rgb(0,0,0);">2) Setup the build env with GUI:</span></u></p><ul><li>Removing the "MACHINE" and "DISTRO" parameters in the above command will open the GUI interface:</li></ul><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">host:~/PHYTEC_STM32MP1_BSP$ source openstlinux-init-phytec.sh</pre></div></div><ul><li><span style="color: rgb(0,0,0);">A popup will appear to will ask you to choose the BUIL_DIR. S</span>elect "<strong>NEW"</strong> (<span style="color: rgb(0,0,0);">Press 'space' to select and press 'enter' to validate</span>):</li></ul><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><a href= "https://wiki.phytec.com/download/attachments/519176224/image2021-12-10_16-38-16.png?version=1&amp;modificationDate=1658300847000&amp;api=v2" class="lightbox"><img class="confluence-embedded-image" draggable="false" height="150" src="https://wiki.phytec.com/download/attachments/519176224/image2021-12-10_16-38-16.png?version=1&amp;modificationDate=1658300847000&amp;api=v2" data-image-src="https://wiki.phytec.com/download/attachments/519176224/image2021-12-10_16-38-16.png?version=1&amp;modificationDate=1658300847000&amp;api=v2" data-linked-resource-id="519176227" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-12-10_16-38-16.png" data-base-url="https://wiki.phytec.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="519176224" data-linked-resource-container-version="3" alt="" style="max-width: 100%;"/></a></span></p><ul><li><span style="color: rgb(0,0,0);">Choose a DISTRO:</span></li></ul><p><span style="color: rgb(0,0,0);"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><a href= "https://wiki.phytec.com/download/attachments/519176224/image2021-2-25_9-57-32.png?version=1&amp;modificationDate=1658300847000&amp;api=v2" class="lightbox"><img class="confluence-embedded-image" draggable="false" height="250" src="https://wiki.phytec.com/download/attachments/519176224/image2021-2-25_9-57-32.png?version=1&amp;modificationDate=1658300847000&amp;api=v2" data-image-src="https://wiki.phytec.com/download/attachments/519176224/image2021-2-25_9-57-32.png?version=1&amp;modificationDate=1658300847000&amp;api=v2" data-linked-resource-id="519176231" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-2-25_9-57-32.png" data-base-url="https://wiki.phytec.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="519176224" data-linked-resource-container-version="3" alt="" style="max-width: 100%;"/></a></span></span></p><ul><li><span style="color: rgb(0,0,0);">Select your own machine (for example: "racer-board")</span><span style="color: rgb(0,0,0);"><br /></span></li></ul><p><span style="color: rgb(0,0,0);"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><a href= "https://wiki.phytec.com/download/attachments/519176224/image2022-7-11_16-53-30.png?version=1&amp;modificationDate=1658300847000&amp;api=v2" class="lightbox"><img class="confluence-embedded-image" draggable="false" height="400" src="https://wiki.phytec.com/download/attachments/519176224/image2022-7-11_16-53-30.png?version=1&amp;modificationDate=1658300847000&amp;api=v2" data-image-src="https://wiki.phytec.com/download/attachments/519176224/image2022-7-11_16-53-30.png?version=1&amp;modificationDate=1658300847000&amp;api=v2" data-linked-resource-id="519176225" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2022-7-11_16-53-30.png" data-base-url="https://wiki.phytec.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="519176224" data-linked-resource-container-version="3" alt="" style="max-width: 100%;"/></a></span><br /></span></p><ul><li><span style="color: rgb(0,0,0);">Build environment will be set up and you should now be in a sub-folder named '~/PHYTEC_STM32MP1_BSP/</span><strong>build-&lt;DISTRO&gt;-&lt;MACHINE&gt;</strong>'</li></ul><p><span style="color: rgb(0,0,0);"><em>Example of created build dir:</em></span><span style="color: rgb(0,0,0);">'~/PHYTEC_STM32MP1_BSP/</span><strong>build-openstlinuxeglfs-racer-board</strong>'</p><h4 id="L876e-A4phyCORESTM32MP15xBSPManual-BuildtheImage-1">Build the Image</h4><p>To build your BSP images, please follow the corresponding section: <span style="color: rgb(0,0,0);"><a href="#L876e.A4phyCORESTM32MP15xBSPManual-BuildProcess">Build Process</a></span></p><h1 id="L876e-A4phyCORESTM32MP15xBSPManual-HowtoUsetheCortex-M4MCU"><span>How </span><span>to Use the Cortex-M4 MCU</span></h1><p><span>The Arm® Cortex®-M4 coprocessor and its peripherals are directly inherited from the STM32 MCU family. STM32Cube™ environment that is usually used for STM32 MCU is also used for the STM32MP15x.</span></p><p><span>STM32Cube™ provides comprehensive embedded software libraries and tools, significantly reducing development effort, time, and cost. It is fully integrated into the STM32MPU Embedded Software distribution (<a href="https://wiki.st.com/stm32mpu/wiki/STM32MPU_Embedded_Software_distribution" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/STM32MPU_Embedded_Software_distribution</a>) thanks to the&#xa0;<strong>STM32CubeMP1 Firmware Package</strong> and tools such as&#xa0; <strong>STM32CubeMX</strong>,<strong> STM32CubeIDE, </strong>or<strong> STM32CubeProgrammer.</strong><br /></span></p><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-STM32CubeMP1‎OverviewSTM32CubeMP1Overview"><span>STM32CubeMP1‎ Overview</span><span><span class="confluence-anchor-link conf-macro output-inline" id="L876e.A4phyCORESTM32MP15xBSPManual-STM32CubeMP1Overview" data-hasbody="false" data-macro-name="anchor"></span></span></h2><p>STM32CubeMP1‎&#xa0;is the embedded software part of STM32Cube™, running on the Arm® Cortex®-M4 processor.&#xa0;It&#xa0;is based on the STM32Cube MCU package but has been adapted to a Linux Framework (OpenSTLinux).</p><ul><li>To get an overview of this package, use the following links:</li></ul><p><a href="https://wiki.st.com/stm32mpu/wiki/STM32CubeMP1_Package" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/STM32CubeMP1_Package</a></p><p><a href="https://wiki.st.com/stm32mpu/wiki/STM32CubeMP1_architecture" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/STM32CubeMP1_architecture</a></p><ul><li>The official git repository of STM32CubeMP1 is: <a href="https://github.com/STMicroelectronics/STM32CubeMP1" class="external-link" rel="nofollow">https://github.com/STMicroelectronics/STM32CubeMP1</a></li><li>The git repository with additional components from PHYTEC is: <a href="https://git.phytec.de/STM32CubeMP1/" class="external-link" rel="nofollow">https://git.phytec.de/STM32CubeMP1</a></li></ul><p>In our PHYTEC git repository, the "master" branch is a clone from the last official version of STM32CubeMP1ST (from STM Github). In the "x.y.z-phy" branches we have added additional components for the phyBOARD-Sargas development board specifics, so to provide some STM32CubeMP1 examples running on our development board.</p><p><u>Those additional components are the following:</u></p><ul><li>Drivers/BSP/STM32MP15xx_phyBOARD-Sargas</li><li>Projects/STM32MP15-phyBOARD-Sargas<ul><li>Applications<ul><li><p>OpenAMP/OpenAMP_TTY_echo</p></li><li>OpenAMP/OpenAMP_raw</li></ul></li><li>Demonstrations<ul><li>AI_Character_Recognition (=&gt; this application can be run using the GTK demo launcher of the Weston image)</li></ul></li><li>Examples<ul><li>GPIO/GPIO_EXTI</li><li>UART/UART_Receive_Transmit_Console</li><li>ADC/ADC_SingleConversion_Polling</li><li>ADC/ADC_SingleConversion_TriggerTimer_DMA</li></ul></li><li>Templates</li></ul></li></ul><p>The above projects are provided as examples. They are copied from "Projects/STM32MP157C-DK2" but with little adaptations for the phyBOARD-Sargas and can be used with the <strong>STM32MP1CubeIDE</strong> development tool.</p><p>The above projects from Applications and Examples directories are, by default, built and deployed on target within our BSP image. They can be run from Linux userspace (refer to next section: <a href="#L876e.A4phyCORESTM32MP15xBSPManual-HowtorunCortex-M4examplesontarget">How to run Cortex-M4 examples on target</a>).</p><div class="alert alert-success" data-hasbody="true" data-macro-name="tip"><p class="title" style="margin-left: 23px;">Tip</p><i class="fa fa-check-circle" style="float:left; margin-right: 10px;"></i><div class="confluence-information-macro-body"><p>Other M4 applications (like CoproSync or FreeRTOS) or M4 examples (like I2C, ADC, Crypto, Timers...) can be found on Projects/STM32MP157C-DK2 (or Projects/STM32MP157C-EV1) and can be easily adapted to the phyBOARD-Sargas or a custom board if needed.</p></div></div><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-CoprocessorManagementwithSTM32Cube‎MP1andLinux">Coprocessor Management with STM32Cube‎MP1 and Linux</h2><p>In order to manage the coprocessor system, services are proposed relying on the open-source Linux RemoteProc framework and the RPMsg frameworks.</p><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-Overview">Overview</h3><p>For an overview, go to <a href="https://wiki.st.com/stm32mpu/wiki/Coprocessor_management_overview" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/Coprocessor_management_overview.</a></p><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-LinuxCoprocessorManagement">Linux Coprocessor Management</h3><p>Information on the Linux coprocessor management software frameworks such as mailbox and <span class="mw-lingo-term">RPMsg:</span></p><p><span class="mw-lingo-term"><a href="https://wiki.st.com/stm32mpu/wiki/Linux_Mailbox_framework_overview" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/Linux_Mailbox_framework_overview</a></span></p><p><span class="mw-lingo-term"><a href="https://wiki.st.com/stm32mpu/wiki/Linux_remoteproc_framework_overview" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/Linux_remoteproc_framework_overview</a></span></p><p><span class="mw-lingo-term"><a href="https://wiki.st.com/stm32mpu/wiki/Linux_RPMsg_framework_overview" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/Linux_RPMsg_framework_overview</a></span></p><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-OthersCoprocessorManagementInformation">Others Coprocessor Management Information</h3><p><a href="https://wiki.st.com/stm32mpu/wiki/Coprocessor_management_troubleshooting_grid" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/Coprocessor_management_troubleshooting_grid</a></p><p><a href="https://wiki.st.com/stm32mpu/wiki/Coprocessor_power_management" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/Coprocessor_power_management</a></p><p><a href="https://wiki.st.com/stm32mpu/wiki/Coprocessor_resource_table" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/Coprocessor_resource_table</a></p><p><a href="https://wiki.st.com/stm32mpu/wiki/Exchanging_buffers_with_the_coprocessor" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/Exchanging_buffers_with_the_coprocessor</a></p><p><a href="https://wiki.st.com/stm32mpu/wiki/Resource_manager_for_coprocessing" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/Resource_manager_for_coprocessing</a></p><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-STM32CubeMP1‎DevelopmentGuidelines">STM32CubeMP1‎ Development Guidelines</h2><p><a href="https://wiki.st.com/stm32mpu/wiki/STM32CubeMP1_development_guidelines" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/STM32CubeMP1_development_guidelines</a></p><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-Howto‎---">How to‎...</h2><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-HowtoRunCortex-M4ExamplesonTargetHowtorunCortex-M4examplesontarget">How to Run Cortex-M4 Examples on Target<span><span class="confluence-anchor-link conf-macro output-inline" id="L876e.A4phyCORESTM32MP15xBSPManual-HowtorunCortex-M4examplesontarget" data-hasbody="false" data-macro-name="anchor"></span></span></h3><p><strong>1.&#xa0;Select boot mode for m4 examples:</strong></p><p>When booting the Linux image, select the dedicated device tree configuration for m4 examples. This device tree allows the allocation of specific IP, clock, and pin control assignments related to M4 examples.</p><p>To do that, select the boot mode <strong>phycore-stm32mp1-x-m4-examples</strong> during the <span class="mw-lingo-term">U-Boot</span> stage (boot mode number 3), as described in the following log:</p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">U-Boot 2020.01-stm32mp-r2.1 (Jan 06 2020 - 20:56:31 +0000)

CPU: STM32MP157FAC Rev.Z
Model: Phytec GmbH phycore-stm32mp1-4 Dev Board
Board: stm32mp1 in trusted mode (phycore-stm32mp1-4)
...
...
Found /mmc1_extlinux/phycore-stm32mp1-4_extlinux.conf
Retrieving file: /mmc1_extlinux/phycore-stm32mp1-4_extlinux.conf
851 bytes read in 20 ms (41 KiB/s)
Retrieving file: /splash.bmp
18244 bytes read in 21 ms (847.7 KiB/s)
Select the boot mode
1: OpenSTLinux
2: phycore-stm32mp1-4-a7-examples
3: phycore-stm32mp1-4-m4-examples
Enter choice:
Select the boot mode
1: &#xa0; &#xa0; &#xa0;OpenSTLinux
2: &#xa0; &#xa0; &#xa0;phycore-stm32mp1-4-a7-examples
3: &#xa0; &#xa0; &#xa0;phycore-stm32mp1-4-m4-examples
Enter choice:</pre></div></div><p><br /></p><div class="alert alert-warning" data-hasbody="true" data-macro-name="note"><p class="title" style="margin-left: 23px;">Note</p><i class="fa fa-exclamation-triangle" style="float:left; margin-right: 10px;"></i><div class="confluence-information-macro-body"><p>phycore-stm32mp1-x-m4-examples.dts kernel device tree allows you to define peripherals and pins that are assigned to the Cortex-M4. In this device tree example, a bunch of peripherals and pins are assigned to the cortex-M4 to be able to run the STM32CubeMP1 examples (avoiding conflicts with Linux).</p></div></div><p><strong>2. Select Examples or Applications to Run:</strong></p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">root@phycore-stm32mp1-4:~# cd /usr/local/Cube-M4-examples/STM32MP15-phyBOARD-Sargas
</pre></div></div><ul><li>For an Example use the following command:</li></ul><p><em>cd /usr/local/Cube-M4-examples/STM32MP15-phyBOARD-Sargas/Examples/&lt;example_type&gt;/&lt;example_to_run&gt;</em></p><ul><li>For an Application use the following command:</li></ul><p><em>cd /usr/local/Cube-M4-examples/STM32MP15-phyBOARD-Sargas/Applications/&lt;application_type&gt;/&lt;application_to_run&gt;</em></p><p>In each of those directories, following files are present:</p><ul><li><strong>fw_cortex_m4.sh</strong>: script to start / stop firmware</li><li><strong>README</strong>: all information about the application/example</li><li><strong>lib/firmware/&lt;example_or_application_to_run&gt;.elf</strong>: Cortex-M4 firmware of the application/example to run</li></ul><p><u>Example with GPIO_EXTI :</u></p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">root@phycore-stm32mp1-4:/usr/local/Cube-M4-examples/STM32MP15-phyBOARD-Sargas/Examples/GPIO/GPIO_EXTI# ls -l
total 8
-rwxr-xr-x 1 root root 4263 Sep 23 &#xa0;2020 README
-rwxr-xr-x 1 root root 1084 Sep 23 &#xa0;2020 fw_cortex_m4.sh
drwxr-xr-x 3 root root 1024 Sep 23 &#xa0;2020 lib
root@phycore-stm32mp1-4:/usr/local/Cube-M4-examples/STM32MP15-phyBOARD-Sargas/Examples/GPIO/GPIO_EXTI# ls -l lib/firmware/
total 4
-rwxr-xr-x 1 root root 68004 Sep 23 2020 GPIO_EXTI.elf
</pre></div></div><p><strong>3. Start the Firmware:</strong></p><p>Use the following command to start the selected example:</p><p><em>./fw_cortex_m4.sh start</em></p><p><u>Example with GPIO_EXTI:</u></p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">root@phycore-stm32mp1-4:/usr/local/Cube-M4-examples/STM32MP15-phyBOARD-Sargas/Examples/GPIO/GPIO_EXTI# ./fw_cortex_m4.sh start
fw_cortex_m4.sh: fmw_name=GPIO_EXTI.elf
[ 72.909122] remoteproc remoteproc0: powering up m4
[ 72.913032] remoteproc remoteproc0: Booting fw image GPIO_EXTI.elf, size 68004
[ 72.919852] remoteproc remoteproc0: header-less resource table
[ 72.925647] remoteproc remoteproc0: no resource table found for this firmware
[ 72.932696] remoteproc remoteproc0: header-less resource table
[ 73.012111] rproc-srm-core mlahb:m4@10000000:m4_system_resources: bound mlahb:m4@10000000:m4_system_resources:serial@4000f000 (ops 0xc0cfd7e4)
[ 73.038917] rproc-srm-core mlahb:m4@10000000:m4_system_resources: bound mlahb:m4@10000000:m4_system_resources:i2c@40012000 (ops 0xc0cfd7e4)
[ 73.068431] rproc-srm-core mlahb:m4@10000000:m4_system_resources: bound mlahb:m4@10000000:m4_system_resources:dac@40017000 (ops 0xc0cfd7e4)
[ 73.079861] rproc-srm-core mlahb:m4@10000000:m4_system_resources: bound mlahb:m4@10000000:m4_system_resources:timer@44000000 (ops 0xc0cfd7e4)
[ 73.092382] rproc-srm-core mlahb:m4@10000000:m4_system_resources: bound mlahb:m4@10000000:m4_system_resources:spi@44004000 (ops 0xc0cfd7e4)
[ 73.104798] rproc-srm-core mlahb:m4@10000000:m4_system_resources: bound mlahb:m4@10000000:m4_system_resources:dma@48001000 (ops 0xc0cfd7e4)
[ 73.117427] rproc-srm-core mlahb:m4@10000000:m4_system_resources: bound mlahb:m4@10000000:m4_system_resources:adc@48003000 (ops 0xc0cfd7e4)
[ 73.129877] rproc-srm-core mlahb:m4@10000000:m4_system_resources: bound mlahb:m4@10000000:m4_system_resources:hash@4c002000 (ops 0xc0cfd7e4)
[ 73.142468] rproc-srm-core mlahb:m4@10000000:m4_system_resources: bound mlahb:m4@10000000:m4_system_resources:rng@4c003000 (ops 0xc0cfd7e4)
[ 73.154978] rproc-srm-core mlahb:m4@10000000:m4_system_resources: bound mlahb:m4@10000000:m4_system_resources:crc@4c004000 (ops 0xc0cfd7e4)
[ 73.167518] rproc-srm-core mlahb:m4@10000000:m4_system_resources: bound mlahb:m4@10000000:m4_system_resources:cryp@4c005000 (ops 0xc0cfd7e4)
[ 73.180131] rproc-srm-core mlahb:m4@10000000:m4_system_resources: bound mlahb:m4@10000000:m4_system_resources:button (ops 0xc0cfd7e4)
[ 73.192099] rproc-srm-core mlahb:m4@10000000:m4_system_resources: bound mlahb:m4@10000000:m4_system_resources:m4_led (ops 0xc0cfd7e4)
[ 73.204291] remoteproc remoteproc0: remote processor m4 is now up</pre></div></div><p>The effects of these commands are:</p><ul><li>The remote processor system resource manager (<em>rproc_srm</em>) assign and configure the system resources of peripherals/pins assigned to the Cortex-M4 coprocessor (peripherals/pins that must be assigned to the Cortex-M4 are set in the <strong>Linux </strong>device tree)</li><li><p>The Linux Remote Processor (<em>remoteproc</em>) loads and starts the M4 firmware.</p></li></ul><p>In the particular case of the GPIO_EXTI M4 example firmware, pushing the User S5 button of the phyBOARD-Sargas will result in switching ON or switching OFF the LED2 (Red LED) on phyCORE-STM32MP15x (refer to the README file for details).</p><p><strong>4. Stop the Firmware:</strong></p><p>Use the following command to stop the example that is running:</p><p><em>./fw_cortex_m4.sh stop</em></p><p><u>Example:</u></p><div class="code panel pdl conf-macro output-block" style="" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl" style=""><pre class="frame table-responsive notranslate" data-syntaxhighlighter-params="brush: plain; gutter: false; theme: RDark" data-theme="RDark">root@phycore-stm32mp1-4:/usr/local/Cube-M4-examples/STM32MP15-phyBOARD-Sargas/Examples/GPIO/GPIO_EXTI# ./fw_cortex_m4.sh stop
fw_cortex_m4.sh: fmw_name=GPIO_EXTI.elf
[ 4296.915003] remoteproc remoteproc0: warning: remote FW shutdown without ack
[ 4296.920578] remoteproc remoteproc0: stopped remote processor m4</pre></div></div><p>This stops the firmware using the Linux Remote Processor component (<em>remoteproc</em>). It releases the relevant resource settings used by the example.</p><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-StarttheCoprocessorfromtheBootloader">Start the Coprocessor from the Bootloader</h3><p><a href="https://wiki.st.com/stm32mpu/wiki/How_to_start_the_coprocessor_from_the_bootloader" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/How_to_start_the_coprocessor_from_the_bootloader</a></p><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-ProtecttheProcessorFirmware">Protect the Processor Firmware</h3><p><a href="https://wiki.st.com/stm32mpu/wiki/How_to_protect_the_coprocessor_firmware" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/How_to_protect_the_coprocessor_firmware</a></p><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-AssignanInternalPeripheraltoaRuntimeContext">Assign an Internal Peripheral to a Runtime Context</h3><p><a href="https://wiki.st.com/stm32mpu/wiki/How_to_assign_an_internal_peripheral_to_a_runtime_context" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/How_to_assign_an_internal_peripheral_to_a_runtime_context</a></p><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-ConfigureSystemResources">Configure System Resources</h3><p><a href="https://wiki.st.com/stm32mpu/wiki/How_to_configure_system_resources" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/How_to_configure_system_resources</a></p><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-ExchangeLargeDataBufferswiththeCoprocessor-Principle">Exchange Large Data Buffers with the Coprocessor - Principle</h3><p><a href="https://wiki.st.com/stm32mpu/wiki/How_to_exchange_data_buffers_with_the_coprocessor" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/How_to_exchange_data_buffers_with_the_coprocessor</a></p><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-RetrieveCortex-M4LogsafterCrash">Retrieve Cortex-M4 Logs after Crash</h3><p><a href="https://wiki.st.com/stm32mpu/wiki/How_to_retrieve_Cortex-M4_logs_after_crash" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/How_to_retrieve_Cortex-M4_logs_after_crash</a></p><h1 id="L876e-A4phyCORESTM32MP15xBSPManual-STM32CubeIDEDevelopmentToolSTM32CubeIDEDevelopmentTool">STM32CubeIDE Development Tool<span><span class="confluence-anchor-link conf-macro output-inline" id="L876e.A4phyCORESTM32MP15xBSPManual-STM32CubeIDEDevelopmentTool" data-hasbody="false" data-macro-name="anchor"></span></span></h1><p>STM32CubeIDE is an advanced C/C++ development platform with peripheral configuration, code generation, code compilation, and debug features for STM32 microcontrollers and microprocessors. To see how to install and use this tool please refer to: <a href="https://wiki.st.com/stm32mpu/wiki/STM32CubeIDE" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/STM32CubeIDE</a></p><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-HowtoDebugaLinuxUserspaceApplicationCortex-A7HowtoDebugaLinuxUserspaceApplicationCortex-A7">How to Debug a Linux Userspace Application (Cortex-A7)<span><span class="confluence-anchor-link conf-macro output-inline" id="L876e.A4phyCORESTM32MP15xBSPManual-HowtoDebugaLinuxUserspaceApplication(Cortex-A7)" data-hasbody="false" data-macro-name="anchor"></span></span></h2><p><u><strong>Prerequisite:</strong></u><strong>&#xa0; </strong>SDK must have been installed as described in the section <a href="#L876e.A4phyCORESTM32MP15xBSPManual-OpenSTLinuxYoctoSDK">OpenSTLinux Yocto SDK</a></p><p>Please refer to the following link to know how to create a "userspace" project and debug it with STM32CubeIDE:</p><p><a href="https://wiki.st.com/stm32mpu/wiki/How_to_debug_a_user_space_application_with_STM32CubeIDE" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/How_to_debug_a_user_space_application_with_STM32CubeIDE</a></p><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-HowtoCreateaCortex-M4Project">How to Create a Cortex-M4 Project</h2><p>They are several ways to create a <strong>STM32CubeIDE project</strong> for Cortex-M4 application development, among the following methods:</p><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-GenerateaNewProjectfromaSTM32CubeMXProject-ioc">Generate a New Project from a STM32CubeMX Project (.ioc)</h3><p>This is ideal when you have configured your platform with this tool (for the pin muxing and clock configuration). In this case, there are two methods to generate the STM32CubeIDE project:</p><ul><li style="list-style-type: none;"><ul><li>1st method, use <em>STM32CubeIDE </em>:<strong> File → New → STM32 from an Existing STM32CubeMX Configuration File</strong></li></ul></li></ul><ul><li style="list-style-type: none;"><ul><li>2nd method, use <em>STM32CubeMX</em> code generator tool to create the STM32CubeIDE project:<ul><li>Open your STM32CubeMX project with the STM32CubeMX tool</li><li><strong>Project Manager → Project → Toolchain / IDE:</strong> must be is set to <em>STM32CubeIDE</em></li><li><strong>Generate Code </strong>=&gt; this<strong></strong>will create a STM32CubeIDE project with some codes (HAL/Middleware code for M4&#xa0; / device tree for A7) corresponding to your CubeMX project configuration<strong><br /></strong></li><li>The newly generated project can be opened in STM32CubeIDE:<strong> File → &#xa0;New → Open Projects from File System..</strong></li></ul></li></ul></li></ul><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-UsingtheTemplateProjectProvidedintheSTM32CubeMP1Package">Using the Template Project Provided in the <em>STM32CubeMP1</em> Package</h3><p>A template of <em><strong>STM32CubeIDE project</strong></em>for Cortex-M4 is provided in the <em><strong>STM32CubeMP1 package</strong></em>under <em>Projects/STM32MP15-phyBOARD-Sargas/Templates</em> (refer to <a href="#L876e.A4phyCORESTM32MP15xBSPManual-STM32CubeMP1Overview">STM32CubeMP1 Overview</a>). You can direcly create your own project using this template:</p><ul><li style="list-style-type: none;"><ul><li><strong>File →&#xa0; New → Open Projects from File System..</strong></li></ul></li></ul><h4 id="L876e-A4phyCORESTM32MP15xBSPManual-FromanExistingSW4STM32IDEProject">From an Existing SW4STM32 IDE Project</h4><p>Please refer to the following page:<a href="https://wiki.st.com/stm32mpu/wiki/How_to_move_from_SW4STM32_to_STM32CubeIDE" class="external-link" rel="nofollow"></a><a href="https://wiki.st.com/stm32mpu/wiki/How_to_move_from_SW4STM32_to_STM32CubeIDE" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/How_to_move_from_SW4STM32_to_STM32CubeIDE</a></p><h4 id="L876e-A4phyCORESTM32MP15xBSPManual-FromScratch">From Scratch</h4><ul><li style="list-style-type: none;"><ul><li><strong>File → New → STM32 Project</strong>: a Target selection menu will appear</li><li>In the <em>MCU/MPU filters</em>, select STM32MP1</li><li>In the <em>MCUs/MPUs list</em>, select the STM32MP1 SoC reference that equipped your phyCORE-STM32MP15x (example: select the <strong>STM32MP157CACx</strong> reference if you are using the <strong>phyCORE-STM32MP1-3</strong> SOM)</li><li>more info: <a href="https://wiki.st.com/stm32mpu/wiki/How_to_get_started_with_STM32CubeIDE_from_scratch" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/How_to_get_started_with_STM32CubeIDE_from_scratch</a>.</li></ul></li></ul><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-SpecificToolConfigurationforthephyBOARD-Sargas">Specific Tool Configuration for the phyBOARD-Sargas</h2><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-UseExternalJTAG">Use External JTAG</h3><p>As the phyBOARD-Sargas is not equipped with STLINK serial link / debug feature, a STLINK external JTAG (STLINK/V2 or STLINK-V3SET) or SEGGER J-LINK connected to the <strong>JTAG connector (X8)</strong> must be used to debug Cortex-M4 application (not needed for Linux application).</p><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-ConfiguretheMPUSerialDevice">Configure the MPU Serial Device</h3><p>As the phyBOARD-Sargas is equipped with an FDTI usb/serial device, the "MPU serial device" parameter of the tool must be modified as follow (on Linux computer):</p><ul><li>Connect your phyBOARD <strong>serial console</strong> to your computer (<strong>X13 connector</strong>)</li><li>Open the <strong><em>Preferences</em></strong> menu: <em><strong>Window</strong></em> =&gt; <strong><em>Preferences</em></strong></li><li>In the "Preferences" menu, open the submenu <em><strong>STM32Cube/MPU Serial</strong></em></li><li>And configure the MPU serial as below ("/dev/ttyUSB0" should be in the <em><strong>Prefered device</strong></em> list):</li></ul><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><a href= "https://wiki.phytec.com/download/attachments/205062313/image2020-8-7_11-24-24.png?version=1&amp;modificationDate=1596792265000&amp;api=v2" class="lightbox"><img class="confluence-embedded-image" draggable="false" alt="image2020-8-7_11-24-24.png" height="400" src="https://wiki.phytec.com/download/attachments/205062313/image2020-8-7_11-24-24.png?version=1&amp;modificationDate=1596792265000&amp;api=v2" data-image-src="https://wiki.phytec.com/download/attachments/205062313/image2020-8-7_11-24-24.png?version=1&amp;modificationDate=1596792265000&amp;api=v2" style="max-width: 100%;"/></a></span></p><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-Cortex-M4DebugModes">Cortex-M4 Debug Modes</h2><p>Two modes can be used to debug Arm® Cortex®-M firmware on STM32 <span class="mw-lingo-term">MPU</span> device: "<strong>Engineering mode</strong>" or "<strong>Production mode</strong>".</p><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-ProductionMode">Production Mode</h3><p>Production debug mode is close to a final product. To use the Production mode, the board must be booted with the "classic" procedure (boot mode is SD CARD / eMMC / NOR / NAND for Linux booting).</p><p>In this mode, Linux must be already booted and running on the Cortex-A7. Cortex-M4 firmware is loaded from an ssh connection (through Ethernet or USB OTG) and started with the <em>remoteproc </em>service running on the Cortex-A7.</p><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-EngineeringMode">Engineering Mode</h3><p>To use the Engineering mode, the board must be booted in a specific way called "Engineering boot Mode". In this mode, only Cortex-M is started and Firmware is loaded via <span class="mw-lingo-term">JTAG</span>/<span class="mw-lingo-term">SWD</span> into its dedicated <span class="mw-lingo-term">RAM</span>.</p><div class="alert alert-danger" data-hasbody="true" data-macro-name="warning"><p class="title" style="margin-left: 23px;">Warning</p><i class="fa fa-times-circle" style="float:left; margin-right: 10px;"></i><div class="confluence-information-macro-body"><p>Initialization normally done in Cortex-A7 (clock tree set-up, ...) have to be handled by Arm Cortex-M4.</p></div></div><div class="alert alert-success" data-hasbody="true" data-macro-name="tip"><p class="title" style="margin-left: 23px;">Tip</p><i class="fa fa-check-circle" style="float:left; margin-right: 10px;"></i><div class="confluence-information-macro-body"><p>Debugging in Engineering Mode with STM32 <span class="mw-lingo-term">MPU</span> device is very similar to a standard STM32 <span class="mw-lingo-term">MCU</span> debug, except that here, the Arm Cortex-M4 has only a dedicated memory, no flash memory type.</p></div></div><p>On phyBOARD-Sargas, set the <span style="color: rgb(0,0,0);"><strong>S7 DIP switch</strong></span> as follow before powering or resetting the board to enter the Engineering mode:</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><a href= "https://wiki.phytec.com/download/attachments/519176224/Engineering%20Mode.jpg?version=1&amp;modificationDate=1658300847000&amp;api=v2" class="lightbox"><img class="confluence-embedded-image" draggable="false" height="250" src="https://wiki.phytec.com/download/thumbnails/519176224/Engineering%20Mode.jpg?version=1&amp;modificationDate=1658300847000&amp;api=v2" data-image-src="https://wiki.phytec.com/download/attachments/519176224/Engineering%20Mode.jpg?version=1&amp;modificationDate=1658300847000&amp;api=v2" data-linked-resource-id="519176244" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Engineering Mode.jpg" data-base-url="https://wiki.phytec.com" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="519176224" data-linked-resource-container-version="3" alt="" style="max-width: 100%;"/></a></span></p><h2 class="firstHeading" id="L876e-A4phyCORESTM32MP15xBSPManual-HowtoDebugaCortex-M4Application">How to Debug a Cortex-M4 Application</h2><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-EngineeringMode-1">Engineering Mode</h3><ul><li>To use this mode, first check that:<ul><li>your board is correctly connected to the host PC with the JTAG</li><li>the&#xa0; boot mode is set correctly on your board to <strong>Engineering mode</strong> (with <strong>S7 DIP switch</strong> on phyBOARD-Sargas)</li><li>the application to debug contains some code that configures the system clock in case the Engineering mode is detected (the examples/applications given in the STM32CubeMP1 contain this code, so you can use it as a reference).</li></ul></li><li>To start debugging:<ul><li>on the left Project Explorer section, click on your Project and launch the <strong><em>Debug Configuration</em></strong>menu with <em><strong>Run</strong></em> → <em><strong>Debug as</strong></em> → <em><strong>STM32 Cortex-M C/C++ Application</strong></em></li><li>in the Debug Configuration menu, go to <strong><em>Debugger </em></strong>tab, select the option <strong><em>thru JTGA/<span class="mw-lingo-term">SWD</span> link (Engineering mode)</em></strong></li><li>if you are using an ST-LINK, you do not have to change more options</li><li>click on Debug</li></ul></li></ul><p><u>Debug configuration setting for Engineering mode:</u></p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><a href= "https://wiki.phytec.com/download/attachments/519176224/Capture%20d%E2%80%99%C3%A9cran%20de%202021-02-12%2009-53-20.png?version=1&amp;modificationDate=1658300847000&amp;api=v2" class="lightbox"><img class="confluence-embedded-image" draggable="false" height="400" src="https://wiki.phytec.com/download/attachments/519176224/Capture%20d%E2%80%99%C3%A9cran%20de%202021-02-12%2009-53-20.png?version=1&amp;modificationDate=1658300847000&amp;api=v2" data-image-src="https://wiki.phytec.com/download/attachments/519176224/Capture%20d%E2%80%99%C3%A9cran%20de%202021-02-12%2009-53-20.png?version=1&amp;modificationDate=1658300847000&amp;api=v2" data-linked-resource-id="519176238" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Capture d’écran de 2021-02-12 09-53-20.png" data-base-url="https://wiki.phytec.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="519176224" data-linked-resource-container-version="3" alt="" style="max-width: 100%;"/></a></span></p><h3 id="L876e-A4phyCORESTM32MP15xBSPManual-ProductionMode-1">Production Mode</h3><ul><li>To use this mode, first check that:<ul><li>your board is correctly connected to the host PC with:<ul><li>a JTAG (ST-LINK or SEGGER J-LINK)</li><li>a Network connection: USB OTG (Ethernet point to point) or Ethernet (IP address attributed by DHCP server or to be manually configured)</li><li>a Serial Link (to access the Linux remote console).</li></ul></li><li>your board is powered on and Linux is booted and running</li><li>the application to debug contains some code that configures the system clock in case the Engineering mode is detected (the examples/applications given in the STM32CubeMP1 contains this code, so you can use it as a reference).</li></ul></li></ul><div class="alert alert-success" data-hasbody="true" data-macro-name="tip"><p class="title" style="margin-left: 23px;">Tip</p><i class="fa fa-check-circle" style="float:left; margin-right: 10px;"></i><div class="confluence-information-macro-body"><p>With the phyBOARD-Sargas, to create the network connection, the easiest way is it to use the USB OTG (connector X12) as it is already configured with a fixed IP adress <strong>192.168.7.1</strong> (see <a href="#L876e.A4phyCORESTM32MP15xBSPManual-CreateanSSHConnectionwithUSBOTGorEthernet">Create an SSH Connection with USB OTG or Ethernet</a>)</p></div></div><ul><li>To start debugging:<ul><li>on the left Project Explorer section, click on your Project and launch the <strong><em>Debug Configuration</em></strong>menu with <em><strong>Run</strong></em> → <em><strong>Debug as</strong></em> → <em><strong>STM32 Cortex-M C/C++ Application</strong></em></li><li>in the Debug Configuration menu, go to <strong><em>Debugger </em></strong>tab, keep the default option which is: <strong><em>thru Linux Core (Production mode)</em></strong></li><li>In the <strong><em>Connection</em></strong> section select the <em><strong>Serial Port</strong></em> (ex: MPU Serial (/dev/ttyUSB0)) and the <em><strong>Ethernet address</strong></em> of your target (ex: 192.168.7.1)</li><li>click on Debug</li></ul></li></ul><p><u>Debug configuration setting for production mode:</u></p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><a href= "https://wiki.phytec.com/download/attachments/519176224/Capture%20d%E2%80%99%C3%A9cran%20de%202021-02-12%2010-57-04.png?version=1&amp;modificationDate=1658300847000&amp;api=v2" class="lightbox"><img class="confluence-embedded-image" draggable="false" height="400" src="https://wiki.phytec.com/download/attachments/519176224/Capture%20d%E2%80%99%C3%A9cran%20de%202021-02-12%2010-57-04.png?version=1&amp;modificationDate=1658300847000&amp;api=v2" data-image-src="https://wiki.phytec.com/download/attachments/519176224/Capture%20d%E2%80%99%C3%A9cran%20de%202021-02-12%2010-57-04.png?version=1&amp;modificationDate=1658300847000&amp;api=v2" data-linked-resource-id="519176237" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Capture d’écran de 2021-02-12 10-57-04.png" data-base-url="https://wiki.phytec.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="519176224" data-linked-resource-container-version="3" alt="" style="max-width: 100%;"/></a></span></p><p>At debug launch, the following pop-up will appear:</p><ul><li><span style="color: rgb(255,0,0);"><span style="color: rgb(0,0,0);">a message requesting the SSH Password =&gt; User ID = "root" / no password (you can check the box "save the password", so it will not be asked again)</span><br /></span></li><li><span style="color: rgb(0,0,0);">a Warning message: The RSA key has to be approved =&gt; click on "Yes"<br /></span></li><li><span style="color: rgb(0,0,0);">a Progress bar information that informs about the firmware loading progress into the target</span></li><li><span style="color: rgb(0,0,0);">a message "Confirm Perspective switch" =&gt; click on "Switch" (you can check "remember my decision, so it will not be asked again)</span></li></ul><p><span style="color: rgb(0,0,0);">When debug mode is ready, the following logs will appear in red in the console, with some information from the debugger:</span></p><p><span style="color: rgb(0,0,0);"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><a href= "https://wiki.phytec.com/download/attachments/519176224/image2021-2-12_15-57-17.png?version=1&amp;modificationDate=1658300847000&amp;api=v2" class="lightbox"><img class="confluence-embedded-image" draggable="false" height="400" src="https://wiki.phytec.com/download/attachments/519176224/image2021-2-12_15-57-17.png?version=1&amp;modificationDate=1658300847000&amp;api=v2" data-image-src="https://wiki.phytec.com/download/attachments/519176224/image2021-2-12_15-57-17.png?version=1&amp;modificationDate=1658300847000&amp;api=v2" data-linked-resource-id="519176235" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-2-12_15-57-17.png" data-base-url="https://wiki.phytec.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="519176224" data-linked-resource-container-version="3" alt="" style="max-width: 100%;"/></a></span></span></p><p><u>Below are the 3 steps which are done to enter the Debug session in Production mode:</u></p><p>1. The firmware-built binary is transferred to the target through the network link (ssh protocol). It is copied in the Cortex-A Linux file system.</p><p>2. The firmware is loaded to Cortex-M core thanks to the “<em>remoteproc</em>” framework.</p><p>3. The Debug session is started via JTAG/SWD connection.</p><p><u>Basic commands to debug an application:</u></p><ul><li>Set breakpoints to desired lines → Make sure that "Skip all breakpoints" button is not active <span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><a href= "https://wiki.phytec.com/download/attachments/519176224/image2020-11-9_13-59-1.png?version=1&amp;modificationDate=1658300847000&amp;api=v2" class="lightbox"><img class="confluence-embedded-image" draggable="false" height="31" src="https://wiki.phytec.com/download/thumbnails/519176224/image2020-11-9_13-59-1.png?version=1&amp;modificationDate=1658300847000&amp;api=v2" data-image-src="https://wiki.phytec.com/download/attachments/519176224/image2020-11-9_13-59-1.png?version=1&amp;modificationDate=1658300847000&amp;api=v2" data-linked-resource-id="519176233" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2020-11-9_13-59-1.png" data-base-url="https://wiki.phytec.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="519176224" data-linked-resource-container-version="3" alt="" style="max-width: 100%;"/></a></span></span></li><li>Start program and debugging with "Resume" button <span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><a href= "https://wiki.phytec.com/download/attachments/519176224/image2020-11-9_14-6-14.png?version=1&amp;modificationDate=1658300847000&amp;api=v2" class="lightbox"><img class="confluence-embedded-image" draggable="false" height="31" src="https://wiki.phytec.com/download/thumbnails/519176224/image2020-11-9_14-6-14.png?version=1&amp;modificationDate=1658300847000&amp;api=v2" data-image-src="https://wiki.phytec.com/download/attachments/519176224/image2020-11-9_14-6-14.png?version=1&amp;modificationDate=1658300847000&amp;api=v2" data-linked-resource-id="519176234" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2020-11-9_14-6-14.png" data-base-url="https://wiki.phytec.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="519176224" data-linked-resource-container-version="3" alt="" style="max-width: 100%;"/></a></span></span></li><li><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size">Stop debug session with "Terminate" button <span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><a href= "https://wiki.phytec.com/download/attachments/519176224/image2021-2-12_16-19-4.png?version=1&amp;modificationDate=1658300847000&amp;api=v2" class="lightbox"><img class="confluence-embedded-image" draggable="false" height="16" src="https://wiki.phytec.com/download/thumbnails/519176224/image2021-2-12_16-19-4.png?version=1&amp;modificationDate=1658300847000&amp;api=v2" data-image-src="https://wiki.phytec.com/download/attachments/519176224/image2021-2-12_16-19-4.png?version=1&amp;modificationDate=1658300847000&amp;api=v2" data-linked-resource-id="519176232" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-2-12_16-19-4.png" data-base-url="https://wiki.phytec.com" data-linked-resource-content-type="image/png" data-linked-resource-container-id="519176224" data-linked-resource-container-version="3" alt="" style="max-width: 100%;"/></a></span></span></li></ul><h1 id="L876e-A4phyCORESTM32MP15xBSPManual-STM32MP15xLowPowerModes">STM32MP15x Low Power Modes</h1><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-LowPowerOverview">Low Power Overview</h2><p><a href="https://wiki.st.com/stm32mpu/wiki/Power_overview" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/Power_overview</a></p><h2 id="L876e-A4phyCORESTM32MP15xBSPManual-HowtoDefineYourLowPowerStrategy">How to Define Your Low Power Strategy</h2><p><a href="https://wiki.st.com/stm32mpu/wiki/How_to_define_your_low-power_strategy" class="external-link" rel="nofollow">https://wiki.st.com/stm32mpu/wiki/How_to_define_your_low-power_strategy</a></p><h1 id="L876e-A4phyCORESTM32MP15xBSPManual-RevisionHistory">Revision History</h1><div class="frame table-responsive table-sm table-hover mb-5" style="max-height: 100% !Important;"><table class="confluenceTable ce-table" style=""><colgroup><col style="width: 18.8053%;"/><col style="width: 61.0619%;"/><col style="width: 20.1327%;"/></colgroup><tbody><tr><th class="" style="background-color: #F4F5F7 !Important;">Version</th><th class="" style="background-color: #F4F5F7 !Important;">Changes</th><th class="" style="background-color: #F4F5F7 !Important;">Date</th></tr><tr><td class="confluenceTd">L-876e.A0</td><td class="confluenceTd">Preliminary Edition</td><td class="confluenceTd">11.09.2020</td></tr><tr><td class="confluenceTd">L-876e.A1</td><td class="confluenceTd">Update for PD21.1.0</td><td class="confluenceTd">02.03.2021</td></tr><tr><td class="confluenceTd"><span style="color: rgb(0,0,0);">L-876e.A2</span></td><td class="confluenceTd"><p><span style="color: rgb(0,0,0);">Update for PD21.2.0</span></p><p><span style="color: rgb(0,0,0);">Introducing Device Tree Overlay </span><span style="color: rgb(0,0,0);">add phyCAM-P VM-010 and RS485 add-ons</span></p></td><td class="confluenceTd"><span style="color: rgb(0,0,0);">12.10.2021</span></td></tr><tr><td class="confluenceTd"><span style="color: rgb(0,0,0);">L-876e.A3</span></td><td class="confluenceTd"><p><span style="color: rgb(0,0,0);">Update for PD21.2.1:</span></p><ul><li><span style="color: rgb(0,0,0);">Update following sections:</span></li></ul><p><span style="color: rgb(0,0,0);">5.4 Choose a BSP Image to be Build and Deployed</span></p><p><span style="color: rgb(0,0,0);">5.5 Get and Initialize the BSP Environment</span></p><ul><li><span style="color: rgb(0,0,0);">Added the following chapter:</span></li></ul><p><span style="color: rgb(0,0,0);">12.2 Build yocto machine from generated Device Tree</span></p></td><td class="confluenceTd"><span style="color: rgb(0,0,0);">13.12.2021</span></td></tr><tr><td class="confluenceTd"><span style="color: rgb(0,0,0);">L-876e.A4</span></td><td class="confluenceTd"><p><span style="color: rgb(0,0,0);">Updates for PD22.1.0:</span></p><ul><li><span style="color: rgb(0,0,0);">5.8 Generated BSP Image Binaries</span></li><li><span style="color: rgb(0,0,0);">6.4 Create an SD Card Image:<br /></span><ul><li><span style="color: rgb(0,0,0);">add WIC</span></li></ul></li><li><span style="color: rgb(0,0,0);">8.11.1 Enabling WLAN / Bluetooth Module</span><ul><li><span style="color: rgb(0,0,0);">add reference to LAN-102e.A1</span></li></ul></li><li><span style="color: rgb(0,0,0);">10.3 phyCORE-STM32MP15x and phyBOARD-Sargas Device Tree:</span><ul><li><span style="color: rgb(0,0,0);">correct the cites of Cortex M4 and A7 examples</span></li></ul></li><li><span style="color: rgb(0,0,0);">10.4.1 List of phyBOARD-Sargas Device Tree Overlays: </span><ul><li><span style="color: rgb(0,0,0);">add phyCAM-P VM-016</span></li><li><span style="color: rgb(0,0,0);">rename device tree overlays of phyCAM-P VM-010</span></li></ul></li></ul><ul><li><span style="color: rgb(0,0,0);">10.7.3.2 Rebuild u-boot:</span><ul><li><span style="color: rgb(0,0,0);">add note for FIP usage<br /></span></li></ul></li><li><span style="color: rgb(0,0,0);">12 The STM32CubeMX Tool<br /></span><ul><li><span style="color: rgb(0,0,0);">minor updates</span></li></ul></li><li><span style="color: rgb(0,0,0);">13.1 STM32CubeMP1‎ Overview:</span><ul><li><span style="color: rgb(0,0,0);">add the new projects examples<br /></span></li></ul></li><li><span style="color: rgb(0,0,0);">update some external links<br /></span></li></ul></td><td class="confluenceTd"><span style="color: rgb(0,0,0);">19.07.2022<br /></span></td></tr></tbody></table></div></div></div></div><script> document.addEventListener('DOMContentLoaded', function() { document.title = "L-876e.A4 phyCORE-STM32MP15x BSP Manual"; tocbot.init({ tocSelector: '.js-toc', contentSelector: '.js-content', headingSelector: 'h1, h2, h3, h4', collapseDepth: 6, }); }); </script></div></div></div></div></section><!--TYPO3SEARCH_end--></div></main><footer id="footer"><div class="footer-section small d-none d-lg-block"><nav class="container"><div class="row"><div class="col"><div class="frame frame-type-wst3bootstrap_fluidrow frame-layout-0 frame-space-after-large" id="c47849"><div class="row"><div class=" d-none d-sm-none d-md-none d-lg-block col-lg-2 d-xl-block col-xl-2 colindex-0" id="div"><div class="frame frame-type-textpic frame-layout-0" id="c4670"><div class="ce-textpic ce-left ce-above"><div class="ce-gallery" data-ce-columns="1" data-ce-images="1"><div class="row"><div class=" d-block col-12 d-sm-block col-sm-12 d-md-block col-md-12 d-lg-block col-lg-12 d-xl-block col-xl-12 "><figure class="image "><div><img src="/fileadmin/phytec_base/images/icons/Logos/logo-PHYTEC.svg" alt="logo-PHYTEC.svg " title="" class="img-fluid "/></div></figure></div></div></div></div></div></div><div class=" d-none d-sm-none d-md-none d-lg-block col-lg-10 d-xl-block col-xl-10 colindex-1" id="div"><div class="frame frame-type-text frame-layout-0 frame-padding-top-small" id="c47850"><p><span class="teal4"><strong>&nbsp; &nbsp;Service-Hotline: +49 (0)6131 9221-32 </strong>(Montag bis Freitag von 9:00 bis 17:00 Uhr)</span></p></div></div></div></div><div class="frame frame-type-wst3bootstrap_fluidrow frame-layout-0" id="c47851"><div class="row"><div class=" d-block col-12 d-sm-block col-sm-12 d-md-block col-md-12 d-lg-block col-lg-9 d-xl-block col-xl-9 colindex-0" id="div"><div class="frame frame-type-wst3bootstrap_fluidrow frame-layout-0 frame-space-after-large" id="c4490"><div class="row"><div class=" d-block col-3 d-sm-block col-sm-3 d-md-block col-md-3 d-lg-block col-lg-3 d-xl-block col-xl-3 colindex-0" id="div"><div class="frame frame-type-text frame-layout-0" id="c17271"><p><strong>Produkte</strong></p></div><div class="frame frame-type-menu_pages frame-layout-0" id="c4491"><ul class="nav flex-column"><li class="nav-item"><a class="nav-link" href="/produkte/system-on-modules/" target="_self" title="System on Modules"><span>System on Modules</span></a></li><li class="nav-item"><a class="nav-link" href="/produkte/single-board-computer/" target="_self" title="Single Board Computer"><span>Single Board Computer</span></a></li><li class="nav-item"><a class="nav-link" href="/produkte/embedded-vision/" target="_self" title="Embedded Vision Lösungen"><span>Embedded Vision Lösungen</span></a></li><li class="nav-item"><a class="nav-link" href="/produkte/fertige-geraete-oem/" target="_self" title="OEM-Lösungen"><span>OEM-Lösungen</span></a></li><li class="nav-item"><a class="nav-link" href="/leistungen/phybsp/" target="_self" title="Betriebssysteme"><span>Betriebssysteme</span></a></li><li class="nav-item"><a class="nav-link" href="/produkte/development-kits/" target="_self" title="Development Kits"><span>Development Kits</span></a></li></ul></div></div><div class=" d-block col-3 d-sm-block col-sm-3 d-md-block col-md-3 d-lg-block col-lg-3 d-xl-block col-xl-3 colindex-1" id="div"><div class="frame frame-type-text frame-layout-0" id="c17273"><p><strong>Leistungen</strong></p></div><div class="frame frame-type-menu_pages frame-layout-0" id="c4493"><ul class="nav flex-column"><li class="nav-item"><a class="nav-link" href="/leistungen/ihr-prototyp/" target="_self" title="Prototypentwicklung"><span>Prototypentwicklung</span></a></li><li class="nav-item"><a class="nav-link" href="/leistungen/custom-som/" target="_self" title="Custom SOM"><span>Custom SOM</span></a></li><li class="nav-item"><a class="nav-link" href="/leistungen/custom-sbc/" target="_self" title="Custom SBC"><span>Custom SBC</span></a></li><li class="nav-item"><a class="nav-link" href="/leistungen/produktions-services/" target="_self" title="Produktions-Services"><span>Produktions-Services</span></a></li><li class="nav-item"><a class="nav-link" href="/unternehmen/schulungen-trainings/" target="_self" title="Schulungen + Trainings"><span>Schulungen + Trainings</span></a></li></ul></div></div><div class=" d-block col-3 d-sm-block col-sm-3 d-md-block col-md-3 d-lg-block col-lg-3 d-xl-block col-xl-3 colindex-2" id="div"><div class="frame frame-type-text frame-layout-0" id="c17274"><p><strong>Support</strong></p></div><div class="frame frame-type-menu_pages frame-layout-0" id="c4495"><ul class="nav flex-column"><li class="nav-item"><a class="nav-link" href="/online-showroom/" target="_self" title="Online-Showroom"><span>Online-Showroom</span></a></li><li class="nav-item"><a class="nav-link" href="/leistungen/fae-service/" target="_self" title="FAE-Service"><span>FAE-Service</span></a></li><li class="nav-item"><a class="nav-link" href="/produkte/software-releases/" target="_self" title="Software Releases"><span>Software Releases</span></a></li><li class="nav-item"><a class="nav-link" href="/support/help-desk/" target="_self" title="Help Desk"><span>Help Desk</span></a></li></ul></div></div><div class=" d-block col-3 d-sm-block col-sm-3 d-md-block col-md-3 d-lg-block col-lg-3 d-xl-block col-xl-3 colindex-3" id="div"><div class="frame frame-type-text frame-layout-0" id="c17275"><p><strong>Unternehmen</strong></p></div><div class="frame frame-type-menu_pages frame-layout-0" id="c4497"><ul class="nav flex-column"><li class="nav-item"><a class="nav-link" href="/unternehmen/kontakt/" target="_self" title="Kontakt"><span>Kontakt</span></a></li><li class="nav-item"><a class="nav-link" href="/unternehmen/ueber-uns/" target="_self" title="Über uns"><span>Über uns</span></a></li><li class="nav-item"><a class="nav-link" href="/unternehmen/karriere/" target="_self" title="Offene Stellen"><span>Offene Stellen</span></a></li><li class="nav-item"><a class="nav-link" href="/unternehmen/messen/" target="_self" title="Messen 2023"><span>Messen 2023</span></a></li><li class="nav-item"><a class="nav-link" href="/unternehmen/referenzen/" target="_self" title="Referenzen"><span>Referenzen</span></a></li><li class="nav-item"><a class="nav-link" href="/unternehmen/newsletter/" target="_self" title="Newsletter"><span>Newsletter</span></a></li></ul></div></div><div class=" d-none d-sm-none d-md-none d-lg-block col-lg-2 d-xl-block col-xl-2 colindex-4" id="div"></div></div></div><div class="frame frame-type-wst3bootstrap_fluidrow frame-layout-0 frame-space-before-large frame-padding-top-medium" id="c47854"><div class="row"><div class=" d-block col-3 d-sm-block col-sm-3 d-md-block col-md-3 d-lg-block col-lg-3 d-xl-block col-xl-3 colindex-0" id="div"><div class="frame d-inline-block frame-type-phytecbasetemplate_inlineicon frame-layout-0" id="c4504"><div class="ce-inlineicon ce-left ce-top ce-relative mr-2"><div class="ce-gallery"><a href="https://www.linkedin.com/company/phytec-messtechnik-gmbh" target="_blank" rel="noopener"><img src="/fileadmin/phytec_base/images/icons/Icons/icon-Linkedin-mob.svg" alt="LinkedIn" title="LinkedIn" class=""/></a></div></div></div><div class="frame d-inline-block frame-type-phytecbasetemplate_inlineicon frame-layout-0 frame-space-before-small" id="c4502"><div class="ce-inlineicon ce-left ce-top ce-relative mr-2"><div class="ce-gallery"><a href="https://www.facebook.com/PHYTEC.Mainz" target="_blank" rel="noopener"><img src="/fileadmin/phytec_base/images/icons/Icons/icon-facebook-mob.svg" alt="Facebook" title="Facebook" class=""/></a></div></div></div><div class="frame d-inline-block frame-type-phytecbasetemplate_inlineicon frame-layout-0" id="c4505"><div class="ce-inlineicon ce-left ce-top ce-relative mr-2"><div class="ce-gallery"><a href="https://www.xing.com/companies/phytecmesstechnikgmbh" target="_blank" rel="noopener"><img src="/fileadmin/phytec_base/images/icons/Icons/icon-Xing-mob.svg" alt="Xing" title="Xing" class=""/></a></div></div></div><div class="frame d-inline-block frame-type-phytecbasetemplate_inlineicon frame-layout-0" id="c4500"><div class="ce-inlineicon ce-left ce-top ce-relative mr-2"><div class="ce-gallery"><a href="https://twitter.com/PHYTEC_Gmbh" target="_blank" rel="noopener"><img src="/fileadmin/phytec_base/images/icons/Icons/icon-twitter-mob.svg" alt="Twitter" title="Twitter" class=""/></a></div></div></div><div class="frame d-inline-block frame-type-phytecbasetemplate_inlineicon frame-layout-0" id="c4506"><div class="ce-inlineicon ce-left ce-top ce-relative mr-2"><div class="ce-gallery"><a href="https://www.instagram.com/phytec_germany/" target="_blank" rel="noopener"><img src="/fileadmin/phytec_base/images/icons/Icons/icon-insta-mob.svg" alt="Instagram" title="Instagram" class=""/></a></div></div></div><div class="frame d-inline-block frame-type-phytecbasetemplate_inlineicon frame-layout-0" id="c4501"><div class="ce-inlineicon ce-left ce-top ce-relative mr-0"><div class="ce-gallery"><a href="https://www.youtube.com/user/PhytecMainz" target="_blank" rel="noopener"><img src="/fileadmin/phytec_base/images/icons/Icons/icon-YT-mob.svg" alt="YouTube" title="YouTube" class=""/></a></div></div></div></div><div class=" d-block col-9 d-sm-block col-sm-9 d-md-block col-md-9 d-lg-block col-lg-9 d-xl-block col-xl-9 colindex-1" id="div"><div class="frame frame-type-phytecbasetemplate_inlineicon frame-layout-0" id="c4675"><div class="ce-inlineicon ce-left ce-top ce-relative mr-0"><div class="ce-gallery"><a href="https://blog.phytec.de/" target="_blank" rel="noopener"><img src="/fileadmin/phytec_base/images/icons/Icons/phytec-blog.svg" alt="Blog" title="Blog" class=""/></a></div></div></div></div></div></div><div class="frame frame-type-text frame-layout-0 frame-space-before-extra-large" id="c19788"><p><a href="/impressum/" target="_self">Impressum</a>&nbsp;&nbsp;<span class="white">|</span>&nbsp;&nbsp;<a href="/datenschutzerklaerung/" target="_self">Datenschutzerklärung</a>&nbsp;&nbsp;<span class="white">|</span>&nbsp;&nbsp;<a href="/cookie-richtlinie/" target="_self">Cookie-Richtlinie</a>&nbsp;&nbsp;<span class="white">|</span>&nbsp;&nbsp;<a href="/zahlung-versand/" target="_self">Zahlung &amp; Versand</a>&nbsp;&nbsp;<span class="white">|</span>&nbsp;&nbsp;<a href="/allgemeine-geschaeftsbedingungen/" target="_blank" rel="noopener">Allgemeine Geschäftsbedingungen</a>&nbsp;<span class="white">|</span>&nbsp;<a href="/sitemap/" target="_self">Sitemap</a><br /><span class="teal4">© 2022 PHYTEC Messtechnik GmbH | Barcelona-Allee 1 | 55129 Mainz | Germany | <strong>contact@phytec.de</strong></span></p></div></div><div class=" d-block col-12 d-sm-block col-sm-12 d-md-block col-md-3 d-lg-block col-lg-3 d-xl-block col-xl-3 colindex-1" id="div"><div class="frame frame-type-text frame-layout-0" id="c47853"><p><strong>Jetzt Newsletter abonnieren!</strong></p></div><div class="frame frame-type-html frame-layout-0" id="c47852"><link href="//cdn-images.mailchimp.com/embedcode/classic-071822.css" rel="stylesheet" type="text/css"><style type="text/css"> #mc_embed_signup{ clear:left; } #mc_embed_signup form{ margin: 0; } .content__gdprLegal p{ font-size: 80% !important; } #mc_embed_signup .mc-field-group { width: 100%; min-height: 40px; } #mc_embed_signup .mc-field-group input { border-radius: 0; border: 0; padding: 4px 6px; background-color: #E6F3F4; height: 2rem; } #mc_embed_signup .button{ background-color: #006E73; width: 100%; font-weight: 500; border-radius: 0; } #mc_embed_signup #mc-embedded-subscribe-form div.mce_inline_error{ border-radius: 0; } #mc_embed_signup .button:hover{ background-color: #03C9D6; } #mc_embed_signup div#mce-responses{ margin: 0; padding: 0; } #mc_embed_signup #mce-success-response{ color: white; font-weight: 500; } #mc_embed_signup .mc-field-group label { display: flex; } #mc-embedded-subscribe-form input[type=checkbox]{ display: inline; width: 50px; } #mergeRow-gdpr { margin-top: 0; } #mergeRow-gdpr fieldset label { font-weight: normal; color: #ffffff; } #mc-embedded-subscribe-form .mc_fieldset{ border:none; min-height: 0px; padding-bottom:0px; } </style><div id="mc_embed_signup"><form action="https://phytec.us12.list-manage.com/subscribe/post?u=3b4b74d0afae55268060eb66b&amp;id=41eac3ebef&amp;v_id=6901&amp;f_id=002ab8e0f0" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate><div id="mc_embed_signup_scroll"><div class="mc-field-group"><input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL" required placeholder="Email *"></div><div class="mc-field-group"><input type="text" value="" name="FNAME" class="" id="mce-FNAME" placeholder="Vorname"></div><div class="mc-field-group"><input type="text" value="" name="LNAME" class="" id="mce-LNAME" placeholder="Nachname"></div><div id="mergeRow-gdpr" class="mergeRow gdpr-mergeRow content__gdprBlock mc-field-group"><div class="content__gdpr"><fieldset class="mc_fieldset gdprRequired mc-field-group" name="interestgroup_field"><label class="checkbox subfield" for="gdpr_53373"><input type="checkbox" id="gdpr_53373" name="gdpr[53373]" value="Y" class="av-checkbox gdpr"><span style="color: #00595D;">Ich habe die <a href="/datenschutzerklaerung/" style="color: #00595D;"><u>Datenschutzerklärung</u></a> von PHYTEC gelesen und bin damit einverstanden.</span></label></fieldset></div></div><div hidden="true"><input type="hidden" name="tags" value="5201553,5213645"></div><div id="mce-responses" class="clear"><div class="response" id="mce-error-response" style="display:none"></div><div class="response" id="mce-success-response" style="display:none"></div></div><div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_3b4b74d0afae55268060eb66b_41eac3ebef" tabindex="-1" value=""></div><div class="clear"><input type="submit" value="Abonnieren" name="subscribe" id="mc-embedded-subscribe" class="button"></div></div><div class="content__gdprLegal"><p style="color: #00595D;">Wir verwenden Mailchimp. Indem Sie oben auf Abonnieren klicken, erkennen Sie an, dass Ihre Daten zur Verarbeitung an Mailchimp übertragen werden. <a href="https://mailchimp.com/legal/terms" target="_blank" style="color: #00595D;"><u>Erfahren Sie hier mehr über die Datenschutzpraktiken von Mailchimp.</u></a></p></div></form></div><script src='//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js'></script><script>(function($) {window.fnames = new Array(); window.ftypes = new Array();fnames[4]='ANREDE';ftypes[4]='radio';fnames[1]='FNAME';ftypes[1]='text';fnames[2]='LNAME';ftypes[2]='text';fnames[0]='EMAIL';ftypes[0]='email';fnames[3]='FIRMA';ftypes[3]='text';fnames[5]='GTRANSLATE';ftypes[5]='text'; /* * Translated default messages for the $ validation plugin. * Locale: DE */ $.extend($.validator.messages, { required: "Dieses Feld ist ein Pflichtfeld.", maxlength: $.validator.format("Geben Sie bitte maximal {0} Zeichen ein."), minlength: $.validator.format("Geben Sie bitte mindestens {0} Zeichen ein."), rangelength: $.validator.format("Geben Sie bitte mindestens {0} und maximal {1} Zeichen ein."), email: "Geben Sie bitte eine gültige E-Mail Adresse ein.", url: "Geben Sie bitte eine gültige URL ein.", date: "Bitte geben Sie ein gültiges Datum ein.", number: "Geben Sie bitte eine Nummer ein.", digits: "Geben Sie bitte nur Ziffern ein.", equalTo: "Bitte denselben Wert wiederholen.", range: $.validator.format("Geben Sie bitten einen Wert zwischen {0} und {1}."), max: $.validator.format("Geben Sie bitte einen Wert kleiner oder gleich {0} ein."), min: $.validator.format("Geben Sie bitte einen Wert größer oder gleich {0} ein."), creditcard: "Geben Sie bitte ein gültige Kreditkarten-Nummer ein." });}(jQuery));var $mcj = jQuery.noConflict(true);</script></div></div></div></div></div></div></nav></div><div class="frame frame-type-phytecbasetemplate_accordionmenu frame-layout-0" id="c4385"/></footer><div hidden><nav id="sidemenu"><ul><li class="sub " id="elem_637"><span title="Embedded Solutions">Embedded Solutions</span><ul><li class="" id="elem_1063"><a title="Angebote für HW-Entwickler" href="/angebote-fuer-hw-entwickler/"> Angebote für HW-Entwickler </a></li><li class="" id="elem_1064"><a title="Angebote für SW-Entwickler" href="/angebote-fuer-sw-entwickler/"> Angebote für SW-Entwickler </a></li><li class="" id="elem_1065"><a title="Angebote für Projektleiter" href="/angebote-fuer-projektleiter/"> Angebote für Projektleiter </a></li><li class="" id="elem_1066"><a title="Angebote für Einkäufer" href="/angebote-fuer-einkaeufer/"> Angebote für Einkäufer </a></li><li class="" id="elem_1098"><a title="PHYTEC Top-Produkte" href="/phytec-top-produkte/"> PHYTEC Top-Produkte </a></li><li class="" id="elem_513"><a title="Sitemap" href="/sitemap/"> Sitemap </a></li></ul></li><li class="sub" id="elem_652"><span title="Produkte">Produkte</span><ul><li class="sub " id="elem_731"><a title="System on Modules" href="/produkte/system-on-modules/"> System on Modules </a></li><li class="sub" id="elem_732"><a title="Single Board Computer" href="/produkte/single-board-computer/"> Single Board Computer </a></li><li class="sub" id="elem_727"><a title="Development Kits" href="/produkte/development-kits/"> Development Kits </a></li><li class="sub" id="elem_725"><a title="OEM-Lösungen" href="/produkte/fertige-geraete-oem/"> OEM-Lösungen </a></li><li class="sub" id="elem_765"><a title="Embedded Vision Lösungen" href="/produkte/embedded-vision/"> Embedded Vision Lösungen </a></li><li class="sub" id="elem_764"><a title="Low Power Solutions" href="/produkte/low-power-solutions/"> Low Power Solutions </a></li><li class="" id="elem_810"><a title="Zubehör" href="/produkte/zubehoer/"> Zubehör </a></li><li class="" id="elem_722"><a title="NXP i.MX 8 - Alle Varianten" href="/produkte/nxp-imx-8-alle-varianten/"> NXP i.MX 8 - Alle Varianten </a></li><li class="" id="elem_724"><a title="NXP i.MX 6UL/ULL" href="/produkte/nxp-imx-6ul-6ull/"> NXP i.MX 6UL/ULL </a></li><li class="" id="elem_723"><a title="NXP i.MX 6" href="/produkte/nxp-imx-6/"> NXP i.MX 6 </a></li><li class="" id="elem_738"><a title="NXP i.MX 7" href="/produkte/nxp-imx-7/"> NXP i.MX 7 </a></li><li class="" id="elem_1086"><a title="NXP MPC567x/5777" href="/produkte/nxp-mpc567x-mpc5777-1/"> NXP MPC567x/5777 </a></li><li class="" id="elem_1898"><a title="TI AM62x" href="/produkte/ti-am62x/"> TI AM62x </a></li><li class="" id="elem_739"><a title="TI AM65x" href="/produkte/ti-am65x/"> TI AM65x </a></li><li class="" id="elem_1688"><a title="TI AM64x" href="/produkte/ti-am64x/"> TI AM64x </a></li><li class="" id="elem_740"><a title="TI AM57x" href="/produkte/ti-am57x/"> TI AM57x </a></li><li class="" id="elem_741"><a title="TI AM335x" href="/produkte/ti-am335x/"> TI AM335x </a></li><li class="" id="elem_812"><a title="STM32MP1" href="/produkte/stm32mp1/"> STM32MP1 </a></li><li class="" id="elem_1085"><a title="Infineon Aurix/TriCore" href="/produkte/infineon-tc399/"> Infineon Aurix/TriCore </a></li><li class="" id="elem_771"><a title="NXP" href="/produkte/alle-hersteller/nxp/"> NXP </a></li><li class="" id="elem_770"><a title="Texas Instruments" href="/produkte/alle-hersteller/ti/"> Texas Instruments </a></li><li class="" id="elem_769"><a title="STMicroelectronics" href="/produkte/alle-hersteller/st/"> STMicroelectronics </a></li><li class="" id="elem_767"><a title="Infineon" href="/produkte/alle-hersteller/infineon/"> Infineon </a></li><li class="" id="elem_1831"><a title="Software Releases" href="/produkte/software-releases/"> Software Releases </a></li><li class="" id="elem_1747"><a title="Online-Showroom" href="/online-showroom/"> Online-Showroom </a></li><li class="" id="elem_757"><a title="Online Shop" href="/produkte/online-shop/"> Online Shop </a></li></ul></li><li class="sub" id="elem_653"><span title="Leistungen">Leistungen</span><ul><li class="" id="elem_867"><a title="Prototypentwicklung" href="/leistungen/ihr-prototyp/"> Prototypentwicklung </a></li><li class="" id="elem_737"><a title="Custom SOM" href="/leistungen/custom-som/"> Custom SOM </a></li><li class="" id="elem_736"><a title="Custom SBC" href="/leistungen/custom-sbc/"> Custom SBC </a></li><li class="" id="elem_1049"><a title="Custom OEM" href="/leistungen/custom-oem/"> Custom OEM </a></li><li class="" id="elem_1087"><a title="Teil- und Komplettentwicklungen" href="/leistungen/teil-und-komplettentwicklungen/"> Teil- und Komplettentwicklungen </a></li><li class="" id="elem_860"><a title="Embedded Vision" href="/leistungen/embedded-vision/"> Embedded Vision </a></li><li class="" id="elem_1084"><a title="Low Power Solutions" href="/leistungen/low-power-solutions/"> Low Power Solutions </a></li><li class="sub" id="elem_1497"><a title="Raspberry Pi Designcenter" href="/leistungen/raspberry-pi-designcenter/"> Raspberry Pi Designcenter </a></li><li class="" id="elem_766"><a title="FAE-Service" href="/leistungen/fae-service/"> FAE-Service </a></li><li class="" id="elem_1006"><a title="Betriebssysteme" href="/leistungen/phybsp/"> Betriebssysteme </a></li><li class="" id="elem_1259"><a title="phyLINE-BSP" href="/leistungen/phyline-bsp/"> phyLINE-BSP </a></li><li class="" id="elem_861"><a title="IoT / Cloud Integration" href="/leistungen/iot/"> IoT / Cloud Integration </a></li><li class="" id="elem_1738"><a title="Update- und Device-Management" href="/leistungen/update-und-devicemanagement/"> Update- und Device-Management </a></li><li class="" id="elem_756"><a title="Embedded Security" href="/leistungen/embedded-security/"> Embedded Security </a></li><li class="" id="elem_743"><a title="Künstliche Intelligenz" href="/leistungen/kuenstliche-intelligenz/"> Künstliche Intelligenz </a></li><li class="" id="elem_864"><a title="Sprachsteuerung" href="/leistungen/sprachsteuerung/"> Sprachsteuerung </a></li><li class="" id="elem_755"><a title="Software-Lifecycle-Management" href="/leistungen/software-lifecycle-management/"> Software-Lifecycle-Management </a></li><li class="" id="elem_1508"><a title="Vision Middleware" href="/leistungen/imaging-middleware/"> Vision Middleware </a></li><li class="" id="elem_735"><a title="Produktions-Services" href="/leistungen/produktions-services/"> Produktions-Services </a></li><li class="" id="elem_1062"><a title="3D-Gehäusedruck" href="/leistungen/3d-gehaeusedruck/"> 3D-Gehäusedruck </a></li><li class="" id="elem_1060"><a title="Produktmontage" href="/leistungen/produktmontage/"> Produktmontage </a></li><li class="" id="elem_1061"><a title="Optikmontage" href="/leistungen/optikmontage/"> Optikmontage </a></li><li class="" id="elem_733"><a title="Entwicklungsphasen" href="/leistungen/entwicklungsphasen/"> Entwicklungsphasen </a></li><li class="" id="elem_816"><a title="Projektworkshop" href="/leistungen/projektworkshop/"> Projektworkshop </a></li><li class="" id="elem_1249"><a title="KI-Projektworkshop" href="/leistungen/ki-projektworkshop/"> KI-Projektworkshop </a></li><li class="" id="elem_758"><a title="Webinare" href="/leistungen/online-seminare/"> Webinare </a></li></ul></li><li class="sub" id="elem_747"><span title="Unternehmen">Unternehmen</span><ul><li class="" id="elem_781"><a title="Über uns" href="/unternehmen/ueber-uns/"> Über uns </a></li><li class="" id="elem_1894"><a title="Partnernetzwerke" href="/unternehmen/partnernetzwerke/"> Partnernetzwerke </a></li><li class="sub" id="elem_759"><a title="Referenzen" href="/unternehmen/referenzen/"> Referenzen </a></li><li class="" id="elem_778"><a title="Made in Germany" href="/unternehmen/made-in-germany/"> Made in Germany </a></li><li class="" id="elem_779"><a title="Management" href="/unternehmen/management/"> Management </a></li><li class="" id="elem_777"><a title="Publikationen" href="/unternehmen/publikationen/"> Publikationen </a></li><li class="" id="elem_793"><a title="Kalender" href="/unternehmen/kalender/"> Kalender </a></li><li class="sub" id="elem_728"><a title="Schulungen + Trainings" href="/unternehmen/schulungen-trainings/"> Schulungen + Trainings </a></li><li class="" id="elem_783"><a title="Messen 2023" href="/unternehmen/messen/"> Messen 2023 </a></li><li class="" id="elem_936"><a title="Mediathek" href="/unternehmen/mediathek/"> Mediathek </a></li><li class="" id="elem_1500"><a title="Blog" href="/unternehmen/blog/"> Blog </a></li><li class="" id="elem_1074"><a title="Langzeitverfügbarkeit" href="/unternehmen/langzeitverfuegbarkeit/"> Langzeitverfügbarkeit </a></li><li class="" id="elem_1052"><a title="Preismodelle" href="/unternehmen/preismodelle/"> Preismodelle </a></li><li class="" id="elem_947"><a title="Liefermodelle" href="/leistungen/liefermodelle/"> Liefermodelle </a></li><li class="" id="elem_749"><a title="Newsletter" href="/unternehmen/newsletter/"> Newsletter </a></li><li class="" id="elem_1981"><a title="Karriere" href="/unternehmen/karriere-1/"> Karriere </a></li><li class="sub" id="elem_780"><a title="Offene Stellen" href="/unternehmen/karriere/"> Offene Stellen </a></li><li class="sub " id="elem_750"><a title="Kontakt" href="/unternehmen/kontakt/"> Kontakt </a></li></ul></li><li class=" sub" id="elem_720"><span title="Support">Support</span><ul><li class="" id="elem_2012"><a title="VM Readme" href="/support/vm-readme/"> VM Readme </a></li><li class="" id="elem_1745"><a title="Expertengespräch" href="/expertengespraech/"> Expertengespräch </a></li><li class="" id="elem_944"><a title="PLM Service" href="/support/product-lifecycle-management/"> PLM Service </a></li><li class="" id="elem_774"><a title="Downloads" href="/support/downloads/"> Downloads </a></li><li class="" id="elem_1643"><a title="Help Desk" href="/support/help-desk/"> Help Desk </a></li><li class="" id="elem_775"><a title="Support-Pakete" href="/support/support-pakete/"> Support-Pakete </a></li><li class="" id="elem_1899"><a title="ISO Zertifikat" href="/support/iso-zertifikat/"> ISO Zertifikat </a></li><li class="" id="elem_734"><a title="Retourenformular" href="/support/retourenformular/"> Retourenformular </a></li></ul></li><li class="sub " id="elem_1092"><span title="Impressum &amp; Datenschutz">Impressum &amp; Datenschutz</span><ul><li class="" id="elem_499"><a title="Impressum" href="/impressum/"> Impressum </a></li><li class="" id="elem_496"><a title="Datenschutzerklärung" href="/datenschutzerklaerung/"> Datenschutzerklärung </a></li><li class="" id="elem_1088"><a title="Cookie-Richtlinie" href="/cookie-richtlinie/"> Cookie-Richtlinie </a></li><li class="" id="elem_1089"><a title="Zahlung &amp; Versand" href="/zahlung-versand/"> Zahlung &amp; Versand </a></li><li class="" id="elem_1090"><a title="Allgemeine Geschäftsbedingungen" href="/allgemeine-geschaeftsbedingungen/"> Allgemeine Geschäftsbedingungen </a></li></ul></li><div class="frame frame-type-html frame-layout-0" id="c34869"><li class="mm-listitem mm-contact"><p>Wir beraten Sie gerne!</p><p><a href="tel:+496131922132" title="+49 (0) 6131 9221- 32"><i class="fa fa-phone"></i> +49 (0) 6131 9221- 32</a><br/> Mo.- Fr. 8:00 - 17:00 Uhr (CET) </p><p class="language"><a href="#" onclick="doGTranslate('de|de','www.phytec.de');return false;" title="german"><img src="/fileadmin/phytec_base/images/icons/Icons/de.svg" alt="de"/></a><a href="#" onclick="doGTranslate('de|en','www.phytec.eu');return false;" title="english"><img src="/fileadmin/phytec_base/images/icons/Icons/en-us-gb.svg" alt="en"/></a><a href="#" onclick="doGTranslate('de|es','www.phytec.de');return false;" title="español"><img src="/fileadmin/phytec_base/images/icons/Icons/es.svg" alt="es"/></a><a href="#" onclick="doGTranslate('de|it','www.phytec.de');return false;" title="italiano"><img src="/fileadmin/phytec_base/images/icons/Icons/it.svg" alt="it"/></a><br/><a href="#" onclick="doGTranslate('de|pl','www.phytec.pl');return false;" title="polskie"><img src="/fileadmin/phytec_base/images/icons/Icons/pl.svg" alt="pl"/></a><a href="#" onclick="doGTranslate('de|sv','www.phytec.de');return false;" title="svenska"><img src="/fileadmin/phytec_base/images/icons/Icons/swe.svg" alt="swe"/></a><a href="#" onclick="doGTranslate('de|no','www.phytec.de');return false;" title="norsk"><img src="/fileadmin/phytec_base/images/icons/Icons/nor.svg" alt="nor"/></a><a href="#" onclick="doGTranslate('de|ru','www.phytec.ru');return false;" title="русский"><img src="/fileadmin/phytec_base/images/icons/Icons/ru.svg" alt="ru"/></a><br/><a hreflang="fr" href="https://www.phytec.fr/" alt="France" title="France"><img src="/fileadmin/phytec_base/images/icons/Icons/fr.svg" alt="fr"/></a><a hreflang="us" href="https://www.phytec.com/" alt="USA" title="USA"><img src="/fileadmin/phytec_base/images/icons/Icons/us.svg" alt="us"/></a><a hreflang="in" href="https://www.phytec.in/" alt="India" title="India"><img src="/fileadmin/phytec_base/images/icons/Icons/in.svg" alt="in"/></a><a hreflang="cn" href="https://www.phytec.cn/" alt="中国" title="中国"><img src="/fileadmin/phytec_base/images/icons/Icons/cn.svg" alt="cn"/></a></p><p class="social"><a href="https://www.facebook.com/PHYTEC.Mainz" alt="Facebook" title="Facebook" target="_blank" rel="noopener"><img src="/fileadmin/phytec_base/images/icons/Icons/icon-facebook-mob.svg" alt="facebook"/></a><a href="https://twitter.com/PHYTEC_Gmbh" alt="Twitter" title="Twitter" target="_blank" rel="noopener"><img src="/fileadmin/phytec_base/images/icons/Icons/icon-twitter-mob.svg" alt="twitter"/></a><a href="https://www.linkedin.com/company/phytec-messtechnik-gmbh" alt="LinkedIn" title="LinkedIn" target="_blank" rel="noopener"><img src="/fileadmin/phytec_base/images/icons/Icons/icon-Linkedin-mob.svg" alt="linkedin"/></a><br/><a href="https://www.xing.com/companies/phytecmesstechnikgmbh" alt="Xing" title="Xing" target="_blank" rel="noopener"><img src="/fileadmin/phytec_base/images/icons/Icons/icon-Xing-mob.svg" alt="xing"/></a><a href="https://www.youtube.com/user/PhytecMainz" alt="YouTube" title="YouTube" target="_blank" rel="noopener"><img src="/fileadmin/phytec_base/images/icons/Icons/icon-YT-mob.svg" alt="youtube"/></a><a href="https://www.instagram.com/phytec_germany/" alt="Instagram" title="Instagram" target="_blank" rel="noopener"><img src="/fileadmin/phytec_base/images/icons/Icons/icon-insta-mob.svg" alt="instgram"/></a></p></li></div></ul></nav><nav id="nav-mobile-footer"></nav></div></div><script> window.addEventListener('cookieConsent', function (event) { if (event.detail.hasOption('linkedin')) { _linkedin_partner_id = "2633138"; window._linkedin_data_partner_ids = window._linkedin_data_partner_ids || []; window._linkedin_data_partner_ids.push(_linkedin_partner_id); (function() {var s = document.getElementsByTagName("script")[0]; var b = document.createElement("script"); b.type = "text/javascript";b.async = true; b.src = "https://snap.licdn.com/li.lms-analytics/insight.min.js"; s.parentNode.insertBefore(b, s);} )(); } }); </script><script src="/typo3temp/assets/compressed/merged-f5b01a4c037d271b4d092fa046f105fd-min.js.gzip?1675960394"></script><script src="/typo3temp/assets/compressed/merged-23a066693d670951b9d43c352d72565c-min.js.gzip?1679673316"></script><div id="cookie-consent" class="cookie-consent-container" style="display: none;"><div class="consent-modal"><strong class="cookie-headline">Cookie Einstellungen</strong><div class="hint"><p>Wir nutzen Cookies auf unserer Webseite. Einige von ihnen sind technisch notwendig, während andere uns helfen, diese Website zu verbessern oder zusätzliche Funktionalitäten zur Verfügung zu stellen.</p></div><form autocomplete="off" action="/startseite/cookie.json?tx_mindshapecookieconsent_consent%5Baction%5D=consent&amp;tx_mindshapecookieconsent_consent%5Bcontroller%5D=Consent&amp;cHash=2776f1b338302b73411d113bc77736aa" method="post"><div><input type="hidden" name="tx_mindshapecookieconsent_consent[__referrer][@extension]" value=""/><input type="hidden" name="tx_mindshapecookieconsent_consent[__referrer][@controller]" value="Standard"/><input type="hidden" name="tx_mindshapecookieconsent_consent[__referrer][@action]" value="consent/Modal"/><input type="hidden" name="tx_mindshapecookieconsent_consent[__referrer][arguments]" value="YTowOnt9b97f3085e1a752ad34cc45c2b60664c232dcaa9f"/><input type="hidden" name="tx_mindshapecookieconsent_consent[__referrer][@request]" value="a:3:{s:10:&quot;@extension&quot;;N;s:11:&quot;@controller&quot;;s:8:&quot;Standard&quot;;s:7:&quot;@action&quot;;s:13:&quot;consent/Modal&quot;;}d09fe960b8dc6e691c56771a74ecc296cb0e83ff"/><input type="hidden" name="tx_mindshapecookieconsent_consent[__trustedProperties]" value="a:1:{s:7:&quot;consent&quot;;a:4:{s:13:&quot;isAjaxRequest&quot;;i:1;s:10:&quot;currentUrl&quot;;i:1;s:9:&quot;selectAll&quot;;i:1;s:13:&quot;cookieOptions&quot;;a:10:{i:0;i:1;i:1;i:1;i:2;i:1;i:3;i:1;i:4;i:1;i:5;i:1;i:6;i:1;i:7;i:1;i:8;i:1;i:9;i:1;}}}47da613b91a150d864d9f0076d130300d41fac4b"/></div><input class="is-ajax" type="hidden" name="tx_mindshapecookieconsent_consent[consent][isAjaxRequest]" value="0"/><input type="hidden" name="tx_mindshapecookieconsent_consent[consent][currentUrl]" value="https://www.phytec.de/cdocuments/?doc=IADyHg"/><ul class="options"><li><label for="modal-option-necessary" class="label"><input id="modal-option-necessary" class="option-necessary" type="checkbox" checked disabled> Notwendige Cookies <span class="checkmark"></span></label></li><li><label for="modal-option-4" class="label"><input id="modal-option-4" class="option" type="checkbox" value="4"> Statistik <span class="checkmark"></span></label></li><li><label for="modal-option-6" class="label"><input id="modal-option-6" class="option" type="checkbox" value="6"> Externe Medien <span class="checkmark"></span></label></li><li><label for="modal-option-5" class="label"><input id="modal-option-5" class="option" type="checkbox" value="5"> Kommunikation <span class="checkmark"></span></label></li></ul><div class="buttons text-center"><button class="select-all btn btn--primary" type="submit" name="tx_mindshapecookieconsent_consent[consent][selectAll]" value="1"> Alle auswählen </button><button class="save btn btn--secondary" type="submit" name="tx_mindshapecookieconsent_consent[consent][selectAll]" value="0"> Speichern </button></div><a href="#" class="show-details text-center"><span class="more">Details anzeigen</span><span class="less">Details ausblenden</span></a><div class="details"><div class="detail"><div class="option-wrapper"><strong class="option-headline">Notwendige Cookies</strong><p>Notwendige Cookies ermöglichen grundlegende Funktionen und sind für die einwandfreie Funktion der Website erforderlich.</p><div class="necessary-cookieoptions"><div class="option-detail-wrapper"><div class="option-detail cookie-option"><label for="modal-cookieoption-39" class="label"><input id="modal-cookieoption-39" type="checkbox" checked disabled> Visme <span class="checkmark"></span></label></div><div class="option-detail option-name"><strong class="option-title">Name:</strong><span class="option-value">_fbp,__zlcmid,_ttp</span></div><div class="option-detail option-provider"><strong class="option-title">Anbieter:</strong><span class="option-value">Easy WebContent, Inc.</span></div><div class="option-detail option-purpose"><strong class="option-title">Zweck:</strong><span class="option-value">Anzeige interaktiver Grafiken</span></div></div><div class="option-detail-wrapper"><div class="option-detail cookie-option"><label for="modal-cookieoption-35" class="label"><input id="modal-cookieoption-35" type="checkbox" checked disabled> Connectoor <span class="checkmark"></span></label></div><div class="option-detail option-name"><strong class="option-title">Name:</strong><span class="option-value">_ga</span></div><div class="option-detail option-provider"><strong class="option-title">Anbieter:</strong><span class="option-value">jobEconomy GmbH</span></div><div class="option-detail option-purpose"><strong class="option-title">Zweck:</strong><span class="option-value">Bewerbungsformular</span></div></div><div class="option-detail-wrapper"><div class="option-detail cookie-option"><label for="modal-cookieoption-20" class="label"><input id="modal-cookieoption-20" type="checkbox" checked disabled> tawk.to <span class="checkmark"></span></label></div><div class="option-detail option-name"><strong class="option-title">Name:</strong><span class="option-value">TawkConnectionTime, __tawkuuid</span></div><div class="option-detail option-provider"><strong class="option-title">Anbieter:</strong><span class="option-value">tawk.to, inc</span></div><div class="option-detail option-purpose"><strong class="option-title">Zweck:</strong><span class="option-value">Live Chat</span></div></div><div class="option-detail-wrapper"><div class="option-detail cookie-option"><label for="modal-cookieoption-18" class="label"><input id="modal-cookieoption-18" type="checkbox" checked disabled> Foxycart <span class="checkmark"></span></label></div><div class="option-detail option-name"><strong class="option-title">Name:</strong><span class="option-value">foxycart</span></div><div class="option-detail option-provider"><strong class="option-title">Anbieter:</strong><span class="option-value">Foxy.io</span></div><div class="option-detail option-purpose"><strong class="option-title">Zweck:</strong><span class="option-value">Ecommerce</span></div></div><div class="option-detail-wrapper"><div class="option-detail cookie-option"><label for="modal-cookieoption-4" class="label"><input id="modal-cookieoption-4" type="checkbox" checked disabled> Einverständnis-Cookie <span class="checkmark"></span></label></div><div class="option-detail option-name"><strong class="option-title">Name:</strong><span class="option-value">cookie_consent</span></div><div class="option-detail option-provider"><strong class="option-title">Anbieter:</strong><span class="option-value">PHYTEC Messtechnik GmbH</span></div><div class="option-detail option-purpose"><strong class="option-title">Zweck:</strong><span class="option-value">Ausgewählte Einverständnis-Optionen des Benutzers</span></div></div></div></div><div class="option-wrapper"><strong class="option-headline">Statistik</strong><p>Statistik Cookies erfassen Informationen anonym. Diese Informationen helfen uns zu verstehen, wie unsere Besucher unsere Website nutzen.</p><div class="cookieoptions" data-parent="#modal-option-4"><div class="option-detail-wrapper"><div class="option-detail cookie-option"><label for="modal-cookieoption-google_analytics" class="label"><input type="hidden" name="tx_mindshapecookieconsent_consent[consent][cookieOptions]" value=""/><input data-identifier="google_analytics" id="modal-cookieoption-google_analytics" type="checkbox" name="tx_mindshapecookieconsent_consent[consent][cookieOptions][]" value="11"/> Google Analytics <span class="checkmark"></span></label></div><div class="option-detail option-name"><strong class="option-title">Name:</strong><span class="option-value">_ga, _gid</span></div><div class="option-detail option-provider"><strong class="option-title">Anbieter:</strong><span class="option-value">Google Ireland Limited</span></div><div class="option-detail option-purpose"><strong class="option-title">Zweck:</strong><span class="option-value">Analyse und statistische Auswertung der Webseite</span></div></div><div class="option-detail-wrapper"><div class="option-detail cookie-option"><label for="modal-cookieoption-crazyegg" class="label"><input data-identifier="crazyegg" id="modal-cookieoption-crazyegg" type="checkbox" name="tx_mindshapecookieconsent_consent[consent][cookieOptions][]" value="13"/> CrazyEgg <span class="checkmark"></span></label></div><div class="option-detail option-name"><strong class="option-title">Name:</strong><span class="option-value">_ceir, _ceg.s, _ceg.u</span></div><div class="option-detail option-provider"><strong class="option-title">Anbieter:</strong><span class="option-value">Crazy Egg, Inc.</span></div><div class="option-detail option-purpose"><strong class="option-title">Zweck:</strong><span class="option-value">Analyse und statistische Auswertung der Webseite</span></div></div><div class="option-detail-wrapper"><div class="option-detail cookie-option"><label for="modal-cookieoption-linkedin" class="label"><input data-identifier="linkedin" id="modal-cookieoption-linkedin" type="checkbox" name="tx_mindshapecookieconsent_consent[consent][cookieOptions][]" value="21"/> LinkedIn <span class="checkmark"></span></label></div><div class="option-detail option-name"><strong class="option-title">Name:</strong><span class="option-value">li_gc, lidc, bcookie, AnalyticsSyncHistory, UserMatchHistory, lang</span></div><div class="option-detail option-provider"><strong class="option-title">Anbieter:</strong><span class="option-value">LinkedIn</span></div><div class="option-detail option-purpose"><strong class="option-title">Zweck:</strong><span class="option-value">Analyse und statistische Auswertung der Webseite</span></div></div><div class="option-detail-wrapper"><div class="option-detail cookie-option"><label for="modal-cookieoption-heatclix" class="label"><input data-identifier="heatclix" id="modal-cookieoption-heatclix" type="checkbox" name="tx_mindshapecookieconsent_consent[consent][cookieOptions][]" value="37"/> Heatclix <span class="checkmark"></span></label></div><div class="option-detail option-provider"><strong class="option-title">Anbieter:</strong><span class="option-value">Heatclix</span></div><div class="option-detail option-purpose"><strong class="option-title">Zweck:</strong><span class="option-value">Analyse und statistische Auswertung der Webseite</span></div></div><div class="option-detail-wrapper"><div class="option-detail cookie-option"><label for="modal-cookieoption-microsoft_advertising" class="label"><input data-identifier="microsoft_advertising" id="modal-cookieoption-microsoft_advertising" type="checkbox" name="tx_mindshapecookieconsent_consent[consent][cookieOptions][]" value="38"/> Microsoft Advertising <span class="checkmark"></span></label></div><div class="option-detail option-name"><strong class="option-title">Name:</strong><span class="option-value">_uetsid, _uetvid</span></div><div class="option-detail option-provider"><strong class="option-title">Anbieter:</strong><span class="option-value">Microsoft Corporation</span></div><div class="option-detail option-purpose"><strong class="option-title">Zweck:</strong><span class="option-value">Analyse und statistische Auswertung der Webseite</span></div></div></div></div><div class="option-wrapper"><strong class="option-headline">Externe Medien</strong><p>Um Inhalte von Videoplattformen und Social Media Plattformen anzeigen zu können, werden von diesen externen Medien Cookies gesetzt.</p><div class="cookieoptions" data-parent="#modal-option-6"><div class="option-detail-wrapper"><div class="option-detail cookie-option"><label for="modal-cookieoption-youtube" class="label"><input data-identifier="youtube" id="modal-cookieoption-youtube" type="checkbox" name="tx_mindshapecookieconsent_consent[consent][cookieOptions][]" value="5"/> YouTube <span class="checkmark"></span></label></div><div class="option-detail option-name"><strong class="option-title">Name:</strong><span class="option-value">NID</span></div><div class="option-detail option-provider"><strong class="option-title">Anbieter:</strong><span class="option-value">Google Ireland Limited</span></div><div class="option-detail option-purpose"><strong class="option-title">Zweck:</strong><span class="option-value">Anzeige von Videos</span></div></div><div class="option-detail-wrapper"><div class="option-detail cookie-option"><label for="modal-cookieoption-google_maps" class="label"><input data-identifier="google_maps" id="modal-cookieoption-google_maps" type="checkbox" name="tx_mindshapecookieconsent_consent[consent][cookieOptions][]" value="14"/> Google Maps <span class="checkmark"></span></label></div><div class="option-detail option-name"><strong class="option-title">Name:</strong><span class="option-value">NID</span></div><div class="option-detail option-provider"><strong class="option-title">Anbieter:</strong><span class="option-value">Google Ireland Limited</span></div><div class="option-detail option-purpose"><strong class="option-title">Zweck:</strong><span class="option-value">Anzeige von Kartenmaterial und Routenplanung</span></div></div></div></div><div class="option-wrapper"><strong class="option-headline">Kommunikation</strong><p>Kommunikations Cookies werden von Drittanbietern verwendet, um Dienste zur Kommunikation anzubieten.</p><div class="cookieoptions" data-parent="#modal-option-5"><div class="option-detail-wrapper"><div class="option-detail cookie-option"><label for="modal-cookieoption-calenso" class="label"><input data-identifier="calenso" id="modal-cookieoption-calenso" type="checkbox" name="tx_mindshapecookieconsent_consent[consent][cookieOptions][]" value="16"/> Calenso <span class="checkmark"></span></label></div><div class="option-detail option-name"><strong class="option-title">Name:</strong><span class="option-value">_cs_id, _cs_c</span></div><div class="option-detail option-provider"><strong class="option-title">Anbieter:</strong><span class="option-value">Braincept AG</span></div><div class="option-detail option-purpose"><strong class="option-title">Zweck:</strong><span class="option-value">Terminvereinbarungen</span></div></div><div class="option-detail-wrapper"><div class="option-detail cookie-option"><label for="modal-cookieoption-mailchimp" class="label"><input data-identifier="mailchimp" id="modal-cookieoption-mailchimp" type="checkbox" name="tx_mindshapecookieconsent_consent[consent][cookieOptions][]" value="17"/> Mailchimp <span class="checkmark"></span></label></div><div class="option-detail option-name"><strong class="option-title">Name:</strong><span class="option-value">_abck</span></div><div class="option-detail option-provider"><strong class="option-title">Anbieter:</strong><span class="option-value">Rocket Science Group</span></div><div class="option-detail option-purpose"><strong class="option-title">Zweck:</strong><span class="option-value">Newsletter</span></div></div><div class="option-detail-wrapper"><div class="option-detail cookie-option"><label for="modal-cookieoption-webinaris" class="label"><input data-identifier="webinaris" id="modal-cookieoption-webinaris" type="checkbox" name="tx_mindshapecookieconsent_consent[consent][cookieOptions][]" value="19"/> Webinaris <span class="checkmark"></span></label></div><div class="option-detail option-name"><strong class="option-title">Name:</strong><span class="option-value">ci_session</span></div><div class="option-detail option-provider"><strong class="option-title">Anbieter:</strong><span class="option-value">Webinaris GmbH</span></div><div class="option-detail option-purpose"><strong class="option-title">Zweck:</strong><span class="option-value">Online Seminare</span></div></div></div></div></div></div></form><small class="footer-links text-center"><a href="/impressum/" target="_self">Impressum</a>&nbsp;|&nbsp;<a href="/datenschutzerklaerung/" target="_self">Datenschutz</a></small></div></div></body></html>